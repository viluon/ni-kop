<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Ondřej Kvapil" />
  <title>NI-KOP – úkol 2</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!-- Bootstrap 4.5.0 stylesheet -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <link rel="stylesheet" href="css/mods.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
<!-- <script data-main="scripts/main" src="js/require.js"></script> -->
  <!-- Load React. -->
  <!-- Note: when deploying, replace "development.js" with "production.min.js". -->
<!--  <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script> -->


</head>
<body class="d-flex flex-column">

<nav id="TOC" class="navbar navbar-dark bg-dark">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a href="#" class="ml-5 mr-auto navbar-brand">NI-KOP – úkol 2<br><span style="font-size: smaller">
        by <i>Ondřej Kvapil</i></span></a>
<div class="collapse navbar-collapse" id="navbarSupportedContent">
<ul>
<li><a href="#kombinatorická-optimalizace-problém-batohu">Kombinatorická optimalizace: problém batohu</a>
<ul>
<li><a href="#zadání">Zadání</a>
<ul>
<li><a href="#pokyny">Pokyny</a></li>
<li><a href="#zpráva-bude-obsahovat">Zpráva bude obsahovat</a></li>
<li><a href="#bonusový-bod">Bonusový bod</a></li>
</ul></li>
<li><a href="#řešení">Řešení</a></li>
<li><a href="#instrukce-k-sestavení-programu">Instrukce k sestavení programu</a></li>
<li><a href="#benchmarking">Benchmarking</a>
<ul>
<li><a href="#srovnání-algoritmů">Srovnání algoritmů</a></li>
<li><a href="#analýza">Analýza</a></li>
</ul></li>
<li><a href="#implementace">Implementace</a>
<ul>
<li><a href="#algoritmy">Algoritmy</a></li>
</ul></li>
<li><a href="#závěr">Závěr</a></li>
<li><a href="#appendix">Appendix</a>
<ul>
<li><a href="#měření-výkonu">Měření výkonu</a></li>
<li><a href="#spouštění-jednotlivých-řešičů">Spouštění jednotlivých řešičů</a></li>
<li><a href="#automatické-testy">Automatické testy</a></li>
</ul></li>
</ul></li>
</ul>
</div>
</nav>

<!-- <nav class="navbar navbar-dark navbar-expand-md bg-dark mb-4">
<p class="author">Ondřej Kvapil</p>
</nav>
 -->

<main role="main" class="flex-fill"><div class="container my-5">
<h1 id="kombinatorická-optimalizace-problém-batohu">Kombinatorická optimalizace: problém batohu</h1>
<h2 id="zadání">Zadání</h2>
<ul>
<li>Na sadách instancí (NK, ZKC, ZKW) experimentálně vyhodnoťte závislost výpočetního času a u všech heuristických algoritmů také relativní chyby (průměrné i maximální) na velikosti instance následujících algoritmů pro
<ul>
<li>konstruktivní verzi problému batohu:</li>
<li>Metoda větví a hranic.</li>
<li>Metoda dynamického programování (dekompozice podle kapacity nebo podle cen),</li>
<li>Jednoduchá greedy heuristika</li>
<li>Modifikace této heuristiky (redux), která uvažuje také řešení se sólo nejdražší věcí</li>
<li>FPTAS algoritmem, tj. s použitím modifikovaného dynamického programování s dekompozicí podle ceny (při použití dekompozice podle kapacity není algoritmus FPTAS)</li>
</ul></li>
<li>Experiment má odpovědět na tyto otázky:
<ul>
<li>Odpovídají obě závislosti (kvality a času) předpokladům?</li>
<li>Je některá heuristická metoda systematicky lepší (tzv. dominance) v některém kritériu?</li>
<li>Jak se liší obtížnost jednotlivých sad z hlediska jednotlivých metod?</li>
<li>Jaká je závislost maximální chyby (<span class="math inline">\(\varepsilon\)</span>) a času FPTAS algoritmu na zvolené přesnosti? Odpovídá předpokladům?</li>
</ul></li>
</ul>
<h3 id="pokyny">Pokyny</h3>
<p>Algoritmy naprogramujte, využijte části programů z minulé úlohy.</p>
<p>Metodu větví a hranic použijte tak, aby omezujícím faktorem byla hodnota optimalizačního kritéria. Tj. použijte ořezávání shora (překročení kapacity batohu) i zdola (stávající řešení nemůže být lepší než nejlepší dosud nalezené).</p>
<p>Pozor! Pokud implementujete FPTAS pomocí zanedbávání bitů, musíte pro daný počet zanedbaných bitů vypočítat max. chybu (<span class="math inline">\(\varepsilon\)</span>). V experimentálních výsledcích by počet zanedbaných bitů neměl figurovat, neb neříká nic konkrétního o přesnosti. Pozor, tato max. chyba je jiná pro každou instanci, nezávisí pouze na velikosti instance, ale také na max. ceně.</p>
<p>Pozor! V některých instancích se objevují věci, které svojí hmotností překračují kapacitu batohu. Samozřejmě se jedná o platné instance. Nicméně tyto věci komplikují přepočet cen u FPTAS. Zvažte sami, jak se s tím vypořádat. Řešení je snadné.</p>
<p>Pozn.: u této úlohy je opravdu lepší měřit skutečný CPU čas, namísto počtu konfigurací, jak tomu bylo u předchozího úkolu. Srovnávají se zde principiálně velice odlišné algoritmy, najít jiný relevantní způsob měření složitosti by bylo obtížné (ne-li nemožné).</p>
<h3 id="zpráva-bude-obsahovat">Zpráva bude obsahovat</h3>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="" />
Popis implementovaných metod.</li>
<li><input type="checkbox" disabled="" checked="" />
Srovnání výpočetních časů metody větví a hranic, dynamického programování a heuristiky cena/váha (stačí jedna). Grafy vítány.<ul>
<li>Tj. závislosti výpočetních časů na velikosti instance</li>
</ul></li>
<li><input type="checkbox" disabled="" checked="" />
Porovnání relativních chyb (průměrných a maximálních) obou heuristik.<ul>
<li>Tj. závislosti rel. chyby na velikosti instance</li>
</ul></li>
<li><input type="checkbox" disabled="" checked="" />
U FPTAS algoritmu pozorujte (naměřte, zdokumentujte) závislost chyby a výpočetního času algoritmu na zvolené přesnosti zobrazení (pro několik různých přesností), srovnání maximální naměřené chyby s teoreticky předpokládanou.<ul>
<li>Tj. zvolte několik požadovaných přesností (<span class="math inline">\(\varepsilon\)</span>), v závislosti na <span class="math inline">\(\varepsilon\)</span> měřte čas běhu a reálnou (maximální, případně i průměrnou) chybu algoritmu</li>
</ul></li>
<li><input type="checkbox" disabled="" checked="" />
Zhodnocení naměřených výsledků.</li>
</ul>
<h3 id="bonusový-bod">Bonusový bod</h3>
<p>Na bonusový bod musí práce obsahovat přínos navíc. Takové přínosy jsou například:</p>
<ul>
<li>Srovnání různých dekompozic v dynamickém programování (podle váhy, podle kapacity)</li>
<li>detailní experimentální analýza FPTAS algoritmu,</li>
<li>atd.</li>
</ul>
<h2 id="řešení">Řešení</h2>
<p>Úkoly předmětu NI-KOP jsem se rozhodl implementovat v jazyce Rust za pomoci nástrojů na <em>literate programming</em> – přístup k psaní zdrojového kódu, který upřednostňuje lidsky čitelný popis před seznamem příkazů pro počítač. Tento dokument obsahuje veškerý zdrojový kód nutný k reprodukci mojí práce. Výsledek je dostupný online jako statická <a href="http://viluon.me/ni-kop/">webová stránka</a> a <a href="http://viluon.me/ni-kop/report.pdf">ke stažení v PDF</a>.</p>
<h2 id="instrukce-k-sestavení-programu">Instrukce k sestavení programu</h2>
<p>Program využívá standardních nástrojů jazyka Rust. O sestavení stačí požádat <code>cargo</code>.</p>
<div class="doctest" data-status="SUCCESS">
<div class="doctestInput">
<div class="fold-block">
<button class="btn btn-outline-primary btn-sm fold-toggle" type="button" data-toggle="collapse" data-target="#build-instructions-container" aria-controls="build-instructions-container">&lt;&lt;build-instructions&gt;&gt;=</button>
<div id="build-instructions-container" class="collapse">
<div class="sourceCode" id="build-instructions" style="max-height: 50vh"><pre class="sourceCode zsh eval bootstrap-fold overflow-auto"><code class="sourceCode zsh"><span id="build-instructions-1"><a href="#build-instructions-1" aria-hidden="true" tabindex="-1"></a><span class="kw">cd</span> solver</span>
<span id="build-instructions-2"><a href="#build-instructions-2" aria-hidden="true" tabindex="-1"></a>cargo build --release --color always</span></code></pre></div>
</div>
</div>
</div>
<div class="doctestResult">
<div class="programOutput">
<pre class="ansi2html-content"><span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">    Updating</span> crates.io index
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00"> Downloading</span> crates ...
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> anyhow v1.0.44
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> log v0.4.14
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> proc-macro2 v1.0.29
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> quickcheck_macros v1.0.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> quickcheck v1.0.3
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> radium v0.6.2
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> wyz v0.4.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> tap v1.0.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> env_logger v0.8.4
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> syn v1.0.80
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> funty v1.2.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> permutation v0.2.5
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> bitvec v0.22.3
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> aho-corasick v0.7.18
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> libc v0.2.103
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> cfg-if v1.0.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> libc v0.2.103
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> memchr v2.4.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> proc-macro2 v1.0.29
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> unicode-xid v0.2.2
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> log v0.4.14
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> syn v1.0.80
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> regex-syntax v0.6.25
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> radium v0.6.2
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> tap v1.0.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> anyhow v1.0.44
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> funty v1.2.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> permutation v0.2.5
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> wyz v0.4.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> aho-corasick v0.7.18
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> getrandom v0.2.3
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> quote v1.0.10
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> bitvec v0.22.3
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> rand_core v0.6.3
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> regex v1.5.4
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> rand v0.8.4
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> env_logger v0.8.4
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> quickcheck_macros v1.0.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> quickcheck v1.0.3
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> solver v0.1.0 (/__w/ni-kop/ni-kop/2-heuristic-knapsack/solver)
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #aa5500">warning</span><span style="font-weight: bold">: unused imports: `ReadDir`, `iter::Filter`</span>
  <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">--&gt; </span>src/lib.rs:6:5
   <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">|</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">6</span>  <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">| </span>    iter::Filter,
   <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">| </span>    <span style="font-weight: bold"></span><span style="font-weight: bold; color: #aa5500">^^^^^^^^^^^^</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">...</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">10</span> <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">| </span>    fs::{read_dir, File, ReadDir, DirEntry},
   <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">| </span>                         <span style="font-weight: bold"></span><span style="font-weight: bold; color: #aa5500">^^^^^^^</span>
   <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">|</span>
   <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">= </span><span style="font-weight: bold">note</span>: `#[warn(unused_imports)]` on by default

<span style="font-weight: bold"></span><span style="font-weight: bold; color: #aa5500">warning</span><span style="font-weight: bold">:</span> `solver` (lib) generated 1 warning
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">    Finished</span> release [optimized + debuginfo] target(s) in 43.53s
</pre>
</div>
</div>
</div>
<h2 id="benchmarking">Benchmarking</h2>
<p>Od minulého úkolu jsem kompletně přepsal funkcionalitu pro benchmarking, která nově spoléhá na micro benchmark knihovnu <a href="https://crates.io/crates/criterion"><code>Criterion.rs</code></a>. Díky ní stačí pro měření výkonu spustit <code>cargo bench</code>. Konkrétní implementace měření je k nahlédnutí v <a href="#měření-výkonu">dodatku</a>.</p>
<div class="doctest" data-status="SUCCESS">
<div class="doctestInput">
<div class="fold-block">
<button class="btn btn-outline-primary btn-sm fold-toggle" type="button" data-toggle="collapse" data-target="#benchmark-container" aria-controls="benchmark-container">&lt;&lt;benchmark&gt;&gt;=</button>
<div id="benchmark-container" class="collapse">
<div class="sourceCode" id="benchmark" style="max-height: 50vh"><pre class="sourceCode zsh eval bootstrap-fold overflow-auto"><code class="sourceCode zsh"><span id="benchmark-1"><a href="#benchmark-1" aria-hidden="true" tabindex="-1"></a>uname -a</span>
<span id="benchmark-2"><a href="#benchmark-2" aria-hidden="true" tabindex="-1"></a>./cpufetch --logo-short --color ibm</span>
<span id="benchmark-3"><a href="#benchmark-3" aria-hidden="true" tabindex="-1"></a>mkdir -p docs/measurements/</span>
<span id="benchmark-4"><a href="#benchmark-4" aria-hidden="true" tabindex="-1"></a><span class="kw">cd</span> solver</span>
<span id="benchmark-5"><a href="#benchmark-5" aria-hidden="true" tabindex="-1"></a>cargo bench --color always</span>
<span id="benchmark-6"><a href="#benchmark-6" aria-hidden="true" tabindex="-1"></a>cp -r target/criterion ../docs/criterion</span></code></pre></div>
</div>
</div>
</div>
<div class="doctestResult">
<div class="programOutput">
<pre class="ansi2html-content">Linux 0856b763c1b1 5.11.0-1020-azure #21~20.04.1-Ubuntu SMP Mon Oct 11 18:54:28 UTC 2021 x86_64 GNU/Linux

<span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">                   .#################.          </span><span style="font-weight: bold"></span><span style="font-weight: bold; color: #585858">Name:</span>       <span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">Intel Xeon E5-2673 v</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">              .####                   ####.     </span><span style="font-weight: bold"></span><span style="font-weight: bold; color: #585858">Hypervisor:</span> <span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">Microsoft Hyper-V</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">          .##                             ###   </span><span style="font-weight: bold"></span><span style="font-weight: bold; color: #585858">uArch:</span>      <span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">Broadwell</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">       ##                          :##     ###  </span><span style="font-weight: bold"></span><span style="font-weight: bold; color: #585858">Technology:</span> <span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">14nm</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">    #                ##            :##      ##  </span><span style="font-weight: bold"></span><span style="font-weight: bold; color: #585858">Max Freq:</span>   <span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">Unknown</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">  ##   ##  ######.   ####  ######  :##      ##  </span><span style="font-weight: bold"></span><span style="font-weight: bold; color: #585858">Cores:</span>      <span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">2 cores</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7"> ##    ##  ##:  ##:  ##   ##   ### :##     ###  </span><span style="font-weight: bold"></span><span style="font-weight: bold; color: #585858">AVX:</span>        <span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">AVX,AVX2</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">##     ##  ##:  ##:  ##  :######## :##    ##    </span><span style="font-weight: bold"></span><span style="font-weight: bold; color: #585858">FMA:</span>        <span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">FMA3</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">##     ##  ##:  ##:  ##   ##.   .  :## ####     </span><span style="font-weight: bold"></span><span style="font-weight: bold; color: #585858">L1i Size:</span>   <span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">32KB (64KB Total)</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">##      #  ##:  ##:  ####  #####:   ##          </span><span style="font-weight: bold"></span><span style="font-weight: bold; color: #585858">L1d Size:</span>   <span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">32KB (64KB Total)</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7"> ##                                             </span><span style="font-weight: bold"></span><span style="font-weight: bold; color: #585858">L2 Size:</span>    <span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">256KB (512KB Total)</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">  ###.                         ..o####.         </span><span style="font-weight: bold"></span><span style="font-weight: bold; color: #585858">L3 Size:</span>    <span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">50MB</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">   ######oo...         ..oo#######              </span><span style="font-weight: bold"></span><span style="font-weight: bold; color: #585858">Peak Perf.:</span> <span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">Unknown</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #8700d7">          o###############o                     </span>

<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00"> Downloading</span> crates ...
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> criterion-plot v0.4.4
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> either v1.6.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> memoffset v0.6.4
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> half v1.8.2
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> criterion v0.3.5
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> oorandom v11.1.3
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> scopeguard v1.1.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> rustc_version v0.4.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> rayon-core v1.9.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> tinytemplate v1.2.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> walkdir v2.3.2
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> plotters-svg v0.3.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> serde_json v1.0.69
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> crossbeam-deque v0.8.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> crossbeam-utils v0.8.5
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> crossbeam-epoch v0.9.5
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> crossbeam-channel v0.5.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> cast v0.2.7
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> serde_cbor v0.11.2
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> plotters-backend v0.3.2
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> semver v1.0.4
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> rayon v1.5.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> same-file v1.0.6
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> num_cpus v1.13.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> itertools v0.10.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">  Downloaded</span> plotters v0.3.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> cfg-if v1.0.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> autocfg v1.0.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> libc v0.2.103
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> lazy_static v1.4.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> crossbeam-utils v0.8.5
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> serde v1.0.130
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> semver v1.0.4
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> regex-syntax v0.6.25
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> ryu v1.0.5
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> crossbeam-epoch v0.9.5
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> rayon-core v1.9.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> scopeguard v1.1.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> itoa v0.4.8
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> serde_json v1.0.69
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> either v1.6.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> tap v1.0.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> regex-automata v0.1.10
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> plotters-backend v0.3.2
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> unicode-width v0.1.9
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> serde_derive v1.0.130
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> funty v1.2.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> permutation v0.2.5
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> bitflags v1.3.2
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> same-file v1.0.6
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> half v1.8.2
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> oorandom v11.1.3
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> memoffset v0.6.4
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> num-traits v0.2.14
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> rayon v1.5.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> itertools v0.10.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> wyz v0.4.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> plotters-svg v0.3.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> textwrap v0.11.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> walkdir v2.3.2
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> memchr v2.4.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> log v0.4.14
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> radium v0.6.2
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> anyhow v1.0.44
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> clap v2.33.3
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> getrandom v0.2.3
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> num_cpus v1.13.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> atty v0.2.14
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> aho-corasick v0.7.18
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> csv-core v0.1.10
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> crossbeam-channel v0.5.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> rustc_version v0.4.0
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> bitvec v0.22.3
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> bstr v0.2.17
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> serde_cbor v0.11.2
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> rand_core v0.6.3
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> regex v1.5.4
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> plotters v0.3.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> cast v0.2.7
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> csv v1.1.6
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> tinytemplate v1.2.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> rand v0.8.4
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> env_logger v0.8.4
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> crossbeam-deque v0.8.1
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> quickcheck v1.0.3
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> solver v0.1.0 (/__w/ni-kop/ni-kop/2-heuristic-knapsack/solver)
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #aa5500">warning</span><span style="font-weight: bold">: unused imports: `ReadDir`, `iter::Filter`</span>
  <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">--&gt; </span>src/lib.rs:6:5
   <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">|</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">6</span>  <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">| </span>    iter::Filter,
   <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">| </span>    <span style="font-weight: bold"></span><span style="font-weight: bold; color: #aa5500">^^^^^^^^^^^^</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">...</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">10</span> <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">| </span>    fs::{read_dir, File, ReadDir, DirEntry},
   <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">| </span>                         <span style="font-weight: bold"></span><span style="font-weight: bold; color: #aa5500">^^^^^^^</span>
   <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">|</span>
   <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">= </span><span style="font-weight: bold">note</span>: `#[warn(unused_imports)]` on by default

<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> criterion-plot v0.4.4
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #aa5500">warning</span><span style="font-weight: bold">:</span> `solver` (lib) generated 1 warning
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">   Compiling</span> criterion v0.3.5
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #aa5500">warning</span><span style="font-weight: bold">: unused import: `anyhow`</span>
 <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">--&gt; </span>benches/bench.rs:6:22
  <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">|</span>
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">6</span> <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">| </span>use anyhow::{Result, anyhow};
  <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">| </span>                     <span style="font-weight: bold"></span><span style="font-weight: bold; color: #aa5500">^^^^^^</span>
  <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">|</span>
  <span style="font-weight: bold"></span><span style="font-weight: bold; color: #5c5cff">= </span><span style="font-weight: bold">note</span>: `#[warn(unused_imports)]` on by default

<span style="font-weight: bold"></span><span style="font-weight: bold; color: #aa5500">warning</span><span style="font-weight: bold">:</span> `solver` (lib test) generated 1 warning (1 duplicate)
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #aa5500">warning</span><span style="font-weight: bold">:</span> `solver` (bench "bench") generated 1 warning
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">    Finished</span> bench [optimized] target(s) in 2m 05s
<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">     Running</span> unittests (target/release/deps/solver-b19ddf4ee3f29767)

running 10 tests
test tests::bb_is_correct ... ignored
test tests::dpc_simple ... ignored
test tests::fptas_is_within_bounds ... ignored
test tests::proper ... ignored
test tests::qc_bb_is_really_correct ... ignored
test tests::qc_dp_matches_bb ... ignored
test tests::qc_dps_match ... ignored
test tests::qc_greedy_is_valid ... ignored
test tests::small_bb_is_correct ... ignored
test tests::stupid ... ignored

test result: ok. 0 passed; 0 failed; 10 ignored; 0 measured; 0 filtered out; finished in 0.00s

<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">     Running</span> unittests (target/release/deps/main-2cc1d45e6f0585e7)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

<span style="font-weight: bold"></span><span style="font-weight: bold; color: #00aa00">     Running</span> unittests (target/release/deps/bench-2649af515cbc405d)
WARNING: HTML report generation will become a non-default optional feature in Criterion.rs 0.4.0.
This feature is being moved to cargo-criterion (https://github.com/bheisler/cargo-criterion) and will be optional in a future version of Criterion.rs. To silence this warning, either switch to cargo-criterion or enable the 'html_reports' feature in your Cargo.toml.

Gnuplot not found, using plotters backend
Benchmarking NK-bb/4                    Benchmarking NK-bb/4: Warming up for 200.00 ms                                              Benchmarking NK-bb/4: Collecting 10 samples in estimated 5.0001 s (220k iterations)                                                                                   Benchmarking NK-bb/4: Analyzing                               <span style="color: #00aa00">NK-bb/4</span>                 time:   [<span style="font-weight: lighter">23.212 us</span> <span style="font-weight: bold">23.536 us</span> <span style="font-weight: lighter">23.910 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0, avg: 0, n: 22482510 vs real n: 4
Benchmarking NK-bb/10                     Benchmarking NK-bb/10: Warming up for 200.00 ms                                               Benchmarking NK-bb/10: Collecting 10 samples in estimated 5.0172 s (15k iterations)                                                                                   Benchmarking NK-bb/10: Analyzing                                <span style="color: #00aa00">NK-bb/10</span>                time:   [<span style="font-weight: lighter">320.50 us</span> <span style="font-weight: bold">324.74 us</span> <span style="font-weight: lighter">330.07 us</span>]
max: 0, avg: 0, n: 1529011 vs real n: 10
Benchmarking NK-bb/15                     Benchmarking NK-bb/15: Warming up for 200.00 ms                                               Benchmarking NK-bb/15: Collecting 10 samples in estimated 5.0824 s (935 iterations)                                                                                   Benchmarking NK-bb/15: Analyzing                                <span style="color: #00aa00">NK-bb/15</span>                time:   [<span style="font-weight: lighter">5.4118 ms</span> <span style="font-weight: bold">5.4523 ms</span> <span style="font-weight: lighter">5.4946 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) low mild
max: 0, avg: 0, n: 99800 vs real n: 15
Benchmarking NK-bb/20                     Benchmarking NK-bb/20: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 6.3s or enable flat sampling.
                                               Benchmarking NK-bb/20: Collecting 10 samples in estimated 6.2546 s (55 iterations)                                                                                  Benchmarking NK-bb/20: Analyzing                                <span style="color: #00aa00">NK-bb/20</span>                time:   [<span style="font-weight: lighter">110.94 ms</span> <span style="font-weight: bold">112.63 ms</span> <span style="font-weight: lighter">113.99 ms</span>]
max: 0, avg: 0, n: 5742 vs real n: 20
Benchmarking NK-bb/22                     Benchmarking NK-bb/22: Warming up for 200.00 ms                                               Benchmarking NK-bb/22: Collecting 10 samples in estimated 7.2055 s (20 iterations)                                                                                  Benchmarking NK-bb/22: Analyzing                                <span style="color: #00aa00">NK-bb/22</span>                time:   [<span style="font-weight: lighter">349.39 ms</span> <span style="font-weight: bold">353.02 ms</span> <span style="font-weight: lighter">356.62 ms</span>]
max: 0, avg: 0, n: 2100 vs real n: 22
Benchmarking NK-bb/25                     Benchmarking NK-bb/25: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 20.3s.
                                               Benchmarking NK-bb/25: Collecting 10 samples in estimated 20.294 s (10 iterations)                                                                                  Benchmarking NK-bb/25: Analyzing                                <span style="color: #00aa00">NK-bb/25</span>                time:   [<span style="font-weight: lighter">2.0436 s</span> <span style="font-weight: bold">2.0630 s</span> <span style="font-weight: lighter">2.0818 s</span>]
max: 0, avg: 0, n: 1089 vs real n: 25

Benchmarking NK-dpc/4                     Benchmarking NK-dpc/4: Warming up for 200.00 ms                                               Benchmarking NK-dpc/4: Collecting 10 samples in estimated 6.0900 s (110 iterations)                                                                                   Benchmarking NK-dpc/4: Analyzing                                <span style="color: #00aa00">NK-dpc/4</span>                time:   [<span style="font-weight: lighter">52.317 ms</span> <span style="font-weight: bold">52.946 ms</span> <span style="font-weight: lighter">53.532 ms</span>]
max: 0, avg: 0, n: 11115 vs real n: 4
Benchmarking NK-dpc/10                      Benchmarking NK-dpc/10: Warming up for 200.00 ms                                                Benchmarking NK-dpc/10: Collecting 10 samples in estimated 8.1232 s (20 iterations)                                                                                   Benchmarking NK-dpc/10: Analyzing                                 <span style="color: #00aa00">NK-dpc/10</span>               time:   [<span style="font-weight: lighter">398.89 ms</span> <span style="font-weight: bold">403.13 ms</span> <span style="font-weight: lighter">407.47 ms</span>]
max: 0, avg: 0, n: 2037 vs real n: 10
Benchmarking NK-dpc/15                      Benchmarking NK-dpc/15: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 10.2s.
                                                Benchmarking NK-dpc/15: Collecting 10 samples in estimated 10.174 s (10 iterations)                                                                                   Benchmarking NK-dpc/15: Analyzing                                 <span style="color: #00aa00">NK-dpc/15</span>               time:   [<span style="font-weight: lighter">992.05 ms</span> <span style="font-weight: bold">1.0056 s</span> <span style="font-weight: lighter">1.0189 s</span>]
max: 0, avg: 0, n: 1100 vs real n: 15
Benchmarking NK-dpc/20                      Benchmarking NK-dpc/20: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 18.4s.
                                                Benchmarking NK-dpc/20: Collecting 10 samples in estimated 18.450 s (10 iterations)                                                                                   Benchmarking NK-dpc/20: Analyzing                                 <span style="color: #00aa00">NK-dpc/20</span>               time:   [<span style="font-weight: lighter">1.8259 s</span> <span style="font-weight: bold">1.8520 s</span> <span style="font-weight: lighter">1.8800 s</span>]
max: 0, avg: 0, n: 1089 vs real n: 20

Benchmarking NK-dpw/4                     Benchmarking NK-dpw/4: Warming up for 200.00 ms                                               Benchmarking NK-dpw/4: Collecting 10 samples in estimated 5.0304 s (4730 iterations)                                                                                    Benchmarking NK-dpw/4: Analyzing                                <span style="color: #00aa00">NK-dpw/4</span>                time:   [<span style="font-weight: lighter">1.0876 ms</span> <span style="font-weight: bold">1.0974 ms</span> <span style="font-weight: lighter">1.1068 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0, avg: 0, n: 473575 vs real n: 4
Benchmarking NK-dpw/10                      Benchmarking NK-dpw/10: Warming up for 200.00 ms                                                Benchmarking NK-dpw/10: Collecting 10 samples in estimated 5.4033 s (605 iterations)                                                                                    Benchmarking NK-dpw/10: Analyzing                                 <span style="color: #00aa00">NK-dpw/10</span>               time:   [<span style="font-weight: lighter">8.6674 ms</span> <span style="font-weight: bold">8.8271 ms</span> <span style="font-weight: lighter">8.9305 ms</span>]
<span style="color: #aa5500">Found 2 outliers among 10 measurements (20.00%)</span>
  1 (10.00%) low severe
  1 (10.00%) high mild
max: 0, avg: 0, n: 61692 vs real n: 10
Benchmarking NK-dpw/15                      Benchmarking NK-dpw/15: Warming up for 200.00 ms                                                Benchmarking NK-dpw/15: Collecting 10 samples in estimated 5.8510 s (275 iterations)                                                                                    Benchmarking NK-dpw/15: Analyzing                                 <span style="color: #00aa00">NK-dpw/15</span>               time:   [<span style="font-weight: lighter">21.417 ms</span> <span style="font-weight: bold">21.677 ms</span> <span style="font-weight: lighter">21.902 ms</span>]
max: 0, avg: 0, n: 29000 vs real n: 15
Benchmarking NK-dpw/20                      Benchmarking NK-dpw/20: Warming up for 200.00 ms                                                Benchmarking NK-dpw/20: Collecting 10 samples in estimated 6.9435 s (165 iterations)                                                                                    Benchmarking NK-dpw/20: Analyzing                                 <span style="color: #00aa00">NK-dpw/20</span>               time:   [<span style="font-weight: lighter">41.649 ms</span> <span style="font-weight: bold">42.445 ms</span> <span style="font-weight: lighter">43.061 ms</span>]
max: 0, avg: 0, n: 17028 vs real n: 20
Benchmarking NK-dpw/22                      Benchmarking NK-dpw/22: Warming up for 200.00 ms                                                Benchmarking NK-dpw/22: Collecting 10 samples in estimated 5.2247 s (110 iterations)                                                                                    Benchmarking NK-dpw/22: Analyzing                                 <span style="color: #00aa00">NK-dpw/22</span>               time:   [<span style="font-weight: lighter">47.367 ms</span> <span style="font-weight: bold">48.226 ms</span> <span style="font-weight: lighter">48.895 ms</span>]
max: 0, avg: 0, n: 11700 vs real n: 22
Benchmarking NK-dpw/25                      Benchmarking NK-dpw/25: Warming up for 200.00 ms                                                Benchmarking NK-dpw/25: Collecting 10 samples in estimated 6.8790 s (110 iterations)                                                                                    Benchmarking NK-dpw/25: Analyzing                                 <span style="color: #00aa00">NK-dpw/25</span>               time:   [<span style="font-weight: lighter">61.911 ms</span> <span style="font-weight: bold">63.717 ms</span> <span style="font-weight: lighter">65.004 ms</span>]
max: 0, avg: 0, n: 11583 vs real n: 25
Benchmarking NK-dpw/27                      Benchmarking NK-dpw/27: Warming up for 200.00 ms                                                Benchmarking NK-dpw/27: Collecting 10 samples in estimated 7.1334 s (110 iterations)                                                                                    Benchmarking NK-dpw/27: Analyzing                                 <span style="color: #00aa00">NK-dpw/27</span>               time:   [<span style="font-weight: lighter">65.763 ms</span> <span style="font-weight: bold">67.142 ms</span> <span style="font-weight: lighter">68.009 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) low mild
max: 0, avg: 0, n: 11700 vs real n: 27
Benchmarking NK-dpw/30                      Benchmarking NK-dpw/30: Warming up for 200.00 ms                                                Benchmarking NK-dpw/30: Collecting 10 samples in estimated 9.3149 s (110 iterations)                                                                                    Benchmarking NK-dpw/30: Analyzing                                 <span style="color: #00aa00">NK-dpw/30</span>               time:   [<span style="font-weight: lighter">83.987 ms</span> <span style="font-weight: bold">85.073 ms</span> <span style="font-weight: lighter">86.183 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) low mild
max: 0, avg: 0, n: 11300 vs real n: 30
Benchmarking NK-dpw/32                      Benchmarking NK-dpw/32: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 5.5s or enable flat sampling.
                                                Benchmarking NK-dpw/32: Collecting 10 samples in estimated 5.5143 s (55 iterations)                                                                                   Benchmarking NK-dpw/32: Analyzing                                 <span style="color: #00aa00">NK-dpw/32</span>               time:   [<span style="font-weight: lighter">97.945 ms</span> <span style="font-weight: bold">98.948 ms</span> <span style="font-weight: lighter">100.30 ms</span>]
max: 0, avg: 0, n: 5800 vs real n: 32

Benchmarking NK-fptas1/4                        Benchmarking NK-fptas1/4: Warming up for 200.00 ms                                                  Benchmarking NK-fptas1/4: Collecting 10 samples in estimated 5.0246 s (5390 iterations)                                                                                       Benchmarking NK-fptas1/4: Analyzing                                   <span style="color: #00aa00">NK-fptas1/4</span>             time:   [<span style="font-weight: lighter">857.67 us</span> <span style="font-weight: bold">879.65 us</span> <span style="font-weight: lighter">905.36 us</span>]
max: 0.0062926061877294215, avg: 67.17865716296433, n: 536275 vs real n: 4
Benchmarking NK-fptas1/10                         Benchmarking NK-fptas1/10: Warming up for 200.00 ms                                                   Benchmarking NK-fptas1/10: Collecting 10 samples in estimated 5.8037 s (330 iterations)                                                                                       Benchmarking NK-fptas1/10: Analyzing                                    <span style="color: #00aa00">NK-fptas1/10</span>            time:   [<span style="font-weight: lighter">17.235 ms</span> <span style="font-weight: bold">17.494 ms</span> <span style="font-weight: lighter">17.858 ms</span>]
max: 0.0021335229798203903, avg: 1.5371517459831647, n: 33465 vs real n: 10
Benchmarking NK-fptas1/15                         Benchmarking NK-fptas1/15: Warming up for 200.00 ms                                                   Benchmarking NK-fptas1/15: Collecting 10 samples in estimated 6.6732 s (110 iterations)                                                                                       Benchmarking NK-fptas1/15: Analyzing                                    <span style="color: #00aa00">NK-fptas1/15</span>            time:   [<span style="font-weight: lighter">62.444 ms</span> <span style="font-weight: bold">64.101 ms</span> <span style="font-weight: lighter">65.409 ms</span>]
max: 0.0007549241644362326, avg: 0.19139784668592585, n: 11700 vs real n: 15
Benchmarking NK-fptas1/20                         Benchmarking NK-fptas1/20: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 8.0s or enable flat sampling.
                                                   Benchmarking NK-fptas1/20: Collecting 10 samples in estimated 8.0476 s (55 iterations)                                                                                      Benchmarking NK-fptas1/20: Analyzing                                    <span style="color: #00aa00">NK-fptas1/20</span>            time:   [<span style="font-weight: lighter">141.78 ms</span> <span style="font-weight: bold">144.00 ms</span> <span style="font-weight: lighter">145.73 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) low mild
max: 0.0008992805755395628, avg: 0.05467814999423304, n: 5742 vs real n: 20
Benchmarking NK-fptas1/22                         Benchmarking NK-fptas1/22: Warming up for 200.00 ms                                                   Benchmarking NK-fptas1/22: Collecting 10 samples in estimated 5.7637 s (30 iterations)                                                                                      Benchmarking NK-fptas1/22: Analyzing                                    <span style="color: #00aa00">NK-fptas1/22</span>            time:   [<span style="font-weight: lighter">188.86 ms</span> <span style="font-weight: bold">191.13 ms</span> <span style="font-weight: lighter">193.40 ms</span>]
max: 0.00723589001447178, avg: 0.3156646520839307, n: 3300 vs real n: 22
Benchmarking NK-fptas1/25                         Benchmarking NK-fptas1/25: Warming up for 200.00 ms                                                   Benchmarking NK-fptas1/25: Collecting 10 samples in estimated 5.6797 s (20 iterations)                                                                                      Benchmarking NK-fptas1/25: Analyzing                                    <span style="color: #00aa00">NK-fptas1/25</span>            time:   [<span style="font-weight: lighter">285.22 ms</span> <span style="font-weight: bold">289.59 ms</span> <span style="font-weight: lighter">293.20 ms</span>]
<span style="color: #aa5500">Found 2 outliers among 10 measurements (20.00%)</span>
  1 (10.00%) low severe
  1 (10.00%) low mild
max: 0.00026886538806236704, avg: 0.006602849382738696, n: 2079 vs real n: 25
Benchmarking NK-fptas1/27                         Benchmarking NK-fptas1/27: Warming up for 200.00 ms                                                   Benchmarking NK-fptas1/27: Collecting 10 samples in estimated 7.4778 s (20 iterations)                                                                                      Benchmarking NK-fptas1/27: Analyzing                                    <span style="color: #00aa00">NK-fptas1/27</span>            time:   [<span style="font-weight: lighter">351.07 ms</span> <span style="font-weight: bold">355.81 ms</span> <span style="font-weight: lighter">360.91 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.0005305807447424371, avg: 0.020437238888146192, n: 2100 vs real n: 27
Benchmarking NK-fptas1/30                         Benchmarking NK-fptas1/30: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 5.0s.
                                                   Benchmarking NK-fptas1/30: Collecting 10 samples in estimated 5.0130 s (10 iterations)                                                                                      Benchmarking NK-fptas1/30: Analyzing                                    <span style="color: #00aa00">NK-fptas1/30</span>            time:   [<span style="font-weight: lighter">491.77 ms</span> <span style="font-weight: bold">498.06 ms</span> <span style="font-weight: lighter">504.37 ms</span>]
max: 0.00010777023386143725, avg: 0.003108799072166213, n: 1100 vs real n: 30
Benchmarking NK-fptas1/32                         Benchmarking NK-fptas1/32: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 6.4s.
                                                   Benchmarking NK-fptas1/32: Collecting 10 samples in estimated 6.3653 s (10 iterations)                                                                                      Benchmarking NK-fptas1/32: Analyzing                                    <span style="color: #00aa00">NK-fptas1/32</span>            time:   [<span style="font-weight: lighter">623.34 ms</span> <span style="font-weight: bold">629.95 ms</span> <span style="font-weight: lighter">636.53 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.0002258355916892052, avg: 0.006954795782336709, n: 1100 vs real n: 32

Benchmarking NK-fptas2/4                        Benchmarking NK-fptas2/4: Warming up for 200.00 ms                                                  Benchmarking NK-fptas2/4: Collecting 10 samples in estimated 5.1050 s (495 iterations)                                                                                      Benchmarking NK-fptas2/4: Analyzing                                   <span style="color: #00aa00">NK-fptas2/4</span>             time:   [<span style="font-weight: lighter">10.342 ms</span> <span style="font-weight: bold">10.562 ms</span> <span style="font-weight: lighter">10.738 ms</span>]
max: 0, avg: 0, n: 49970 vs real n: 4
Benchmarking NK-fptas2/10                         Benchmarking NK-fptas2/10: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 9.9s or enable flat sampling.
                                                   Benchmarking NK-fptas2/10: Collecting 10 samples in estimated 9.9004 s (55 iterations)                                                                                      Benchmarking NK-fptas2/10: Analyzing                                    <span style="color: #00aa00">NK-fptas2/10</span>            time:   [<span style="font-weight: lighter">177.16 ms</span> <span style="font-weight: bold">181.24 ms</span> <span style="font-weight: lighter">185.79 ms</span>]
max: 0, avg: 0, n: 5626 vs real n: 10
Benchmarking NK-fptas2/15                         Benchmarking NK-fptas2/15: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 6.5s.
                                                   Benchmarking NK-fptas2/15: Collecting 10 samples in estimated 6.4571 s (10 iterations)                                                                                      Benchmarking NK-fptas2/15: Analyzing                                    <span style="color: #00aa00">NK-fptas2/15</span>            time:   [<span style="font-weight: lighter">641.25 ms</span> <span style="font-weight: bold">646.81 ms</span> <span style="font-weight: lighter">652.41 ms</span>]
max: 0, avg: 0, n: 1100 vs real n: 15
Benchmarking NK-fptas2/20                         Benchmarking NK-fptas2/20: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 15.4s.
                                                   Benchmarking NK-fptas2/20: Collecting 10 samples in estimated 15.441 s (10 iterations)                                                                                      Benchmarking NK-fptas2/20: Analyzing                                    <span style="color: #00aa00">NK-fptas2/20</span>            time:   [<span style="font-weight: lighter">1.5343 s</span> <span style="font-weight: bold">1.5492 s</span> <span style="font-weight: lighter">1.5664 s</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0, avg: 0, n: 1089 vs real n: 20
Benchmarking NK-fptas2/22                         Benchmarking NK-fptas2/22: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 21.7s.
                                                   Benchmarking NK-fptas2/22: Collecting 10 samples in estimated 21.713 s (10 iterations)                                                                                      Benchmarking NK-fptas2/22: Analyzing                                    <span style="color: #00aa00">NK-fptas2/22</span>            time:   [<span style="font-weight: lighter">2.1851 s</span> <span style="font-weight: bold">2.2283 s</span> <span style="font-weight: lighter">2.2739 s</span>]
max: 0, avg: 0, n: 1100 vs real n: 22

Benchmarking NK-greedy/4                        Benchmarking NK-greedy/4: Warming up for 200.00 ms                                                  Benchmarking NK-greedy/4: Collecting 10 samples in estimated 5.0000 s (351k iterations)                                                                                       Benchmarking NK-greedy/4: Analyzing                                   <span style="color: #00aa00">NK-greedy/4</span>             time:   [<span style="font-weight: lighter">13.872 us</span> <span style="font-weight: bold">14.107 us</span> <span style="font-weight: lighter">14.298 us</span>]
max: 1, avg: 9741510.174686935, n: 34907560 vs real n: 4
Benchmarking NK-greedy/10                         Benchmarking NK-greedy/10: Warming up for 200.00 ms                                                   Benchmarking NK-greedy/10: Collecting 10 samples in estimated 5.0010 s (171k iterations)                                                                                        Benchmarking NK-greedy/10: Analyzing                                    <span style="color: #00aa00">NK-greedy/10</span>            time:   [<span style="font-weight: lighter">30.039 us</span> <span style="font-weight: bold">30.431 us</span> <span style="font-weight: lighter">30.768 us</span>]
max: 1, avg: 6258794.9527464425, n: 17386377 vs real n: 10
Benchmarking NK-greedy/15                         Benchmarking NK-greedy/15: Warming up for 200.00 ms                                                   Benchmarking NK-greedy/15: Collecting 10 samples in estimated 5.0028 s (88k iterations)                                                                                       Benchmarking NK-greedy/15: Analyzing                                    <span style="color: #00aa00">NK-greedy/15</span>            time:   [<span style="font-weight: lighter">54.956 us</span> <span style="font-weight: bold">55.819 us</span> <span style="font-weight: lighter">56.676 us</span>]
max: 1, avg: 3837142.501305497, n: 9198500 vs real n: 15
Benchmarking NK-greedy/20                         Benchmarking NK-greedy/20: Warming up for 200.00 ms                                                   Benchmarking NK-greedy/20: Collecting 10 samples in estimated 5.0007 s (51k iterations)                                                                                       Benchmarking NK-greedy/20: Analyzing                                    <span style="color: #00aa00">NK-greedy/20</span>            time:   [<span style="font-weight: lighter">94.977 us</span> <span style="font-weight: bold">96.175 us</span> <span style="font-weight: lighter">97.006 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) low mild
max: 1, avg: 1991254.753929891, n: 5480145 vs real n: 20
Benchmarking NK-greedy/22                         Benchmarking NK-greedy/22: Warming up for 200.00 ms                                                   Benchmarking NK-greedy/22: Collecting 10 samples in estimated 5.0019 s (30k iterations)                                                                                       Benchmarking NK-greedy/22: Analyzing                                    <span style="color: #00aa00">NK-greedy/22</span>            time:   [<span style="font-weight: lighter">156.77 us</span> <span style="font-weight: bold">158.58 us</span> <span style="font-weight: lighter">160.04 us</span>]
max: 1, avg: 1273877.4754194121, n: 3224200 vs real n: 22
Benchmarking NK-greedy/25                         Benchmarking NK-greedy/25: Warming up for 200.00 ms                                                   Benchmarking NK-greedy/25: Collecting 10 samples in estimated 5.0063 s (27k iterations)                                                                                       Benchmarking NK-greedy/25: Analyzing                                    <span style="color: #00aa00">NK-greedy/25</span>            time:   [<span style="font-weight: lighter">183.24 us</span> <span style="font-weight: bold">185.65 us</span> <span style="font-weight: lighter">187.28 us</span>]
<span style="color: #aa5500">Found 3 outliers among 10 measurements (30.00%)</span>
  1 (10.00%) low mild
  2 (20.00%) high mild
max: 1, avg: 1132241.9623825348, n: 2865258 vs real n: 25
Benchmarking NK-greedy/27                         Benchmarking NK-greedy/27: Warming up for 200.00 ms                                                   Benchmarking NK-greedy/27: Collecting 10 samples in estimated 5.0024 s (25k iterations)                                                                                       Benchmarking NK-greedy/27: Analyzing                                    <span style="color: #00aa00">NK-greedy/27</span>            time:   [<span style="font-weight: lighter">196.74 us</span> <span style="font-weight: bold">197.57 us</span> <span style="font-weight: lighter">198.36 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) low mild
max: 1, avg: 1146039.0274901579, n: 2615800 vs real n: 27
Benchmarking NK-greedy/30                         Benchmarking NK-greedy/30: Warming up for 200.00 ms                                                   Benchmarking NK-greedy/30: Collecting 10 samples in estimated 5.0120 s (22k iterations)                                                                                       Benchmarking NK-greedy/30: Analyzing                                    <span style="color: #00aa00">NK-greedy/30</span>            time:   [<span style="font-weight: lighter">224.40 us</span> <span style="font-weight: bold">225.57 us</span> <span style="font-weight: lighter">226.71 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 1, avg: 1021349.3397620404, n: 2302300 vs real n: 30
Benchmarking NK-greedy/32                         Benchmarking NK-greedy/32: Warming up for 200.00 ms                                                   Benchmarking NK-greedy/32: Collecting 10 samples in estimated 5.0010 s (20k iterations)                                                                                       Benchmarking NK-greedy/32: Analyzing                                    <span style="color: #00aa00">NK-greedy/32</span>            time:   [<span style="font-weight: lighter">253.45 us</span> <span style="font-weight: bold">254.99 us</span> <span style="font-weight: lighter">257.43 us</span>]
max: 1, avg: 871181.6084914826, n: 2104300 vs real n: 32

Benchmarking NK-redux/4                       Benchmarking NK-redux/4: Warming up for 200.00 ms                                                 Benchmarking NK-redux/4: Collecting 10 samples in estimated 5.0006 s (312k iterations)                                                                                      Benchmarking NK-redux/4: Analyzing                                  <span style="color: #00aa00">NK-redux/4</span>              time:   [<span style="font-weight: lighter">15.561 us</span> <span style="font-weight: bold">15.761 us</span> <span style="font-weight: lighter">15.984 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high severe
max: 0.632380594208349, avg: 4279235.096642793, n: 31187360 vs real n: 4
Benchmarking NK-redux/10                        Benchmarking NK-redux/10: Warming up for 200.00 ms                                                  Benchmarking NK-redux/10: Collecting 10 samples in estimated 5.0001 s (140k iterations)                                                                                       Benchmarking NK-redux/10: Analyzing                                   <span style="color: #00aa00">NK-redux/10</span>             time:   [<span style="font-weight: lighter">34.017 us</span> <span style="font-weight: bold">34.721 us</span> <span style="font-weight: lighter">35.246 us</span>]
max: 0.6979075303846636, avg: 4470057.810996482, n: 14393442 vs real n: 10
Benchmarking NK-redux/15                        Benchmarking NK-redux/15: Warming up for 200.00 ms                                                  Benchmarking NK-redux/15: Collecting 10 samples in estimated 5.0013 s (82k iterations)                                                                                      Benchmarking NK-redux/15: Analyzing                                   <span style="color: #00aa00">NK-redux/15</span>             time:   [<span style="font-weight: lighter">61.525 us</span> <span style="font-weight: bold">62.582 us</span> <span style="font-weight: lighter">64.241 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.7552975861433573, avg: 2924550.7952121855, n: 8582500 vs real n: 15
Benchmarking NK-redux/20                        Benchmarking NK-redux/20: Warming up for 200.00 ms                                                  Benchmarking NK-redux/20: Collecting 10 samples in estimated 5.0026 s (45k iterations)                                                                                      Benchmarking NK-redux/20: Analyzing                                   <span style="color: #00aa00">NK-redux/20</span>             time:   [<span style="font-weight: lighter">107.58 us</span> <span style="font-weight: bold">108.88 us</span> <span style="font-weight: lighter">110.53 us</span>]
max: 0.818282066163668, avg: 1551549.655112027, n: 4629438 vs real n: 20
Benchmarking NK-redux/22                        Benchmarking NK-redux/22: Warming up for 200.00 ms                                                  Benchmarking NK-redux/22: Collecting 10 samples in estimated 5.0083 s (31k iterations)                                                                                      Benchmarking NK-redux/22: Analyzing                                   <span style="color: #00aa00">NK-redux/22</span>             time:   [<span style="font-weight: lighter">166.61 us</span> <span style="font-weight: bold">167.92 us</span> <span style="font-weight: lighter">169.94 us</span>]
max: 0.8222878547759689, avg: 1177641.6526886565, n: 3257200 vs real n: 22
Benchmarking NK-redux/25                        Benchmarking NK-redux/25: Warming up for 200.00 ms                                                  Benchmarking NK-redux/25: Collecting 10 samples in estimated 5.0086 s (26k iterations)                                                                                      Benchmarking NK-redux/25: Analyzing                                   <span style="color: #00aa00">NK-redux/25</span>             time:   [<span style="font-weight: lighter">193.71 us</span> <span style="font-weight: bold">195.27 us</span> <span style="font-weight: lighter">197.69 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.8075967065403138, avg: 1024484.6576894351, n: 2783583 vs real n: 25
Benchmarking NK-redux/27                        Benchmarking NK-redux/27: Warming up for 200.00 ms                                                  Benchmarking NK-redux/27: Collecting 10 samples in estimated 5.0017 s (24k iterations)                                                                                      Benchmarking NK-redux/27: Analyzing                                   <span style="color: #00aa00">NK-redux/27</span>             time:   [<span style="font-weight: lighter">205.33 us</span> <span style="font-weight: bold">207.18 us</span> <span style="font-weight: lighter">209.80 us</span>]
max: 0.84876173671939, avg: 1012622.7734559549, n: 2516800 vs real n: 27
Benchmarking NK-redux/30                        Benchmarking NK-redux/30: Warming up for 200.00 ms                                                  Benchmarking NK-redux/30: Collecting 10 samples in estimated 5.0033 s (21k iterations)                                                                                      Benchmarking NK-redux/30: Analyzing                                   <span style="color: #00aa00">NK-redux/30</span>             time:   [<span style="font-weight: lighter">232.71 us</span> <span style="font-weight: bold">235.10 us</span> <span style="font-weight: lighter">238.95 us</span>]
max: 0.8315145062549907, avg: 895052.4042248896, n: 2225300 vs real n: 30
Benchmarking NK-redux/32                        Benchmarking NK-redux/32: Warming up for 200.00 ms                                                  Benchmarking NK-redux/32: Collecting 10 samples in estimated 5.0120 s (19k iterations)                                                                                      Benchmarking NK-redux/32: Analyzing                                   <span style="color: #00aa00">NK-redux/32</span>             time:   [<span style="font-weight: lighter">268.00 us</span> <span style="font-weight: bold">269.07 us</span> <span style="font-weight: lighter">270.41 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.7824170634764472, avg: 813816.100562114, n: 2016300 vs real n: 32

Benchmarking ZKC-bb/4                     Benchmarking ZKC-bb/4: Warming up for 200.00 ms                                               Benchmarking ZKC-bb/4: Collecting 10 samples in estimated 5.0008 s (148k iterations)                                                                                    Benchmarking ZKC-bb/4: Analyzing                                <span style="color: #00aa00">ZKC-bb/4</span>                time:   [<span style="font-weight: lighter">32.836 us</span> <span style="font-weight: bold">33.262 us</span> <span style="font-weight: lighter">33.825 us</span>]
max: 0, avg: 0, n: 15619600 vs real n: 4
Benchmarking ZKC-bb/10                      Benchmarking ZKC-bb/10: Warming up for 200.00 ms                                                Benchmarking ZKC-bb/10: Collecting 10 samples in estimated 5.0059 s (5170 iterations)                                                                                     Benchmarking ZKC-bb/10: Analyzing                                 <span style="color: #00aa00">ZKC-bb/10</span>               time:   [<span style="font-weight: lighter">940.06 us</span> <span style="font-weight: bold">953.76 us</span> <span style="font-weight: lighter">974.51 us</span>]
max: 0, avg: 0, n: 542500 vs real n: 10
Benchmarking ZKC-bb/15                      Benchmarking ZKC-bb/15: Warming up for 200.00 ms                                                Benchmarking ZKC-bb/15: Collecting 10 samples in estimated 5.4911 s (275 iterations)                                                                                    Benchmarking ZKC-bb/15: Analyzing                                 <span style="color: #00aa00">ZKC-bb/15</span>               time:   [<span style="font-weight: lighter">18.973 ms</span> <span style="font-weight: bold">19.289 ms</span> <span style="font-weight: lighter">19.684 ms</span>]
max: 0, avg: 0, n: 29000 vs real n: 15
Benchmarking ZKC-bb/20                      Benchmarking ZKC-bb/20: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 5.4s.
                                                Benchmarking ZKC-bb/20: Collecting 10 samples in estimated 5.4126 s (10 iterations)                                                                                   Benchmarking ZKC-bb/20: Analyzing                                 <span style="color: #00aa00">ZKC-bb/20</span>               time:   [<span style="font-weight: lighter">507.64 ms</span> <span style="font-weight: bold">511.27 ms</span> <span style="font-weight: lighter">515.48 ms</span>]
max: 0, avg: 0, n: 1100 vs real n: 20
Benchmarking ZKC-bb/22                      Benchmarking ZKC-bb/22: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 17.8s.
                                                Benchmarking ZKC-bb/22: Collecting 10 samples in estimated 17.825 s (10 iterations)                                                                                   Benchmarking ZKC-bb/22: Analyzing                                 <span style="color: #00aa00">ZKC-bb/22</span>               time:   [<span style="font-weight: lighter">1.7506 s</span> <span style="font-weight: bold">1.7681 s</span> <span style="font-weight: lighter">1.7862 s</span>]
max: 0, avg: 0, n: 1100 vs real n: 22
Benchmarking ZKC-bb/25                      Benchmarking ZKC-bb/25: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 120.8s.
                                                Benchmarking ZKC-bb/25: Collecting 10 samples in estimated 120.82 s (10 iterations)                                                                                   Benchmarking ZKC-bb/25: Analyzing                                 <span style="color: #00aa00">ZKC-bb/25</span>               time:   [<span style="font-weight: lighter">12.010 s</span> <span style="font-weight: bold">12.079 s</span> <span style="font-weight: lighter">12.148 s</span>]
max: 0, avg: 0, n: 1100 vs real n: 25

Benchmarking ZKC-dpc/4                      Benchmarking ZKC-dpc/4: Warming up for 200.00 ms                                                Benchmarking ZKC-dpc/4: Collecting 10 samples in estimated 6.2550 s (110 iterations)                                                                                    Benchmarking ZKC-dpc/4: Analyzing                                 <span style="color: #00aa00">ZKC-dpc/4</span>               time:   [<span style="font-weight: lighter">55.973 ms</span> <span style="font-weight: bold">56.390 ms</span> <span style="font-weight: lighter">56.790 ms</span>]
max: 0, avg: 0, n: 11700 vs real n: 4
Benchmarking ZKC-dpc/10                       Benchmarking ZKC-dpc/10: Warming up for 200.00 ms                                                 Benchmarking ZKC-dpc/10: Collecting 10 samples in estimated 8.5054 s (20 iterations)                                                                                    Benchmarking ZKC-dpc/10: Analyzing                                  <span style="color: #00aa00">ZKC-dpc/10</span>              time:   [<span style="font-weight: lighter">426.19 ms</span> <span style="font-weight: bold">428.28 ms</span> <span style="font-weight: lighter">430.49 ms</span>]
max: 0, avg: 0, n: 2100 vs real n: 10
Benchmarking ZKC-dpc/15                       Benchmarking ZKC-dpc/15: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 10.2s.
                                                 Benchmarking ZKC-dpc/15: Collecting 10 samples in estimated 10.225 s (10 iterations)                                                                                    Benchmarking ZKC-dpc/15: Analyzing                                  <span style="color: #00aa00">ZKC-dpc/15</span>              time:   [<span style="font-weight: lighter">1.0143 s</span> <span style="font-weight: bold">1.0216 s</span> <span style="font-weight: lighter">1.0296 s</span>]
max: 0, avg: 0, n: 1100 vs real n: 15
Benchmarking ZKC-dpc/20                       Benchmarking ZKC-dpc/20: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 19.1s.
                                                 Benchmarking ZKC-dpc/20: Collecting 10 samples in estimated 19.130 s (10 iterations)                                                                                    Benchmarking ZKC-dpc/20: Analyzing                                  <span style="color: #00aa00">ZKC-dpc/20</span>              time:   [<span style="font-weight: lighter">1.7975 s</span> <span style="font-weight: bold">1.8350 s</span> <span style="font-weight: lighter">1.8734 s</span>]
max: 0, avg: 0, n: 1100 vs real n: 20

Benchmarking ZKC-dpw/4                      Benchmarking ZKC-dpw/4: Warming up for 200.00 ms                                                Benchmarking ZKC-dpw/4: Collecting 10 samples in estimated 5.0660 s (3795 iterations)                                                                                     Benchmarking ZKC-dpw/4: Analyzing                                 <span style="color: #00aa00">ZKC-dpw/4</span>               time:   [<span style="font-weight: lighter">1.2781 ms</span> <span style="font-weight: bold">1.2938 ms</span> <span style="font-weight: lighter">1.3190 ms</span>]
max: 0, avg: 0, n: 405000 vs real n: 4
Benchmarking ZKC-dpw/10                       Benchmarking ZKC-dpw/10: Warming up for 200.00 ms                                                 Benchmarking ZKC-dpw/10: Collecting 10 samples in estimated 5.0395 s (440 iterations)                                                                                     Benchmarking ZKC-dpw/10: Analyzing                                  <span style="color: #00aa00">ZKC-dpw/10</span>              time:   [<span style="font-weight: lighter">10.627 ms</span> <span style="font-weight: bold">10.779 ms</span> <span style="font-weight: lighter">11.013 ms</span>]
max: 0, avg: 0, n: 47100 vs real n: 10
Benchmarking ZKC-dpw/15                       Benchmarking ZKC-dpw/15: Warming up for 200.00 ms                                                 Benchmarking ZKC-dpw/15: Collecting 10 samples in estimated 6.3363 s (220 iterations)                                                                                     Benchmarking ZKC-dpw/15: Analyzing                                  <span style="color: #00aa00">ZKC-dpw/15</span>              time:   [<span style="font-weight: lighter">26.308 ms</span> <span style="font-weight: bold">26.611 ms</span> <span style="font-weight: lighter">26.883 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0, avg: 0, n: 22700 vs real n: 15
Benchmarking ZKC-dpw/20                       Benchmarking ZKC-dpw/20: Warming up for 200.00 ms                                                 Benchmarking ZKC-dpw/20: Collecting 10 samples in estimated 5.5183 s (110 iterations)                                                                                     Benchmarking ZKC-dpw/20: Analyzing                                  <span style="color: #00aa00">ZKC-dpw/20</span>              time:   [<span style="font-weight: lighter">49.874 ms</span> <span style="font-weight: bold">50.509 ms</span> <span style="font-weight: lighter">51.052 ms</span>]
max: 0, avg: 0, n: 11700 vs real n: 20
Benchmarking ZKC-dpw/22                       Benchmarking ZKC-dpw/22: Warming up for 200.00 ms                                                 Benchmarking ZKC-dpw/22: Collecting 10 samples in estimated 6.7713 s (110 iterations)                                                                                     Benchmarking ZKC-dpw/22: Analyzing                                  <span style="color: #00aa00">ZKC-dpw/22</span>              time:   [<span style="font-weight: lighter">59.343 ms</span> <span style="font-weight: bold">60.017 ms</span> <span style="font-weight: lighter">60.822 ms</span>]
<span style="color: #aa5500">Found 3 outliers among 10 measurements (30.00%)</span>
  1 (10.00%) low mild
  2 (20.00%) high severe
max: 0, avg: 0, n: 11700 vs real n: 22
Benchmarking ZKC-dpw/25                       Benchmarking ZKC-dpw/25: Warming up for 200.00 ms                                                 Benchmarking ZKC-dpw/25: Collecting 10 samples in estimated 8.4633 s (110 iterations)                                                                                     Benchmarking ZKC-dpw/25: Analyzing                                  <span style="color: #00aa00">ZKC-dpw/25</span>              time:   [<span style="font-weight: lighter">77.690 ms</span> <span style="font-weight: bold">79.134 ms</span> <span style="font-weight: lighter">80.160 ms</span>]
max: 0, avg: 0, n: 11300 vs real n: 25
Benchmarking ZKC-dpw/27                       Benchmarking ZKC-dpw/27: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 5.3s or enable flat sampling.
                                                 Benchmarking ZKC-dpw/27: Collecting 10 samples in estimated 5.2741 s (55 iterations)                                                                                    Benchmarking ZKC-dpw/27: Analyzing                                  <span style="color: #00aa00">ZKC-dpw/27</span>              time:   [<span style="font-weight: lighter">93.538 ms</span> <span style="font-weight: bold">95.467 ms</span> <span style="font-weight: lighter">96.477 ms</span>]
max: 0, avg: 0, n: 5800 vs real n: 27
Benchmarking ZKC-dpw/30                       Benchmarking ZKC-dpw/30: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 6.1s or enable flat sampling.
                                                 Benchmarking ZKC-dpw/30: Collecting 10 samples in estimated 6.1301 s (55 iterations)                                                                                    Benchmarking ZKC-dpw/30: Analyzing                                  <span style="color: #00aa00">ZKC-dpw/30</span>              time:   [<span style="font-weight: lighter">114.20 ms</span> <span style="font-weight: bold">116.10 ms</span> <span style="font-weight: lighter">117.34 ms</span>]
max: 0, avg: 0, n: 5800 vs real n: 30
Benchmarking ZKC-dpw/32                       Benchmarking ZKC-dpw/32: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 7.3s or enable flat sampling.
                                                 Benchmarking ZKC-dpw/32: Collecting 10 samples in estimated 7.2584 s (55 iterations)                                                                                    Benchmarking ZKC-dpw/32: Analyzing                                  <span style="color: #00aa00">ZKC-dpw/32</span>              time:   [<span style="font-weight: lighter">129.64 ms</span> <span style="font-weight: bold">131.49 ms</span> <span style="font-weight: lighter">133.94 ms</span>]
max: 0, avg: 0, n: 5800 vs real n: 32

Benchmarking ZKC-fptas1/4                         Benchmarking ZKC-fptas1/4: Warming up for 200.00 ms                                                   Benchmarking ZKC-fptas1/4: Collecting 10 samples in estimated 5.0281 s (5940 iterations)                                                                                        Benchmarking ZKC-fptas1/4: Analyzing                                    <span style="color: #00aa00">ZKC-fptas1/4</span>            time:   [<span style="font-weight: lighter">814.20 us</span> <span style="font-weight: bold">820.95 us</span> <span style="font-weight: lighter">830.48 us</span>]
<span style="color: #aa5500">Found 2 outliers among 10 measurements (20.00%)</span>
  1 (10.00%) low mild
  1 (10.00%) high mild
max: 0.012972674579078136, avg: 274.5252547645942, n: 619500 vs real n: 4
Benchmarking ZKC-fptas1/10                          Benchmarking ZKC-fptas1/10: Warming up for 200.00 ms                                                    Benchmarking ZKC-fptas1/10: Collecting 10 samples in estimated 5.4422 s (330 iterations)                                                                                        Benchmarking ZKC-fptas1/10: Analyzing                                     <span style="color: #00aa00">ZKC-fptas1/10</span>           time:   [<span style="font-weight: lighter">16.472 ms</span> <span style="font-weight: bold">16.818 ms</span> <span style="font-weight: lighter">17.224 ms</span>]
max: 0.002949852507374673, avg: 10.717757459944403, n: 34500 vs real n: 10
Benchmarking ZKC-fptas1/15                          Benchmarking ZKC-fptas1/15: Warming up for 200.00 ms                                                    Benchmarking ZKC-fptas1/15: Collecting 10 samples in estimated 6.2505 s (110 iterations)                                                                                        Benchmarking ZKC-fptas1/15: Analyzing                                     <span style="color: #00aa00">ZKC-fptas1/15</span>           time:   [<span style="font-weight: lighter">55.686 ms</span> <span style="font-weight: bold">56.283 ms</span> <span style="font-weight: lighter">57.034 ms</span>]
max: 0.001826787345345804, avg: 2.459101708682626, n: 11700 vs real n: 15
Benchmarking ZKC-fptas1/20                          Benchmarking ZKC-fptas1/20: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 7.1s or enable flat sampling.
                                                    Benchmarking ZKC-fptas1/20: Collecting 10 samples in estimated 7.0687 s (55 iterations)                                                                                       Benchmarking ZKC-fptas1/20: Analyzing                                     <span style="color: #00aa00">ZKC-fptas1/20</span>           time:   [<span style="font-weight: lighter">135.13 ms</span> <span style="font-weight: bold">137.48 ms</span> <span style="font-weight: lighter">141.22 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.0012147154095326629, avg: 0.9560831405888954, n: 5800 vs real n: 20
Benchmarking ZKC-fptas1/22                          Benchmarking ZKC-fptas1/22: Warming up for 200.00 ms                                                    Benchmarking ZKC-fptas1/22: Collecting 10 samples in estimated 6.0642 s (30 iterations)                                                                                       Benchmarking ZKC-fptas1/22: Analyzing                                     <span style="color: #00aa00">ZKC-fptas1/22</span>           time:   [<span style="font-weight: lighter">179.67 ms</span> <span style="font-weight: bold">183.83 ms</span> <span style="font-weight: lighter">189.14 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.0008623313381352915, avg: 0.4257572273684924, n: 3300 vs real n: 22
Benchmarking ZKC-fptas1/25                          Benchmarking ZKC-fptas1/25: Warming up for 200.00 ms                                                    Benchmarking ZKC-fptas1/25: Collecting 10 samples in estimated 5.4993 s (20 iterations)                                                                                       Benchmarking ZKC-fptas1/25: Analyzing                                     <span style="color: #00aa00">ZKC-fptas1/25</span>           time:   [<span style="font-weight: lighter">261.17 ms</span> <span style="font-weight: bold">265.11 ms</span> <span style="font-weight: lighter">269.34 ms</span>]
max: 0.0008499959524002065, avg: 0.27774009928360033, n: 2100 vs real n: 25
Benchmarking ZKC-fptas1/27                          Benchmarking ZKC-fptas1/27: Warming up for 200.00 ms                                                    Benchmarking ZKC-fptas1/27: Collecting 10 samples in estimated 7.2679 s (20 iterations)                                                                                       Benchmarking ZKC-fptas1/27: Analyzing                                     <span style="color: #00aa00">ZKC-fptas1/27</span>           time:   [<span style="font-weight: lighter">345.49 ms</span> <span style="font-weight: bold">353.06 ms</span> <span style="font-weight: lighter">361.07 ms</span>]
max: 0.0007322536181944006, avg: 0.20646605307246124, n: 2100 vs real n: 27
Benchmarking ZKC-fptas1/30                          Benchmarking ZKC-fptas1/30: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 5.2s.
                                                    Benchmarking ZKC-fptas1/30: Collecting 10 samples in estimated 5.2170 s (10 iterations)                                                                                       Benchmarking ZKC-fptas1/30: Analyzing                                     <span style="color: #00aa00">ZKC-fptas1/30</span>           time:   [<span style="font-weight: lighter">500.28 ms</span> <span style="font-weight: bold">504.57 ms</span> <span style="font-weight: lighter">509.16 ms</span>]
max: 0.0005700848001140013, avg: 0.09748723098799827, n: 1100 vs real n: 30
Benchmarking ZKC-fptas1/32                          Benchmarking ZKC-fptas1/32: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 6.1s.
                                                    Benchmarking ZKC-fptas1/32: Collecting 10 samples in estimated 6.1470 s (10 iterations)                                                                                       Benchmarking ZKC-fptas1/32: Analyzing                                     <span style="color: #00aa00">ZKC-fptas1/32</span>           time:   [<span style="font-weight: lighter">614.14 ms</span> <span style="font-weight: bold">621.20 ms</span> <span style="font-weight: lighter">628.85 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.00042180744490138977, avg: 0.09952558821677249, n: 1100 vs real n: 32

Benchmarking ZKC-fptas2/4                         Benchmarking ZKC-fptas2/4: Warming up for 200.00 ms                                                   Benchmarking ZKC-fptas2/4: Collecting 10 samples in estimated 5.3429 s (550 iterations)                                                                                       Benchmarking ZKC-fptas2/4: Analyzing                                    <span style="color: #00aa00">ZKC-fptas2/4</span>            time:   [<span style="font-weight: lighter">9.8346 ms</span> <span style="font-weight: bold">9.9381 ms</span> <span style="font-weight: lighter">10.090 ms</span>]
max: 0, avg: 0, n: 58100 vs real n: 4
Benchmarking ZKC-fptas2/10                          Benchmarking ZKC-fptas2/10: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 9.7s or enable flat sampling.
                                                    Benchmarking ZKC-fptas2/10: Collecting 10 samples in estimated 9.6957 s (55 iterations)                                                                                       Benchmarking ZKC-fptas2/10: Analyzing                                     <span style="color: #00aa00">ZKC-fptas2/10</span>           time:   [<span style="font-weight: lighter">169.84 ms</span> <span style="font-weight: bold">175.57 ms</span> <span style="font-weight: lighter">179.42 ms</span>]
max: 0.0001020199959191892, avg: 0.010955380750108823, n: 5800 vs real n: 10
Benchmarking ZKC-fptas2/15                          Benchmarking ZKC-fptas2/15: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 6.0s.
                                                    Benchmarking ZKC-fptas2/15: Collecting 10 samples in estimated 6.0146 s (10 iterations)                                                                                       Benchmarking ZKC-fptas2/15: Analyzing                                     <span style="color: #00aa00">ZKC-fptas2/15</span>           time:   [<span style="font-weight: lighter">588.07 ms</span> <span style="font-weight: bold">599.08 ms</span> <span style="font-weight: lighter">609.65 ms</span>]
max: 0.00010558547143912911, avg: 0.002013889038899541, n: 1100 vs real n: 15
Benchmarking ZKC-fptas2/20                          Benchmarking ZKC-fptas2/20: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 14.3s.
                                                    Benchmarking ZKC-fptas2/20: Collecting 10 samples in estimated 14.252 s (10 iterations)                                                                                       Benchmarking ZKC-fptas2/20: Analyzing                                     <span style="color: #00aa00">ZKC-fptas2/20</span>           time:   [<span style="font-weight: lighter">1.4365 s</span> <span style="font-weight: bold">1.4482 s</span> <span style="font-weight: lighter">1.4598 s</span>]
max: 0.00005674402769106912, avg: 0.0006241843046017603, n: 1100 vs real n: 20
Benchmarking ZKC-fptas2/22                          Benchmarking ZKC-fptas2/22: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 21.0s.
                                                    Benchmarking ZKC-fptas2/22: Collecting 10 samples in estimated 20.956 s (10 iterations)                                                                                       Benchmarking ZKC-fptas2/22: Analyzing                                     <span style="color: #00aa00">ZKC-fptas2/22</span>           time:   [<span style="font-weight: lighter">1.8964 s</span> <span style="font-weight: bold">1.9159 s</span> <span style="font-weight: lighter">1.9369 s</span>]
max: 0.00005016051364370444, avg: 0.0010647774959903211, n: 1100 vs real n: 22

Benchmarking ZKC-greedy/4                         Benchmarking ZKC-greedy/4: Warming up for 200.00 ms                                                   Benchmarking ZKC-greedy/4: Collecting 10 samples in estimated 5.0001 s (354k iterations)                                                                                        Benchmarking ZKC-greedy/4: Analyzing                                    <span style="color: #00aa00">ZKC-greedy/4</span>            time:   [<span style="font-weight: lighter">13.982 us</span> <span style="font-weight: bold">14.337 us</span> <span style="font-weight: lighter">14.634 us</span>]
<span style="color: #aa5500">Found 2 outliers among 10 measurements (20.00%)</span>
  2 (20.00%) low mild
max: 1, avg: 7593654.721854465, n: 37019800 vs real n: 4
Benchmarking ZKC-greedy/10                          Benchmarking ZKC-greedy/10: Warming up for 200.00 ms                                                    Benchmarking ZKC-greedy/10: Collecting 10 samples in estimated 5.0016 s (154k iterations)                                                                                         Benchmarking ZKC-greedy/10: Analyzing                                     <span style="color: #00aa00">ZKC-greedy/10</span>           time:   [<span style="font-weight: lighter">29.631 us</span> <span style="font-weight: bold">30.011 us</span> <span style="font-weight: lighter">30.389 us</span>]
max: 0.29261083743842364, avg: 1831911.4002697263, n: 16208100 vs real n: 10
Benchmarking ZKC-greedy/15                          Benchmarking ZKC-greedy/15: Warming up for 200.00 ms                                                    Benchmarking ZKC-greedy/15: Collecting 10 samples in estimated 5.0005 s (94k iterations)                                                                                        Benchmarking ZKC-greedy/15: Analyzing                                     <span style="color: #00aa00">ZKC-greedy/15</span>           time:   [<span style="font-weight: lighter">54.142 us</span> <span style="font-weight: bold">55.207 us</span> <span style="font-weight: lighter">56.103 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.22490286437155504, avg: 934619.0871142166, n: 9770500 vs real n: 15
Benchmarking ZKC-greedy/20                          Benchmarking ZKC-greedy/20: Warming up for 200.00 ms                                                    Benchmarking ZKC-greedy/20: Collecting 10 samples in estimated 5.0034 s (58k iterations)                                                                                        Benchmarking ZKC-greedy/20: Analyzing                                     <span style="color: #00aa00">ZKC-greedy/20</span>           time:   [<span style="font-weight: lighter">90.212 us</span> <span style="font-weight: bold">91.272 us</span> <span style="font-weight: lighter">92.021 us</span>]
max: 0.19137358991373588, avg: 535927.5174560411, n: 6201000 vs real n: 20
Benchmarking ZKC-greedy/22                          Benchmarking ZKC-greedy/22: Warming up for 200.00 ms                                                    Benchmarking ZKC-greedy/22: Collecting 10 samples in estimated 5.0009 s (32k iterations)                                                                                        Benchmarking ZKC-greedy/22: Analyzing                                     <span style="color: #00aa00">ZKC-greedy/22</span>           time:   [<span style="font-weight: lighter">148.71 us</span> <span style="font-weight: bold">153.19 us</span> <span style="font-weight: lighter">157.05 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.19295631964722004, avg: 262685.5608732804, n: 3361700 vs real n: 22
Benchmarking ZKC-greedy/25                          Benchmarking ZKC-greedy/25: Warming up for 200.00 ms                                                    Benchmarking ZKC-greedy/25: Collecting 10 samples in estimated 5.0066 s (29k iterations)                                                                                        Benchmarking ZKC-greedy/25: Analyzing                                     <span style="color: #00aa00">ZKC-greedy/25</span>           time:   [<span style="font-weight: lighter">168.73 us</span> <span style="font-weight: bold">169.93 us</span> <span style="font-weight: lighter">171.49 us</span>]
max: 0.15016782604465628, avg: 234168.3597327737, n: 3070200 vs real n: 25
Benchmarking ZKC-greedy/27                          Benchmarking ZKC-greedy/27: Warming up for 200.00 ms                                                    Benchmarking ZKC-greedy/27: Collecting 10 samples in estimated 5.0024 s (28k iterations)                                                                                        Benchmarking ZKC-greedy/27: Analyzing                                     <span style="color: #00aa00">ZKC-greedy/27</span>           time:   [<span style="font-weight: lighter">185.90 us</span> <span style="font-weight: bold">188.47 us</span> <span style="font-weight: lighter">190.36 us</span>]
max: 0.1516638735934881, avg: 226640.6198097235, n: 2982200 vs real n: 27
Benchmarking ZKC-greedy/30                          Benchmarking ZKC-greedy/30: Warming up for 200.00 ms                                                    Benchmarking ZKC-greedy/30: Collecting 10 samples in estimated 5.0103 s (21k iterations)                                                                                        Benchmarking ZKC-greedy/30: Analyzing                                     <span style="color: #00aa00">ZKC-greedy/30</span>           time:   [<span style="font-weight: lighter">208.22 us</span> <span style="font-weight: bold">212.98 us</span> <span style="font-weight: lighter">218.45 us</span>]
max: 0.1256681575215447, avg: 157640.14259781735, n: 2230800 vs real n: 30
Benchmarking ZKC-greedy/32                          Benchmarking ZKC-greedy/32: Warming up for 200.00 ms                                                    Benchmarking ZKC-greedy/32: Collecting 10 samples in estimated 5.0006 s (19k iterations)                                                                                        Benchmarking ZKC-greedy/32: Analyzing                                     <span style="color: #00aa00">ZKC-greedy/32</span>           time:   [<span style="font-weight: lighter">248.07 us</span> <span style="font-weight: bold">252.41 us</span> <span style="font-weight: lighter">257.82 us</span>]
max: 0.13963963963963966, avg: 138288.55334260568, n: 1994300 vs real n: 32

Benchmarking ZKC-redux/4                        Benchmarking ZKC-redux/4: Warming up for 200.00 ms                                                  Benchmarking ZKC-redux/4: Collecting 10 samples in estimated 5.0004 s (310k iterations)                                                                                       Benchmarking ZKC-redux/4: Analyzing                                   <span style="color: #00aa00">ZKC-redux/4</span>             time:   [<span style="font-weight: lighter">15.276 us</span> <span style="font-weight: bold">15.495 us</span> <span style="font-weight: lighter">15.881 us</span>]
max: 0.570281124497992, avg: 5848922.492780695, n: 32685800 vs real n: 4
Benchmarking ZKC-redux/10                         Benchmarking ZKC-redux/10: Warming up for 200.00 ms                                                   Benchmarking ZKC-redux/10: Collecting 10 samples in estimated 5.0014 s (142k iterations)                                                                                        Benchmarking ZKC-redux/10: Analyzing                                    <span style="color: #00aa00">ZKC-redux/10</span>            time:   [<span style="font-weight: lighter">33.272 us</span> <span style="font-weight: bold">34.195 us</span> <span style="font-weight: lighter">35.450 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.29261083743842364, avg: 1694530.195379461, n: 14992600 vs real n: 10
Benchmarking ZKC-redux/15                         Benchmarking ZKC-redux/15: Warming up for 200.00 ms                                                   Benchmarking ZKC-redux/15: Collecting 10 samples in estimated 5.0032 s (85k iterations)                                                                                       Benchmarking ZKC-redux/15: Analyzing                                    <span style="color: #00aa00">ZKC-redux/15</span>            time:   [<span style="font-weight: lighter">59.903 us</span> <span style="font-weight: bold">60.989 us</span> <span style="font-weight: lighter">61.766 us</span>]
max: 0.22490286437155504, avg: 850966.8286127232, n: 8896000 vs real n: 15
Benchmarking ZKC-redux/20                         Benchmarking ZKC-redux/20: Warming up for 200.00 ms                                                   Benchmarking ZKC-redux/20: Collecting 10 samples in estimated 5.0035 s (48k iterations)                                                                                       Benchmarking ZKC-redux/20: Analyzing                                    <span style="color: #00aa00">ZKC-redux/20</span>            time:   [<span style="font-weight: lighter">99.993 us</span> <span style="font-weight: bold">101.90 us</span> <span style="font-weight: lighter">104.36 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.19137358991373588, avg: 428863.0103393194, n: 4962200 vs real n: 20
Benchmarking ZKC-redux/22                         Benchmarking ZKC-redux/22: Warming up for 200.00 ms                                                   Benchmarking ZKC-redux/22: Collecting 10 samples in estimated 5.0067 s (32k iterations)                                                                                       Benchmarking ZKC-redux/22: Analyzing                                    <span style="color: #00aa00">ZKC-redux/22</span>            time:   [<span style="font-weight: lighter">154.55 us</span> <span style="font-weight: bold">156.57 us</span> <span style="font-weight: lighter">157.79 us</span>]
max: 0.19295631964722004, avg: 268702.3940789028, n: 3438700 vs real n: 22
Benchmarking ZKC-redux/25                         Benchmarking ZKC-redux/25: Warming up for 200.00 ms                                                   Benchmarking ZKC-redux/25: Collecting 10 samples in estimated 5.0014 s (27k iterations)                                                                                       Benchmarking ZKC-redux/25: Analyzing                                    <span style="color: #00aa00">ZKC-redux/25</span>            time:   [<span style="font-weight: lighter">184.67 us</span> <span style="font-weight: bold">199.11 us</span> <span style="font-weight: lighter">209.36 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.15016782604465628, avg: 222422.5687748651, n: 2916200 vs real n: 25
Benchmarking ZKC-redux/27                         Benchmarking ZKC-redux/27: Warming up for 200.00 ms                                                   Benchmarking ZKC-redux/27: Collecting 10 samples in estimated 5.0018 s (25k iterations)                                                                                       Benchmarking ZKC-redux/27: Analyzing                                    <span style="color: #00aa00">ZKC-redux/27</span>            time:   [<span style="font-weight: lighter">200.26 us</span> <span style="font-weight: bold">206.58 us</span> <span style="font-weight: lighter">215.19 us</span>]
max: 0.1516638735934881, avg: 200884.96758868036, n: 2643300 vs real n: 27
Benchmarking ZKC-redux/30                         Benchmarking ZKC-redux/30: Warming up for 200.00 ms                                                   Benchmarking ZKC-redux/30: Collecting 10 samples in estimated 5.0004 s (22k iterations)                                                                                       Benchmarking ZKC-redux/30: Analyzing                                    <span style="color: #00aa00">ZKC-redux/30</span>            time:   [<span style="font-weight: lighter">226.97 us</span> <span style="font-weight: bold">231.58 us</span> <span style="font-weight: lighter">235.67 us</span>]
max: 0.1256681575215447, avg: 162304.05214223592, n: 2296800 vs real n: 30
Benchmarking ZKC-redux/32                         Benchmarking ZKC-redux/32: Warming up for 200.00 ms                                                   Benchmarking ZKC-redux/32: Collecting 10 samples in estimated 5.0107 s (20k iterations)                                                                                       Benchmarking ZKC-redux/32: Analyzing                                    <span style="color: #00aa00">ZKC-redux/32</span>            time:   [<span style="font-weight: lighter">261.61 us</span> <span style="font-weight: bold">265.79 us</span> <span style="font-weight: lighter">269.38 us</span>]
<span style="color: #aa5500">Found 2 outliers among 10 measurements (20.00%)</span>
  1 (10.00%) low mild
  1 (10.00%) high mild
max: 0.13963963963963966, avg: 145153.4015504231, n: 2093300 vs real n: 32

Benchmarking ZKW-bb/4                     Benchmarking ZKW-bb/4: Warming up for 200.00 ms                                               Benchmarking ZKW-bb/4: Collecting 10 samples in estimated 5.0010 s (211k iterations)                                                                                    Benchmarking ZKW-bb/4: Analyzing                                <span style="color: #00aa00">ZKW-bb/4</span>                time:   [<span style="font-weight: lighter">22.739 us</span> <span style="font-weight: bold">23.128 us</span> <span style="font-weight: lighter">23.611 us</span>]
max: 0, avg: 0, n: 22780300 vs real n: 4
Benchmarking ZKW-bb/10                      Benchmarking ZKW-bb/10: Warming up for 200.00 ms                                                Benchmarking ZKW-bb/10: Collecting 10 samples in estimated 5.0043 s (28k iterations)                                                                                    Benchmarking ZKW-bb/10: Analyzing                                 <span style="color: #00aa00">ZKW-bb/10</span>               time:   [<span style="font-weight: lighter">166.90 us</span> <span style="font-weight: bold">171.76 us</span> <span style="font-weight: lighter">177.22 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0, avg: 0, n: 3037200 vs real n: 10
Benchmarking ZKW-bb/15                      Benchmarking ZKW-bb/15: Warming up for 200.00 ms                                                Benchmarking ZKW-bb/15: Collecting 10 samples in estimated 5.0406 s (5445 iterations)                                                                                     Benchmarking ZKW-bb/15: Analyzing                                 <span style="color: #00aa00">ZKW-bb/15</span>               time:   [<span style="font-weight: lighter">828.27 us</span> <span style="font-weight: bold">840.06 us</span> <span style="font-weight: lighter">857.32 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0, avg: 0, n: 570000 vs real n: 15
Benchmarking ZKW-bb/20                      Benchmarking ZKW-bb/20: Warming up for 200.00 ms                                                Benchmarking ZKW-bb/20: Collecting 10 samples in estimated 5.0162 s (7315 iterations)                                                                                     Benchmarking ZKW-bb/20: Analyzing                                 <span style="color: #00aa00">ZKW-bb/20</span>               time:   [<span style="font-weight: lighter">629.34 us</span> <span style="font-weight: bold">643.41 us</span> <span style="font-weight: lighter">658.47 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high severe
max: 0, avg: 0, n: 602602 vs real n: 20
Benchmarking ZKW-bb/22                      Benchmarking ZKW-bb/22: Warming up for 200.00 ms                                                Benchmarking ZKW-bb/22: Collecting 10 samples in estimated 5.0538 s (2915 iterations)                                                                                     Benchmarking ZKW-bb/22: Analyzing                                 <span style="color: #00aa00">ZKW-bb/22</span>               time:   [<span style="font-weight: lighter">1.8101 ms</span> <span style="font-weight: bold">1.8363 ms</span> <span style="font-weight: lighter">1.8643 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) low mild
max: 0, avg: 0, n: 240318 vs real n: 22

Benchmarking ZKW-dpc/4                      Benchmarking ZKW-dpc/4: Warming up for 200.00 ms                                                Benchmarking ZKW-dpc/4: Collecting 10 samples in estimated 5.3583 s (20 iterations)                                                                                   Benchmarking ZKW-dpc/4: Analyzing                                 <span style="color: #00aa00">ZKW-dpc/4</span>               time:   [<span style="font-weight: lighter">242.41 ms</span> <span style="font-weight: bold">246.56 ms</span> <span style="font-weight: lighter">250.91 ms</span>]
<span style="color: #aa5500">Found 3 outliers among 10 measurements (30.00%)</span>
  2 (20.00%) low mild
  1 (10.00%) high mild
max: 0, avg: 0, n: 2100 vs real n: 4
Benchmarking ZKW-dpc/10                       Benchmarking ZKW-dpc/10: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 17.9s.
                                                 Benchmarking ZKW-dpc/10: Collecting 10 samples in estimated 17.854 s (10 iterations)                                                                                    Benchmarking ZKW-dpc/10: Analyzing                                  <span style="color: #00aa00">ZKW-dpc/10</span>              time:   [<span style="font-weight: lighter">1.7568 s</span> <span style="font-weight: bold">1.7695 s</span> <span style="font-weight: lighter">1.7842 s</span>]
max: 0, avg: 0, n: 1100 vs real n: 10
Benchmarking ZKW-dpc/15                       Benchmarking ZKW-dpc/15: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 22.8s.
                                                 Benchmarking ZKW-dpc/15: Collecting 10 samples in estimated 22.751 s (10 iterations)                                                                                    Benchmarking ZKW-dpc/15: Analyzing                                  <span style="color: #00aa00">ZKW-dpc/15</span>              time:   [<span style="font-weight: lighter">2.1943 s</span> <span style="font-weight: bold">2.2151 s</span> <span style="font-weight: lighter">2.2347 s</span>]
max: 0, avg: 0, n: 1100 vs real n: 15
Benchmarking ZKW-dpc/20                       Benchmarking ZKW-dpc/20: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 31.4s.
                                                 Benchmarking ZKW-dpc/20: Collecting 10 samples in estimated 31.441 s (10 iterations)                                                                                    Benchmarking ZKW-dpc/20: Analyzing                                  <span style="color: #00aa00">ZKW-dpc/20</span>              time:   [<span style="font-weight: lighter">2.8600 s</span> <span style="font-weight: bold">2.9485 s</span> <span style="font-weight: lighter">3.0575 s</span>]
<span style="color: #aa5500">Found 2 outliers among 10 measurements (20.00%)</span>
  2 (20.00%) high mild
max: 0, avg: 0, n: 847 vs real n: 20

Benchmarking ZKW-dpw/4                      Benchmarking ZKW-dpw/4: Warming up for 200.00 ms                                                Benchmarking ZKW-dpw/4: Collecting 10 samples in estimated 5.0100 s (7645 iterations)                                                                                     Benchmarking ZKW-dpw/4: Analyzing                                 <span style="color: #00aa00">ZKW-dpw/4</span>               time:   [<span style="font-weight: lighter">614.81 us</span> <span style="font-weight: bold">624.80 us</span> <span style="font-weight: lighter">635.29 us</span>]
<span style="color: #aa5500">Found 3 outliers among 10 measurements (30.00%)</span>
  2 (20.00%) low severe
  1 (10.00%) high severe
max: 0, avg: 0, n: 815600 vs real n: 4
Benchmarking ZKW-dpw/10                       Benchmarking ZKW-dpw/10: Warming up for 200.00 ms                                                 Benchmarking ZKW-dpw/10: Collecting 10 samples in estimated 5.0051 s (2365 iterations)                                                                                      Benchmarking ZKW-dpw/10: Analyzing                                  <span style="color: #00aa00">ZKW-dpw/10</span>              time:   [<span style="font-weight: lighter">1.9449 ms</span> <span style="font-weight: bold">2.0077 ms</span> <span style="font-weight: lighter">2.0750 ms</span>]
max: 0, avg: 0, n: 249200 vs real n: 10
Benchmarking ZKW-dpw/15                       Benchmarking ZKW-dpw/15: Warming up for 200.00 ms                                                 Benchmarking ZKW-dpw/15: Collecting 10 samples in estimated 5.1451 s (1870 iterations)                                                                                      Benchmarking ZKW-dpw/15: Analyzing                                  <span style="color: #00aa00">ZKW-dpw/15</span>              time:   [<span style="font-weight: lighter">2.5005 ms</span> <span style="font-weight: bold">2.5751 ms</span> <span style="font-weight: lighter">2.6305 ms</span>]
max: 0, avg: 0, n: 199700 vs real n: 15
Benchmarking ZKW-dpw/20                       Benchmarking ZKW-dpw/20: Warming up for 200.00 ms                                                 Benchmarking ZKW-dpw/20: Collecting 10 samples in estimated 5.0152 s (3740 iterations)                                                                                      Benchmarking ZKW-dpw/20: Analyzing                                  <span style="color: #00aa00">ZKW-dpw/20</span>              time:   [<span style="font-weight: lighter">1.3041 ms</span> <span style="font-weight: bold">1.3447 ms</span> <span style="font-weight: lighter">1.4153 ms</span>]
max: 0, avg: 0, n: 307615 vs real n: 20
Benchmarking ZKW-dpw/22                       Benchmarking ZKW-dpw/22: Warming up for 200.00 ms                                                 Benchmarking ZKW-dpw/22: Collecting 10 samples in estimated 5.0184 s (2915 iterations)                                                                                      Benchmarking ZKW-dpw/22: Analyzing                                  <span style="color: #00aa00">ZKW-dpw/22</span>              time:   [<span style="font-weight: lighter">1.6411 ms</span> <span style="font-weight: bold">1.6694 ms</span> <span style="font-weight: lighter">1.6996 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) low mild
max: 0, avg: 0, n: 240318 vs real n: 22
Benchmarking ZKW-dpw/25                       Benchmarking ZKW-dpw/25: Warming up for 200.00 ms                                                 Benchmarking ZKW-dpw/25: Collecting 10 samples in estimated 5.0753 s (3410 iterations)                                                                                      Benchmarking ZKW-dpw/25: Analyzing                                  <span style="color: #00aa00">ZKW-dpw/25</span>              time:   [<span style="font-weight: lighter">1.4719 ms</span> <span style="font-weight: bold">1.4991 ms</span> <span style="font-weight: lighter">1.5300 ms</span>]
max: 0, avg: 0, n: 212570 vs real n: 25
Benchmarking ZKW-dpw/27                       Benchmarking ZKW-dpw/27: Warming up for 200.00 ms                                                 Benchmarking ZKW-dpw/27: Collecting 10 samples in estimated 5.0070 s (6930 iterations)                                                                                      Benchmarking ZKW-dpw/27: Analyzing                                  <span style="color: #00aa00">ZKW-dpw/27</span>              time:   [<span style="font-weight: lighter">732.14 us</span> <span style="font-weight: bold">744.48 us</span> <span style="font-weight: lighter">756.74 us</span>]
max: 0, avg: 0, n: 349727 vs real n: 27
Benchmarking ZKW-dpw/30                       Benchmarking ZKW-dpw/30: Warming up for 200.00 ms                                                 Benchmarking ZKW-dpw/30: Collecting 10 samples in estimated 5.0041 s (6270 iterations)                                                                                      Benchmarking ZKW-dpw/30: Analyzing                                  <span style="color: #00aa00">ZKW-dpw/30</span>              time:   [<span style="font-weight: lighter">781.77 us</span> <span style="font-weight: bold">791.59 us</span> <span style="font-weight: lighter">801.21 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) low mild
max: 0, avg: 0, n: 267525 vs real n: 30
Benchmarking ZKW-dpw/32                       Benchmarking ZKW-dpw/32: Warming up for 200.00 ms                                                 Benchmarking ZKW-dpw/32: Collecting 10 samples in estimated 5.0386 s (5885 iterations)                                                                                      Benchmarking ZKW-dpw/32: Analyzing                                  <span style="color: #00aa00">ZKW-dpw/32</span>              time:   [<span style="font-weight: lighter">836.50 us</span> <span style="font-weight: bold">839.96 us</span> <span style="font-weight: lighter">842.42 us</span>]
max: 0, avg: 0, n: 227180 vs real n: 32

Benchmarking ZKW-fptas1/4                         Benchmarking ZKW-fptas1/4: Warming up for 200.00 ms                                                   Benchmarking ZKW-fptas1/4: Collecting 10 samples in estimated 5.0247 s (6105 iterations)                                                                                        Benchmarking ZKW-fptas1/4: Analyzing                                    <span style="color: #00aa00">ZKW-fptas1/4</span>            time:   [<span style="font-weight: lighter">848.98 us</span> <span style="font-weight: bold">862.81 us</span> <span style="font-weight: lighter">876.00 us</span>]
<span style="color: #aa5500">Found 2 outliers among 10 measurements (20.00%)</span>
  1 (10.00%) low mild
  1 (10.00%) high mild
max: 0.025186033199771085, avg: 349.3783869393864, n: 636000 vs real n: 4
Benchmarking ZKW-fptas1/10                          Benchmarking ZKW-fptas1/10: Warming up for 200.00 ms                                                    Benchmarking ZKW-fptas1/10: Collecting 10 samples in estimated 5.3332 s (330 iterations)                                                                                        Benchmarking ZKW-fptas1/10: Analyzing                                     <span style="color: #00aa00">ZKW-fptas1/10</span>           time:   [<span style="font-weight: lighter">16.016 ms</span> <span style="font-weight: bold">16.766 ms</span> <span style="font-weight: lighter">17.273 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.016219947083860542, avg: 8.749858497229571, n: 34500 vs real n: 10
Benchmarking ZKW-fptas1/15                          Benchmarking ZKW-fptas1/15: Warming up for 200.00 ms                                                    Benchmarking ZKW-fptas1/15: Collecting 10 samples in estimated 6.5178 s (110 iterations)                                                                                        Benchmarking ZKW-fptas1/15: Analyzing                                     <span style="color: #00aa00">ZKW-fptas1/15</span>           time:   [<span style="font-weight: lighter">56.086 ms</span> <span style="font-weight: bold">56.892 ms</span> <span style="font-weight: lighter">57.444 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.009777376654632963, avg: 2.3399538295648865, n: 11700 vs real n: 15
Benchmarking ZKW-fptas1/20                          Benchmarking ZKW-fptas1/20: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 5.5s or enable flat sampling.
                                                    Benchmarking ZKW-fptas1/20: Collecting 10 samples in estimated 5.4546 s (55 iterations)                                                                                       Benchmarking ZKW-fptas1/20: Analyzing                                     <span style="color: #00aa00">ZKW-fptas1/20</span>           time:   [<span style="font-weight: lighter">100.39 ms</span> <span style="font-weight: bold">101.90 ms</span> <span style="font-weight: lighter">104.36 ms</span>]
max: 0.009248177565009286, avg: 0.5363942987705386, n: 4466 vs real n: 20
Benchmarking ZKW-fptas1/22                          Benchmarking ZKW-fptas1/22: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 7.7s or enable flat sampling.
                                                    Benchmarking ZKW-fptas1/22: Collecting 10 samples in estimated 7.7060 s (55 iterations)                                                                                       Benchmarking ZKW-fptas1/22: Analyzing                                     <span style="color: #00aa00">ZKW-fptas1/22</span>           time:   [<span style="font-weight: lighter">139.06 ms</span> <span style="font-weight: bold">140.54 ms</span> <span style="font-weight: lighter">141.65 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) low mild
max: 0.0032718619869125387, avg: 0.2103609297340927, n: 4582 vs real n: 22
Benchmarking ZKW-fptas1/25                          Benchmarking ZKW-fptas1/25: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 8.2s or enable flat sampling.
                                                    Benchmarking ZKW-fptas1/25: Collecting 10 samples in estimated 8.1923 s (55 iterations)                                                                                       Benchmarking ZKW-fptas1/25: Analyzing                                     <span style="color: #00aa00">ZKW-fptas1/25</span>           time:   [<span style="font-weight: lighter">153.25 ms</span> <span style="font-weight: bold">155.48 ms</span> <span style="font-weight: lighter">159.44 ms</span>]
max: 0.0000862738331464108, avg: 0.005003882322491826, n: 3364 vs real n: 25
Benchmarking ZKW-fptas1/27                          Benchmarking ZKW-fptas1/27: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 8.8s or enable flat sampling.
                                                    Benchmarking ZKW-fptas1/27: Collecting 10 samples in estimated 8.7990 s (55 iterations)                                                                                       Benchmarking ZKW-fptas1/27: Analyzing                                     <span style="color: #00aa00">ZKW-fptas1/27</span>           time:   [<span style="font-weight: lighter">154.96 ms</span> <span style="font-weight: bold">158.27 ms</span> <span style="font-weight: lighter">160.88 ms</span>]
max: 0, avg: 0, n: 2726 vs real n: 27
Benchmarking ZKW-fptas1/30                          Benchmarking ZKW-fptas1/30: Warming up for 200.00 ms                                                    Benchmarking ZKW-fptas1/30: Collecting 10 samples in estimated 5.5798 s (30 iterations)                                                                                       Benchmarking ZKW-fptas1/30: Analyzing                                     <span style="color: #00aa00">ZKW-fptas1/30</span>           time:   [<span style="font-weight: lighter">190.90 ms</span> <span style="font-weight: bold">195.52 ms</span> <span style="font-weight: lighter">200.77 ms</span>]
max: 0, avg: 0, n: 1353 vs real n: 30
Benchmarking ZKW-fptas1/32                          Benchmarking ZKW-fptas1/32: Warming up for 200.00 ms                                                    Benchmarking ZKW-fptas1/32: Collecting 10 samples in estimated 6.5300 s (30 iterations)                                                                                       Benchmarking ZKW-fptas1/32: Analyzing                                     <span style="color: #00aa00">ZKW-fptas1/32</span>           time:   [<span style="font-weight: lighter">209.91 ms</span> <span style="font-weight: bold">212.47 ms</span> <span style="font-weight: lighter">214.98 ms</span>]
max: 0, avg: 0, n: 1147 vs real n: 32

Benchmarking ZKW-fptas2/4                         Benchmarking ZKW-fptas2/4: Warming up for 200.00 ms                                                   Benchmarking ZKW-fptas2/4: Collecting 10 samples in estimated 5.0481 s (495 iterations)                                                                                       Benchmarking ZKW-fptas2/4: Analyzing                                    <span style="color: #00aa00">ZKW-fptas2/4</span>            time:   [<span style="font-weight: lighter">9.5798 ms</span> <span style="font-weight: bold">9.7837 ms</span> <span style="font-weight: lighter">10.005 ms</span>]
<span style="color: #aa5500">Found 3 outliers among 10 measurements (30.00%)</span>
  2 (20.00%) low mild
  1 (10.00%) high severe
max: 0, avg: 0, n: 52600 vs real n: 4
Benchmarking ZKW-fptas2/10                          Benchmarking ZKW-fptas2/10: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 9.4s or enable flat sampling.
                                                    Benchmarking ZKW-fptas2/10: Collecting 10 samples in estimated 9.3691 s (55 iterations)                                                                                       Benchmarking ZKW-fptas2/10: Analyzing                                     <span style="color: #00aa00">ZKW-fptas2/10</span>           time:   [<span style="font-weight: lighter">168.97 ms</span> <span style="font-weight: bold">172.45 ms</span> <span style="font-weight: lighter">176.36 ms</span>]
max: 0, avg: 0, n: 5800 vs real n: 10
Benchmarking ZKW-fptas2/15                          Benchmarking ZKW-fptas2/15: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 5.8s.
                                                    Benchmarking ZKW-fptas2/15: Collecting 10 samples in estimated 5.8401 s (10 iterations)                                                                                       Benchmarking ZKW-fptas2/15: Analyzing                                     <span style="color: #00aa00">ZKW-fptas2/15</span>           time:   [<span style="font-weight: lighter">574.38 ms</span> <span style="font-weight: bold">581.20 ms</span> <span style="font-weight: lighter">589.82 ms</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0, avg: 0, n: 1100 vs real n: 15
Benchmarking ZKW-fptas2/20                          Benchmarking ZKW-fptas2/20: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 10.8s.
                                                    Benchmarking ZKW-fptas2/20: Collecting 10 samples in estimated 10.757 s (10 iterations)                                                                                       Benchmarking ZKW-fptas2/20: Analyzing                                     <span style="color: #00aa00">ZKW-fptas2/20</span>           time:   [<span style="font-weight: lighter">1.0745 s</span> <span style="font-weight: bold">1.0889 s</span> <span style="font-weight: lighter">1.1029 s</span>]
max: 0, avg: 0, n: 847 vs real n: 20
Benchmarking ZKW-fptas2/22                          Benchmarking ZKW-fptas2/22: Warming up for 200.00 ms
Warning: Unable to complete 10 samples in 5.0s. You may wish to increase target time to 15.5s.
                                                    Benchmarking ZKW-fptas2/22: Collecting 10 samples in estimated 15.514 s (10 iterations)                                                                                       Benchmarking ZKW-fptas2/22: Analyzing                                     <span style="color: #00aa00">ZKW-fptas2/22</span>           time:   [<span style="font-weight: lighter">1.4482 s</span> <span style="font-weight: bold">1.4735 s</span> <span style="font-weight: lighter">1.5086 s</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high severe
max: 0.0003550505947097493, avg: 0.0039055565418072424, n: 869 vs real n: 22

Benchmarking ZKW-greedy/4                         Benchmarking ZKW-greedy/4: Warming up for 200.00 ms                                                   Benchmarking ZKW-greedy/4: Collecting 10 samples in estimated 5.0004 s (411k iterations)                                                                                        Benchmarking ZKW-greedy/4: Analyzing                                    <span style="color: #00aa00">ZKW-greedy/4</span>            time:   [<span style="font-weight: lighter">12.165 us</span> <span style="font-weight: bold">12.266 us</span> <span style="font-weight: lighter">12.435 us</span>]
<span style="color: #aa5500">Found 2 outliers among 10 measurements (20.00%)</span>
  2 (20.00%) high severe
max: 1, avg: 21564317.324498933, n: 44334200 vs real n: 4
Benchmarking ZKW-greedy/10                          Benchmarking ZKW-greedy/10: Warming up for 200.00 ms                                                    Benchmarking ZKW-greedy/10: Collecting 10 samples in estimated 5.0002 s (224k iterations)                                                                                         Benchmarking ZKW-greedy/10: Analyzing                                     <span style="color: #00aa00">ZKW-greedy/10</span>           time:   [<span style="font-weight: lighter">21.838 us</span> <span style="font-weight: bold">22.050 us</span> <span style="font-weight: lighter">22.236 us</span>]
max: 1, avg: 14513444.662499608, n: 24050800 vs real n: 10
Benchmarking ZKW-greedy/15                          Benchmarking ZKW-greedy/15: Warming up for 200.00 ms                                                    Benchmarking ZKW-greedy/15: Collecting 10 samples in estimated 5.0001 s (130k iterations)                                                                                         Benchmarking ZKW-greedy/15: Analyzing                                     <span style="color: #00aa00">ZKW-greedy/15</span>           time:   [<span style="font-weight: lighter">37.567 us</span> <span style="font-weight: bold">38.156 us</span> <span style="font-weight: lighter">38.990 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 1, avg: 9757969.691682104, n: 13821100 vs real n: 15
Benchmarking ZKW-greedy/20                          Benchmarking ZKW-greedy/20: Warming up for 200.00 ms                                                    Benchmarking ZKW-greedy/20: Collecting 10 samples in estimated 5.0010 s (113k iterations)                                                                                         Benchmarking ZKW-greedy/20: Analyzing                                     <span style="color: #00aa00">ZKW-greedy/20</span>           time:   [<span style="font-weight: lighter">43.948 us</span> <span style="font-weight: bold">44.493 us</span> <span style="font-weight: lighter">44.900 us</span>]
max: 1, avg: 7409347.644555215, n: 9342102 vs real n: 20
Benchmarking ZKW-greedy/22                          Benchmarking ZKW-greedy/22: Warming up for 200.00 ms                                                    Benchmarking ZKW-greedy/22: Collecting 10 samples in estimated 5.0046 s (58k iterations)                                                                                        Benchmarking ZKW-greedy/22: Analyzing                                     <span style="color: #00aa00">ZKW-greedy/22</span>           time:   [<span style="font-weight: lighter">84.192 us</span> <span style="font-weight: bold">85.066 us</span> <span style="font-weight: lighter">85.971 us</span>]
max: 1, avg: 4134035.2278776453, n: 4898790 vs real n: 22
Benchmarking ZKW-greedy/25                          Benchmarking ZKW-greedy/25: Warming up for 200.00 ms                                                    Benchmarking ZKW-greedy/25: Collecting 10 samples in estimated 5.0032 s (74k iterations)                                                                                        Benchmarking ZKW-greedy/25: Analyzing                                     <span style="color: #00aa00">ZKW-greedy/25</span>           time:   [<span style="font-weight: lighter">70.385 us</span> <span style="font-weight: bold">72.406 us</span> <span style="font-weight: lighter">74.911 us</span>]
<span style="color: #aa5500">Found 3 outliers among 10 measurements (30.00%)</span>
  1 (10.00%) low mild
  2 (20.00%) high mild
max: 1, avg: 3747599.458983507, n: 4531250 vs real n: 25
Benchmarking ZKW-greedy/27                          Benchmarking ZKW-greedy/27: Warming up for 200.00 ms                                                    Benchmarking ZKW-greedy/27: Collecting 10 samples in estimated 5.0009 s (81k iterations)                                                                                        Benchmarking ZKW-greedy/27: Analyzing                                     <span style="color: #00aa00">ZKW-greedy/27</span>           time:   [<span style="font-weight: lighter">58.937 us</span> <span style="font-weight: bold">59.683 us</span> <span style="font-weight: lighter">60.286 us</span>]
<span style="color: #aa5500">Found 2 outliers among 10 measurements (20.00%)</span>
  1 (10.00%) low mild
  1 (10.00%) high mild
max: 1, avg: 3620633.238837483, n: 4005340 vs real n: 27
Benchmarking ZKW-greedy/30                          Benchmarking ZKW-greedy/30: Warming up for 200.00 ms                                                    Benchmarking ZKW-greedy/30: Collecting 10 samples in estimated 5.0030 s (90k iterations)                                                                                        Benchmarking ZKW-greedy/30: Analyzing                                     <span style="color: #00aa00">ZKW-greedy/30</span>           time:   [<span style="font-weight: lighter">53.365 us</span> <span style="font-weight: bold">54.207 us</span> <span style="font-weight: lighter">55.702 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 1, avg: 3227666.2746119876, n: 3857075 vs real n: 30
Benchmarking ZKW-greedy/32                          Benchmarking ZKW-greedy/32: Warming up for 200.00 ms                                                    Benchmarking ZKW-greedy/32: Collecting 10 samples in estimated 5.0006 s (84k iterations)                                                                                        Benchmarking ZKW-greedy/32: Analyzing                                     <span style="color: #00aa00">ZKW-greedy/32</span>           time:   [<span style="font-weight: lighter">56.715 us</span> <span style="font-weight: bold">57.848 us</span> <span style="font-weight: lighter">59.211 us</span>]
max: 1, avg: 2667214.6720278054, n: 3269135 vs real n: 32

Benchmarking ZKW-redux/4                        Benchmarking ZKW-redux/4: Warming up for 200.00 ms                                                  Benchmarking ZKW-redux/4: Collecting 10 samples in estimated 5.0001 s (367k iterations)                                                                                       Benchmarking ZKW-redux/4: Analyzing                                   <span style="color: #00aa00">ZKW-redux/4</span>             time:   [<span style="font-weight: lighter">13.086 us</span> <span style="font-weight: bold">13.364 us</span> <span style="font-weight: lighter">13.650 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.10394049055086452, avg: 55120.317004878656, n: 38378300 vs real n: 4
Benchmarking ZKW-redux/10                         Benchmarking ZKW-redux/10: Warming up for 200.00 ms                                                   Benchmarking ZKW-redux/10: Collecting 10 samples in estimated 5.0005 s (188k iterations)                                                                                        Benchmarking ZKW-redux/10: Analyzing                                    <span style="color: #00aa00">ZKW-redux/10</span>            time:   [<span style="font-weight: lighter">24.251 us</span> <span style="font-weight: bold">24.638 us</span> <span style="font-weight: lighter">24.990 us</span>]
max: 0.15689381933438984, avg: 211780.3352439801, n: 19651100 vs real n: 10
Benchmarking ZKW-redux/15                         Benchmarking ZKW-redux/15: Warming up for 200.00 ms                                                   Benchmarking ZKW-redux/15: Collecting 10 samples in estimated 5.0012 s (108k iterations)                                                                                        Benchmarking ZKW-redux/15: Analyzing                                    <span style="color: #00aa00">ZKW-redux/15</span>            time:   [<span style="font-weight: lighter">42.636 us</span> <span style="font-weight: bold">43.167 us</span> <span style="font-weight: lighter">43.443 us</span>]
max: 0.21978897073462078, avg: 194007.07953017388, n: 11599100 vs real n: 15
Benchmarking ZKW-redux/20                         Benchmarking ZKW-redux/20: Warming up for 200.00 ms                                                   Benchmarking ZKW-redux/20: Collecting 10 samples in estimated 5.0004 s (93k iterations)                                                                                       Benchmarking ZKW-redux/20: Analyzing                                    <span style="color: #00aa00">ZKW-redux/20</span>            time:   [<span style="font-weight: lighter">51.656 us</span> <span style="font-weight: bold">52.575 us</span> <span style="font-weight: lighter">53.530 us</span>]
max: 0.13222864768683273, avg: 118957.20453984546, n: 7472465 vs real n: 20
Benchmarking ZKW-redux/22                         Benchmarking ZKW-redux/22: Warming up for 200.00 ms                                                   Benchmarking ZKW-redux/22: Collecting 10 samples in estimated 5.0037 s (55k iterations)                                                                                       Benchmarking ZKW-redux/22: Analyzing                                    <span style="color: #00aa00">ZKW-redux/22</span>            time:   [<span style="font-weight: lighter">90.494 us</span> <span style="font-weight: bold">92.832 us</span> <span style="font-weight: lighter">94.641 us</span>]
max: 0.1731291676957274, avg: 97416.69245213883, n: 4668505 vs real n: 22
Benchmarking ZKW-redux/25                         Benchmarking ZKW-redux/25: Warming up for 200.00 ms                                                   Benchmarking ZKW-redux/25: Collecting 10 samples in estimated 5.0002 s (64k iterations)                                                                                       Benchmarking ZKW-redux/25: Analyzing                                    <span style="color: #00aa00">ZKW-redux/25</span>            time:   [<span style="font-weight: lighter">72.053 us</span> <span style="font-weight: bold">73.452 us</span> <span style="font-weight: lighter">75.317 us</span>]
max: 0.17997226624405704, avg: 66467.32789551972, n: 3944290 vs real n: 25
Benchmarking ZKW-redux/27                         Benchmarking ZKW-redux/27: Warming up for 200.00 ms                                                   Benchmarking ZKW-redux/27: Collecting 10 samples in estimated 5.0019 s (82k iterations)                                                                                       Benchmarking ZKW-redux/27: Analyzing                                    <span style="color: #00aa00">ZKW-redux/27</span>            time:   [<span style="font-weight: lighter">60.549 us</span> <span style="font-weight: bold">62.041 us</span> <span style="font-weight: lighter">63.274 us</span>]
max: 0.13537936913895998, avg: 85780.20676568874, n: 4041530 vs real n: 27
Benchmarking ZKW-redux/30                         Benchmarking ZKW-redux/30: Warming up for 200.00 ms                                                   Benchmarking ZKW-redux/30: Collecting 10 samples in estimated 5.0027 s (79k iterations)                                                                                       Benchmarking ZKW-redux/30: Analyzing                                    <span style="color: #00aa00">ZKW-redux/30</span>            time:   [<span style="font-weight: lighter">59.201 us</span> <span style="font-weight: bold">60.400 us</span> <span style="font-weight: lighter">61.307 us</span>]
<span style="color: #aa5500">Found 1 outliers among 10 measurements (10.00%)</span>
  1 (10.00%) high mild
max: 0.2064937848264038, avg: 50571.0336887519, n: 3426370 vs real n: 30
Benchmarking ZKW-redux/32                         Benchmarking ZKW-redux/32: Warming up for 200.00 ms                                                   Benchmarking ZKW-redux/32: Collecting 10 samples in estimated 5.0032 s (85k iterations)                                                                                       Benchmarking ZKW-redux/32: Analyzing                                    <span style="color: #00aa00">ZKW-redux/32</span>            time:   [<span style="font-weight: lighter">60.176 us</span> <span style="font-weight: bold">61.396 us</span> <span style="font-weight: lighter">63.697 us</span>]
max: 0.16932766954738543, avg: 61255.37412543962, n: 3283380 vs real n: 32

</pre>
</div>
</div>
</div>
<p>Výsledná měření najdeme ve složce <code>solver/target/criterion/</code>. Zahrnují jak hotové reporty jednotlivých algoritmů se srovnáním doby běhu přes různé hodnoty <span class="math inline">\(n\)</span>, tak i detailní záznamy naměřených dat ve formátu JSON.</p>
<h3 id="srovnání-algoritmů">Srovnání algoritmů</h3>
<p>Pro zjednodušení zápisu jsou algoritmy pojmenované zkráceně. Zkratka v přehledu níže odkazuje na podsekci popisující příslušnou implementaci.</p>
<ul>
<li><a href="#branch--bound"><code>bb</code></a> – metoda větví a hranic</li>
<li><a href="#dynamické-programování"><code>dpc</code></a> – dynamické programování s rozkladem podle ceny</li>
<li><a href="#dynamické-programování"><code>dpw</code></a> – dynamické programování s rozkladem podle váhy</li>
<li><a href="#fptas"><code>fptas1</code></a> – FPTAS (postavený na <code>dpc</code>) pro <span class="math inline">\(\varepsilon = 0.1\)</span></li>
<li><a href="#fptas"><code>fptas2</code></a> – FPTAS (postavený na <code>dpc</code>) pro <span class="math inline">\(\varepsilon = 0.01\)</span></li>
<li><a href="#hladový-přístup"><code>greedy</code></a> – hladový algoritmus podle heuristiky poměru cena/váha</li>
<li><a href="#hladový-přístup----redux"><code>redux</code></a> – <code>greedy</code> + řešení pouze s nejdražším předmětem</li>
</ul>
<p>Zpracování měřených dat pro srovnávací grafy jsem provedl v Pythonu.</p>
<div class="doctest" data-status="SUCCESS">
<div class="doctestInput">
<div class="sourceCode" id="cb1"><pre class="sourceCode python eval"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;&lt;</span>preprocessing<span class="op">&gt;&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;&lt;</span>performance<span class="op">-</span>chart<span class="op">&gt;&gt;</span></span></code></pre></div>
</div>
<div class="doctestResult">
<div class="programOutput">
<pre class="ansi2html-content">&lt;Figure size 1008x576 with 1 Axes&gt;&lt;Figure size 1008x576 with 1 Axes&gt;&lt;Figure size 1008x576 with 1 Axes&gt;&lt;Figure size 1008x576 with 1 Axes&gt;&lt;Figure size 1008x576 with 1 Axes&gt;&lt;Figure size 1008x576 with 1 Axes&gt;</pre>
</div>
</div>
</div>
<div class="fold-block">
<button class="btn btn-outline-primary btn-sm fold-toggle" type="button" data-toggle="collapse" data-target="#preprocessing-container" aria-controls="preprocessing-container">&lt;&lt;preprocessing&gt;&gt;=</button>
<div id="preprocessing-container" class="collapse">
<div class="sourceCode" id="preprocessing" style="max-height: 50vh"><pre class="sourceCode python bootstrap-fold overflow-auto"><code class="sourceCode python"><span id="preprocessing-1"><a href="#preprocessing-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="preprocessing-2"><a href="#preprocessing-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="preprocessing-3"><a href="#preprocessing-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="preprocessing-4"><a href="#preprocessing-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="preprocessing-5"><a href="#preprocessing-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="preprocessing-6"><a href="#preprocessing-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.core.tools.numeric <span class="im">import</span> to_numeric</span>
<span id="preprocessing-7"><a href="#preprocessing-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="preprocessing-8"><a href="#preprocessing-8" aria-hidden="true" tabindex="-1"></a><span class="co"># load the mean runtime per algorithm. The data is stored in the</span></span>
<span id="preprocessing-9"><a href="#preprocessing-9" aria-hidden="true" tabindex="-1"></a><span class="co"># algorithm/n/estimates.json file, where n is the size of the input.</span></span>
<span id="preprocessing-10"><a href="#preprocessing-10" aria-hidden="true" tabindex="-1"></a><span class="co"># The mean is in the estimate.mean.point_estimate field.</span></span>
<span id="preprocessing-11"><a href="#preprocessing-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="preprocessing-12"><a href="#preprocessing-12" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: keep this in a better place (duplicities between here and bench.rs)</span></span>
<span id="preprocessing-13"><a href="#preprocessing-13" aria-hidden="true" tabindex="-1"></a>sets <span class="op">=</span> [ <span class="st">&quot;NK&quot;</span></span>
<span id="preprocessing-14"><a href="#preprocessing-14" aria-hidden="true" tabindex="-1"></a>       , <span class="st">&quot;ZKC&quot;</span></span>
<span id="preprocessing-15"><a href="#preprocessing-15" aria-hidden="true" tabindex="-1"></a>       , <span class="st">&quot;ZKW&quot;</span></span>
<span id="preprocessing-16"><a href="#preprocessing-16" aria-hidden="true" tabindex="-1"></a>       ]</span>
<span id="preprocessing-17"><a href="#preprocessing-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="preprocessing-18"><a href="#preprocessing-18" aria-hidden="true" tabindex="-1"></a>algs <span class="op">=</span> [ <span class="st">&quot;bb&quot;</span></span>
<span id="preprocessing-19"><a href="#preprocessing-19" aria-hidden="true" tabindex="-1"></a>       , <span class="st">&quot;dpc&quot;</span></span>
<span id="preprocessing-20"><a href="#preprocessing-20" aria-hidden="true" tabindex="-1"></a>       , <span class="st">&quot;dpw&quot;</span></span>
<span id="preprocessing-21"><a href="#preprocessing-21" aria-hidden="true" tabindex="-1"></a>       , <span class="st">&quot;fptas1&quot;</span></span>
<span id="preprocessing-22"><a href="#preprocessing-22" aria-hidden="true" tabindex="-1"></a>       , <span class="st">&quot;fptas2&quot;</span></span>
<span id="preprocessing-23"><a href="#preprocessing-23" aria-hidden="true" tabindex="-1"></a>       , <span class="st">&quot;greedy&quot;</span></span>
<span id="preprocessing-24"><a href="#preprocessing-24" aria-hidden="true" tabindex="-1"></a>       , <span class="st">&quot;redux&quot;</span></span>
<span id="preprocessing-25"><a href="#preprocessing-25" aria-hidden="true" tabindex="-1"></a>       ]</span>
<span id="preprocessing-26"><a href="#preprocessing-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="preprocessing-27"><a href="#preprocessing-27" aria-hidden="true" tabindex="-1"></a>n_values <span class="op">=</span> [<span class="dv">4</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">22</span>, <span class="dv">25</span>, <span class="dv">27</span>, <span class="dv">30</span>, <span class="dv">32</span>]</span>
<span id="preprocessing-28"><a href="#preprocessing-28" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {}</span>
<span id="preprocessing-29"><a href="#preprocessing-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="preprocessing-30"><a href="#preprocessing-30" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> s <span class="kw">in</span> sets:</span>
<span id="preprocessing-31"><a href="#preprocessing-31" aria-hidden="true" tabindex="-1"></a>    data[s] <span class="op">=</span> {}</span>
<span id="preprocessing-32"><a href="#preprocessing-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> alg <span class="kw">in</span> algs:</span>
<span id="preprocessing-33"><a href="#preprocessing-33" aria-hidden="true" tabindex="-1"></a>        data[s][alg] <span class="op">=</span> {}</span>
<span id="preprocessing-34"><a href="#preprocessing-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> n <span class="kw">in</span> n_values:</span>
<span id="preprocessing-35"><a href="#preprocessing-35" aria-hidden="true" tabindex="-1"></a>            est_file <span class="op">=</span> os.path.join(</span>
<span id="preprocessing-36"><a href="#preprocessing-36" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;solver&quot;</span>, <span class="st">&quot;target&quot;</span>, <span class="st">&quot;criterion&quot;</span>,</span>
<span id="preprocessing-37"><a href="#preprocessing-37" aria-hidden="true" tabindex="-1"></a>                s <span class="op">+</span> <span class="st">&quot;-&quot;</span> <span class="op">+</span> alg, <span class="bu">str</span>(n), <span class="st">&quot;new&quot;</span>, <span class="st">&quot;estimates.json&quot;</span></span>
<span id="preprocessing-38"><a href="#preprocessing-38" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="preprocessing-39"><a href="#preprocessing-39" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> os.path.exists(est_file):</span>
<span id="preprocessing-40"><a href="#preprocessing-40" aria-hidden="true" tabindex="-1"></a>                <span class="cf">with</span> <span class="bu">open</span>(est_file, <span class="st">&quot;r&quot;</span>) <span class="im">as</span> f:</span>
<span id="preprocessing-41"><a href="#preprocessing-41" aria-hidden="true" tabindex="-1"></a>                    estimates <span class="op">=</span> json.load(f)</span>
<span id="preprocessing-42"><a href="#preprocessing-42" aria-hidden="true" tabindex="-1"></a>                    mean <span class="op">=</span> estimates[<span class="st">&quot;mean&quot;</span>][<span class="st">&quot;point_estimate&quot;</span>]</span>
<span id="preprocessing-43"><a href="#preprocessing-43" aria-hidden="true" tabindex="-1"></a>                    data[s][alg][n] <span class="op">=</span> { <span class="st">&quot;mean&quot;</span>: mean <span class="op">/</span> <span class="dv">1000</span> <span class="op">/</span> <span class="dv">1000</span> <span class="op">/</span> <span class="dv">1000</span></span>
<span id="preprocessing-44"><a href="#preprocessing-44" aria-hidden="true" tabindex="-1"></a>                                      }</span>
<span id="preprocessing-45"><a href="#preprocessing-45" aria-hidden="true" tabindex="-1"></a>                err_file <span class="op">=</span> os.path.join(</span>
<span id="preprocessing-46"><a href="#preprocessing-46" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;docs&quot;</span>, <span class="st">&quot;measurements&quot;</span>,</span>
<span id="preprocessing-47"><a href="#preprocessing-47" aria-hidden="true" tabindex="-1"></a>                    s <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> alg <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> <span class="bu">str</span>(n) <span class="op">+</span> <span class="st">&quot;.txt&quot;</span></span>
<span id="preprocessing-48"><a href="#preprocessing-48" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="preprocessing-49"><a href="#preprocessing-49" aria-hidden="true" tabindex="-1"></a>                <span class="cf">with</span> <span class="bu">open</span>(err_file, <span class="st">&quot;r&quot;</span>) <span class="im">as</span> f:</span>
<span id="preprocessing-50"><a href="#preprocessing-50" aria-hidden="true" tabindex="-1"></a>                    measurements <span class="op">=</span> pd.read_csv(f)</span>
<span id="preprocessing-51"><a href="#preprocessing-51" aria-hidden="true" tabindex="-1"></a>                    data[s][alg][n][<span class="st">&quot;error&quot;</span>] <span class="op">=</span> { <span class="st">&quot;max&quot;</span>: measurements[<span class="st">&quot;max&quot;</span>]</span>
<span id="preprocessing-52"><a href="#preprocessing-52" aria-hidden="true" tabindex="-1"></a>                                               , <span class="st">&quot;avg&quot;</span>: measurements[<span class="st">&quot;avg&quot;</span>]</span>
<span id="preprocessing-53"><a href="#preprocessing-53" aria-hidden="true" tabindex="-1"></a>                                               }</span></code></pre></div>
</div>
</div>
<div class="fold-block">
<button class="btn btn-outline-primary btn-sm fold-toggle" type="button" data-toggle="collapse" data-target="#performance-chart-container" aria-controls="performance-chart-container">&lt;&lt;performance-chart&gt;&gt;=</button>
<div id="performance-chart-container" class="collapse">
<div class="sourceCode" id="performance-chart" style="max-height: 50vh"><pre class="sourceCode python bootstrap-fold overflow-auto"><code class="sourceCode python"><span id="performance-chart-1"><a href="#performance-chart-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="performance-chart-2"><a href="#performance-chart-2" aria-hidden="true" tabindex="-1"></a><span class="co"># plot the mean runtimes and max errors</span></span>
<span id="performance-chart-3"><a href="#performance-chart-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="performance-chart-4"><a href="#performance-chart-4" aria-hidden="true" tabindex="-1"></a>figsize <span class="op">=</span> (<span class="dv">14</span>, <span class="dv">8</span>)</span>
<span id="performance-chart-5"><a href="#performance-chart-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> s <span class="kw">in</span> sets:</span>
<span id="performance-chart-6"><a href="#performance-chart-6" aria-hidden="true" tabindex="-1"></a>    fig, ax <span class="op">=</span> plt.subplots(figsize <span class="op">=</span> figsize)</span>
<span id="performance-chart-7"><a href="#performance-chart-7" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">&quot;Průměrná doba běhu&quot;</span>)</span>
<span id="performance-chart-8"><a href="#performance-chart-8" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">&quot;Velikost instance&quot;</span>)</span>
<span id="performance-chart-9"><a href="#performance-chart-9" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">&quot;Průměrná doba běhu (sec)&quot;</span>)</span>
<span id="performance-chart-10"><a href="#performance-chart-10" aria-hidden="true" tabindex="-1"></a>    plt.xticks(n_values)</span>
<span id="performance-chart-11"><a href="#performance-chart-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> alg <span class="kw">in</span> algs:</span>
<span id="performance-chart-12"><a href="#performance-chart-12" aria-hidden="true" tabindex="-1"></a>        plt.plot([n <span class="cf">for</span> n <span class="kw">in</span> data[s][alg]], [data[s][alg][n][<span class="st">&quot;mean&quot;</span>] <span class="cf">for</span> n <span class="kw">in</span> data[s][alg]], <span class="st">&quot;--o&quot;</span>, label<span class="op">=</span>alg)</span>
<span id="performance-chart-13"><a href="#performance-chart-13" aria-hidden="true" tabindex="-1"></a>    plt.legend()</span>
<span id="performance-chart-14"><a href="#performance-chart-14" aria-hidden="true" tabindex="-1"></a>    plt.savefig(<span class="st">&quot;docs/assets/</span><span class="sc">{}</span><span class="st">_mean_runtimes.svg&quot;</span>.<span class="bu">format</span>(s))</span>
<span id="performance-chart-15"><a href="#performance-chart-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="performance-chart-16"><a href="#performance-chart-16" aria-hidden="true" tabindex="-1"></a>    fig, ax <span class="op">=</span> plt.subplots(figsize <span class="op">=</span> figsize)</span>
<span id="performance-chart-17"><a href="#performance-chart-17" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">&quot;Závislost maximální chyby na velikosti instance&quot;</span>)</span>
<span id="performance-chart-18"><a href="#performance-chart-18" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">&quot;Velikost instance&quot;</span>)</span>
<span id="performance-chart-19"><a href="#performance-chart-19" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">&quot;Maximální chyba&quot;</span>)</span>
<span id="performance-chart-20"><a href="#performance-chart-20" aria-hidden="true" tabindex="-1"></a>    plt.xticks(n_values)</span>
<span id="performance-chart-21"><a href="#performance-chart-21" aria-hidden="true" tabindex="-1"></a>    yticks <span class="op">=</span> np.append(ax.get_yticks(), [<span class="fl">0.1</span>, <span class="fl">0.01</span>])</span>
<span id="performance-chart-22"><a href="#performance-chart-22" aria-hidden="true" tabindex="-1"></a>    ax.set_yticks(yticks)</span>
<span id="performance-chart-23"><a href="#performance-chart-23" aria-hidden="true" tabindex="-1"></a>    ax.grid(linestyle <span class="op">=</span> <span class="st">&quot;dotted&quot;</span>)</span>
<span id="performance-chart-24"><a href="#performance-chart-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> alg <span class="kw">in</span> algs:</span>
<span id="performance-chart-25"><a href="#performance-chart-25" aria-hidden="true" tabindex="-1"></a>        plt.plot([n <span class="cf">for</span> n <span class="kw">in</span> data[s][alg]], [data[s][alg][n][<span class="st">&quot;error&quot;</span>][<span class="st">&quot;max&quot;</span>] <span class="cf">for</span> n <span class="kw">in</span> data[s][alg]], label<span class="op">=</span>alg)</span>
<span id="performance-chart-26"><a href="#performance-chart-26" aria-hidden="true" tabindex="-1"></a>    plt.legend()</span>
<span id="performance-chart-27"><a href="#performance-chart-27" aria-hidden="true" tabindex="-1"></a>    plt.savefig(<span class="st">&quot;docs/assets/</span><span class="sc">{}</span><span class="st">_max_errors.svg&quot;</span>.<span class="bu">format</span>(s))</span></code></pre></div>
</div>
</div>
<p>Výkon každého algoritmu byl změřen na stovce různých zadání z jedné datové sady alespoň desetkrát za sebou (přesný počet spuštění řídí knihovna v závislosti na výkonu algoritmu). Vyobrazený čas je proto stokrát vyšší, než skutečná doba řešení jedné instance problému dané velikosti.</p>
<figure>
<img src="assets/NK_mean_runtimes.svg" alt="NK: Závislost doby běhu na počtu předmětů." /><figcaption aria-hidden="true">NK: Závislost doby běhu na počtu předmětů.</figcaption>
</figure>
<figure>
<img src="assets/ZKC_mean_runtimes.svg" alt="ZKC: Závislost doby běhu na počtu předmětů." /><figcaption aria-hidden="true">ZKC: Závislost doby běhu na počtu předmětů.</figcaption>
</figure>
<figure>
<img src="assets/ZKW_mean_runtimes.svg" alt="ZKW: Závislost doby běhu na počtu předmětů." /><figcaption aria-hidden="true">ZKW: Závislost doby běhu na počtu předmětů.</figcaption>
</figure>
<p>Graf maximální chyby zvýrazňuje hranice požadované od FPTAS algoritmu. Zajímavé je, že maximální chyba je relativně hluboko pod požadovanou horní mezí.</p>
<figure>
<img src="assets/NK_max_errors.svg" alt="NK: Maximální chyba řešení." /><figcaption aria-hidden="true">NK: Maximální chyba řešení.</figcaption>
</figure>
<figure>
<img src="assets/ZKC_max_errors.svg" alt="ZKC: Maximální chyba řešení." /><figcaption aria-hidden="true">ZKC: Maximální chyba řešení.</figcaption>
</figure>
<figure>
<img src="assets/ZKW_max_errors.svg" alt="ZKW: Maximální chyba řešení." /><figcaption aria-hidden="true">ZKW: Maximální chyba řešení.</figcaption>
</figure>
<h3 id="analýza">Analýza</h3>
<p>Detailní analýza algoritmu FPTAS je rozdělená podle sady instancí a parametru <span class="math inline">\(\varepsilon\)</span>.</p>
<ul>
<li>sada NK
<ul>
<li><span class="math inline">\(\varepsilon = 0.1\)</span> <a href="criterion/NK-fptas1/report/index.html"><code>NK-fptas1</code></a></li>
<li><span class="math inline">\(\varepsilon = 0.01\)</span> <a href="criterion/NK-fptas2/report/index.html"><code>NK-fptas2</code></a></li>
</ul></li>
<li>sada ZKC
<ul>
<li><span class="math inline">\(\varepsilon = 0.1\)</span> <a href="criterion/ZKC-fptas1/report/index.html"><code>ZKC-fptas1</code></a></li>
<li><span class="math inline">\(\varepsilon = 0.01\)</span> <a href="criterion/ZKC-fptas2/report/index.html"><code>ZKC-fptas2</code></a></li>
</ul></li>
<li>sada ZKW
<ul>
<li><span class="math inline">\(\varepsilon = 0.1\)</span> <a href="criterion/ZKW-fptas1/report/index.html"><code>ZKW-fptas1</code></a></li>
<li><span class="math inline">\(\varepsilon = 0.01\)</span> <a href="criterion/ZKW-fptas2/report/index.html"><code>ZKW-fptas2</code></a></li>
</ul></li>
</ul>
<p>Z grafů je vidět, že (alespoň na těchto datových sadách) se dekompozice podle váhy vyplatí mnohem více, než dekompozice podle ceny. FPTAS sice něco z výpočetní náročnosti ušetří (na úkor kvality řešení), dynamické programování podle váhy ale stále vede.</p>
<h4 id="odpovídají-obě-závislosti-kvality-a-času-předpokladům">Odpovídají obě závislosti (kvality a času) předpokladům?</h4>
<p>Ne. Čekal jsem, že FPTAS bude často mnohem blíže požadované hranici <span class="math inline">\(\varepsilon\)</span>. Varianta <code>fptas1</code> ale většinou překoná i hranici pro <code>fptas2</code>, přitom je mnohem rychlejší.</p>
<p>V sadě ZKW je zároveň poměrně málo instancí, ve kterých se navíc objevují nečekané trendy. Ty vedou k tomu, že dynamické programování s rozkladem podle ceny na této sadě projevuje nemonotonní vztah mezi velikostí instance a dobou běhu.</p>
<h4 id="je-některá-heuristická-metoda-systematicky-lepší-v-některém-kritériu">Je některá heuristická metoda systematicky lepší v některém kritériu?</h4>
<p>Heuristiky běží podstatně rychleji než ostatní algoritmy. Redux je navíc i užitečná, protože její maximální chyba je shora omezená. Naproti tomu hloupý hladový přístup často skončí s vysokou chybou.</p>
<h4 id="jak-se-liší-obtížnost-jednotlivých-sad-z-hlediska-jednotlivých-metod">Jak se liší obtížnost jednotlivých sad z hlediska jednotlivých metod?</h4>
<p>Sady NK a ZKC jsou si zřejmě dost podobné. Metoda větví a hranic má trochu problémy v sadě ZKC, pro <span class="math inline">\(n = 25\)</span> už řešení trvalo 10 sekund (proto jsem jej z měření vyřadil). Sada ZKW se zdá být podstatně jednodušší pro dynamické programování a FPTAS na něm založený.</p>
<h4 id="jaká-je-závislost-maximální-chyby-varepsilon-a-času-fptas-algoritmu-na-zvolené-přesnosti-odpovídá-předpokladům">Jaká je závislost maximální chyby (<span class="math inline">\(\varepsilon\)</span>) a času FPTAS algoritmu na zvolené přesnosti? Odpovídá předpokladům?</h4>
<p>Nikoliv. <code>fptas1</code> (pro <span class="math inline">\(\varepsilon = 0.1\)</span>) je překvapivě časově efektivní a zároveň dosahuje velmi pěkných výsledků. Kromě sady ZKW, kde má trochu problémy, často přesáhne mez stanovenou jeho výrazně pomalejšímu bratru <code>fptas2</code>. Na těchto datech se zdá být dobrým kompromisem mezi výpočetní složitostí a přesností výsledku, ačkoliv kvality dynamického programování podle váhy samozřejmě nedosahuje.</p>
<h2 id="implementace">Implementace</h2>
<p>Program začíná definicí datové struktury reprezentující instanci problému batohu.</p>
<div class="annotated-code">
<p><span><em>«problem-instance-definition»=</em></span></p>
<div class="sourceCode" id="problem-instance-definition"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="problem-instance-definition-1"><a href="#problem-instance-definition-1" aria-hidden="true" tabindex="-1"></a><span class="at">#[</span>derive<span class="at">(</span><span class="bu">Debug</span><span class="op">,</span> <span class="bu">PartialEq</span><span class="op">,</span> <span class="bu">Eq</span><span class="op">,</span> <span class="bu">Clone</span><span class="at">)]</span></span>
<span id="problem-instance-definition-2"><a href="#problem-instance-definition-2" aria-hidden="true" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">struct</span> Instance <span class="op">{</span></span>
<span id="problem-instance-definition-3"><a href="#problem-instance-definition-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">pub</span> id<span class="op">:</span> <span class="dt">i32</span><span class="op">,</span> m<span class="op">:</span> <span class="dt">u32</span><span class="op">,</span> <span class="kw">pub</span> items<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span>(<span class="dt">u32</span><span class="op">,</span> <span class="dt">u32</span>)<span class="op">&gt;</span></span>
<span id="problem-instance-definition-4"><a href="#problem-instance-definition-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<p>Následující úryvek poskytuje ptačí pohled na strukturu souboru. Použité knihovny jsou importovány na začátku, následuje již zmíněná definice instance problému, dále funkce <code>main()</code>, parser, definice struktury řešení a její podpůrné funkce, samotné algoritmy řešiče a v neposlední řadě sada automatických testů.</p>
<div class="annotated-code">
<p><span><em>«solver/src/lib.rs»=</em></span></p>
<div class="sourceCode" id="cb2" data-file="solver/src/lib.rs"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;&lt;</span>imports<span class="op">&gt;&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;&lt;</span>algorithm<span class="op">-</span>map<span class="op">&gt;&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">fn</span> solve_stream<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">,</span> T<span class="op">&gt;</span>(</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    alg<span class="op">:</span> <span class="kw">for</span> <span class="op">&lt;</span><span class="ot">&#39;b</span><span class="op">&gt;</span> <span class="kw">fn</span>(<span class="op">&amp;</span><span class="ot">&#39;b</span> Instance) <span class="op">-&gt;</span> Solution<span class="op">&lt;</span><span class="ot">&#39;b</span><span class="op">&gt;,</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    solutions<span class="op">:</span> HashMap<span class="op">&lt;</span>(<span class="dt">u32</span><span class="op">,</span> <span class="dt">i32</span>)<span class="op">,</span> OptimalSolution<span class="op">&gt;,</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    stream<span class="op">:</span> <span class="op">&amp;</span><span class="kw">mut</span> T</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span><span class="dt">Vec</span><span class="op">&lt;</span>(<span class="dt">u32</span><span class="op">,</span> <span class="dt">f64</span>)<span class="op">&gt;&gt;</span> <span class="kw">where</span> T<span class="op">:</span> <span class="bu">BufRead</span> <span class="op">{</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> results <span class="op">=</span> <span class="pp">vec!</span>[]<span class="op">;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">loop</span> <span class="op">{</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">match</span> parse_line(stream)<span class="op">?.</span>as_ref()<span class="op">.</span>map(<span class="op">|</span>inst<span class="op">|</span> (inst<span class="op">,</span> alg(inst))) <span class="op">{</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>            <span class="cn">Some</span>((inst<span class="op">,</span> sln)) <span class="op">=&gt;</span> <span class="op">{</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>                <span class="kw">let</span> optimal <span class="op">=</span> <span class="op">&amp;</span>solutions[<span class="op">&amp;</span>(inst<span class="op">.</span>items<span class="op">.</span>len() <span class="kw">as</span> <span class="dt">u32</span><span class="op">,</span> inst<span class="op">.</span>id)]<span class="op">;</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>                <span class="kw">let</span> error <span class="op">=</span> <span class="dv">1.0</span> <span class="op">-</span> sln<span class="op">.</span>cost <span class="kw">as</span> <span class="dt">f64</span> <span class="op">/</span> optimal<span class="op">.</span>cost <span class="kw">as</span> <span class="dt">f64</span><span class="op">;</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>                results<span class="op">.</span>push((sln<span class="op">.</span>cost<span class="op">,</span> error))</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>            <span class="op">},</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>            <span class="cn">None</span> <span class="op">=&gt;</span> <span class="kw">return</span> <span class="cn">Ok</span>(results)</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="pp">std::result::</span><span class="dt">Result</span> <span class="kw">as</span> IOResult<span class="op">;</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">fn</span> list_input_files(set<span class="op">:</span> <span class="op">&amp;</span><span class="dt">str</span><span class="op">,</span> r<span class="op">:</span> Range<span class="op">&lt;</span><span class="dt">u32</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span><span class="dt">Vec</span><span class="op">&lt;</span>IOResult<span class="op">&lt;</span>DirEntry<span class="op">,</span> <span class="pp">std::io::</span><span class="bu">Error</span><span class="op">&gt;&gt;&gt;</span> <span class="op">{</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> f <span class="op">=</span> <span class="op">|</span>res<span class="op">:</span> <span class="op">&amp;</span>IOResult<span class="op">&lt;</span>DirEntry<span class="op">,</span> <span class="pp">std::io::</span><span class="bu">Error</span><span class="op">&gt;</span> <span class="op">|</span> res<span class="op">.</span>as_ref()<span class="op">.</span>ok()<span class="op">.</span>filter(<span class="op">|</span>f<span class="op">|</span> <span class="op">{</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> file_name <span class="op">=</span> f<span class="op">.</span>file_name()<span class="op">;</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> file_name <span class="op">=</span> file_name<span class="op">.</span>to_str()<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        <span class="co">// keep only regular files</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        f<span class="op">.</span>file_type()<span class="op">.</span>unwrap()<span class="op">.</span>is_file() <span class="op">&amp;&amp;</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>        <span class="co">// ... whose names start with the set name,</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>        file_name<span class="op">.</span>starts_with(set) <span class="op">&amp;&amp;</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>        <span class="co">// ... continue with an integer between 0 and 15,</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>        file_name[set<span class="op">.</span>len()<span class="op">..</span>]</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span>split(<span class="ch">&#39;_&#39;</span>)<span class="op">.</span>nth(<span class="dv">0</span>)<span class="op">.</span>unwrap()<span class="op">.</span><span class="pp">parse::</span><span class="op">&lt;</span><span class="dt">u32</span><span class="op">&gt;</span>()<span class="op">.</span>ok()</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span>filter(<span class="op">|</span>n<span class="op">|</span> r<span class="op">.</span>contains(n))<span class="op">.</span>is_some() <span class="op">&amp;&amp;</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>        <span class="co">// ... and end with `_inst.dat` (for &quot;instance&quot;).</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>        file_name<span class="op">.</span>ends_with(<span class="st">&quot;_inst.dat&quot;</span>)</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span>)<span class="op">.</span>is_some()<span class="op">;</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    <span class="cn">Ok</span>(read_dir(<span class="st">&quot;./ds/&quot;</span>)<span class="op">?.</span>filter(f)<span class="op">.</span>collect())</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;&lt;</span>problem<span class="op">-</span>instance<span class="op">-</span>definition<span class="op">&gt;&gt;</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;&lt;</span>solution<span class="op">-</span>definition<span class="op">&gt;&gt;</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;&lt;</span>parser<span class="op">&gt;&gt;</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a><span class="kw">impl</span> Instance <span class="op">{</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;&lt;</span>solver<span class="op">-</span>dpw<span class="op">&gt;&gt;</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;&lt;</span>solver<span class="op">-</span>dpc<span class="op">&gt;&gt;</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;&lt;</span>solver<span class="op">-</span>fptas<span class="op">&gt;&gt;</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;&lt;</span>solver<span class="op">-</span>greedy<span class="op">&gt;&gt;</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;&lt;</span>solver<span class="op">-</span>greedy<span class="op">-</span>redux<span class="op">&gt;&gt;</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;&lt;</span>solver<span class="op">-</span>bb<span class="op">&gt;&gt;</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;&lt;</span>solver<span class="op">-</span>bf<span class="op">&gt;&gt;</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;&lt;</span>tests<span class="op">&gt;&gt;</span></span></code></pre></div>
</div>
<p>Řešení v podobě datové struktury <code>Solution</code> má kromě reference na instanci problému především bit array udávající množinu předmětů v pomyslném batohu. Zároveň nese informaci o počtu navštívených konfigurací při jeho výpočtu.</p>
<div class="annotated-code">
<p><span><em>«solution-definition»=</em></span></p>
<div class="sourceCode" id="solution-definition"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="solution-definition-1"><a href="#solution-definition-1" aria-hidden="true" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">type</span> Config <span class="op">=</span> <span class="pp">BitArr!</span>(<span class="kw">for</span> <span class="dv">64</span>)<span class="op">;</span></span>
<span id="solution-definition-2"><a href="#solution-definition-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="solution-definition-3"><a href="#solution-definition-3" aria-hidden="true" tabindex="-1"></a><span class="at">#[</span>derive<span class="at">(</span><span class="bu">PartialEq</span><span class="op">,</span> <span class="bu">Eq</span><span class="op">,</span> <span class="bu">Clone</span><span class="op">,</span> <span class="bu">Copy</span><span class="op">,</span> <span class="bu">Debug</span><span class="at">)]</span></span>
<span id="solution-definition-4"><a href="#solution-definition-4" aria-hidden="true" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">struct</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="op">{</span> weight<span class="op">:</span> <span class="dt">u32</span><span class="op">,</span> <span class="kw">pub</span> cost<span class="op">:</span> <span class="dt">u32</span><span class="op">,</span> cfg<span class="op">:</span> Config<span class="op">,</span> <span class="kw">pub</span> inst<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> Instance <span class="op">}</span></span>
<span id="solution-definition-5"><a href="#solution-definition-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="solution-definition-6"><a href="#solution-definition-6" aria-hidden="true" tabindex="-1"></a><span class="at">#[</span>derive<span class="at">(</span><span class="bu">Debug</span><span class="op">,</span> <span class="bu">PartialEq</span><span class="op">,</span> <span class="bu">Eq</span><span class="op">,</span> <span class="bu">Clone</span><span class="at">)]</span></span>
<span id="solution-definition-7"><a href="#solution-definition-7" aria-hidden="true" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">struct</span> OptimalSolution <span class="op">{</span> id<span class="op">:</span> <span class="dt">i32</span><span class="op">,</span> <span class="kw">pub</span> cost<span class="op">:</span> <span class="dt">u32</span><span class="op">,</span> cfg<span class="op">:</span> Config <span class="op">}</span></span>
<span id="solution-definition-8"><a href="#solution-definition-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="solution-definition-9"><a href="#solution-definition-9" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;&lt;</span>solution<span class="op">-</span>helpers<span class="op">&gt;&gt;</span></span></code></pre></div>
</div>
<p>Protože se strukturami typu <code>Solution</code> se v algoritmech pracuje hojně, implementoval jsem pro ně koncept řazení a pomocné metody k počítání navštívených konfigurací a přidávání předmětů do batohu.</p>
<div class="fold-block">
<button class="btn btn-outline-primary btn-sm fold-toggle" type="button" data-toggle="collapse" data-target="#solution-helpers-container" aria-controls="solution-helpers-container">&lt;&lt;solution-helpers&gt;&gt;=</button>
<div id="solution-helpers-container" class="collapse">
<div class="sourceCode" id="solution-helpers" style="max-height: 50vh"><pre class="sourceCode rust bootstrap-fold overflow-auto"><code class="sourceCode rust"><span id="solution-helpers-1"><a href="#solution-helpers-1" aria-hidden="true" tabindex="-1"></a><span class="kw">impl</span> <span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="bu">PartialOrd</span> <span class="kw">for</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="solution-helpers-2"><a href="#solution-helpers-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> partial_cmp(<span class="op">&amp;</span><span class="kw">self</span><span class="op">,</span> other<span class="op">:</span> <span class="op">&amp;</span><span class="dt">Self</span>) <span class="op">-&gt;</span> <span class="dt">Option</span><span class="op">&lt;</span><span class="pp">cmp::</span>Ordering<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="solution-helpers-3"><a href="#solution-helpers-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">use</span> <span class="pp">cmp::</span>Ordering<span class="op">;</span></span>
<span id="solution-helpers-4"><a href="#solution-helpers-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> Solution <span class="op">{</span>weight<span class="op">,</span> cost<span class="op">,</span> <span class="op">..}</span> <span class="op">=</span> <span class="kw">self</span><span class="op">;</span></span>
<span id="solution-helpers-5"><a href="#solution-helpers-5" aria-hidden="true" tabindex="-1"></a>        <span class="cn">Some</span>(<span class="kw">match</span> cost<span class="op">.</span>cmp(<span class="op">&amp;</span>other<span class="op">.</span>cost) <span class="op">{</span></span>
<span id="solution-helpers-6"><a href="#solution-helpers-6" aria-hidden="true" tabindex="-1"></a>            <span class="pp">Ordering::</span>Equal <span class="op">=&gt;</span> weight<span class="op">.</span>cmp(<span class="op">&amp;</span>other<span class="op">.</span>weight)<span class="op">.</span>reverse()<span class="op">,</span></span>
<span id="solution-helpers-7"><a href="#solution-helpers-7" aria-hidden="true" tabindex="-1"></a>            other <span class="op">=&gt;</span> other<span class="op">,</span></span>
<span id="solution-helpers-8"><a href="#solution-helpers-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span>)</span>
<span id="solution-helpers-9"><a href="#solution-helpers-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="solution-helpers-10"><a href="#solution-helpers-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="solution-helpers-11"><a href="#solution-helpers-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="solution-helpers-12"><a href="#solution-helpers-12" aria-hidden="true" tabindex="-1"></a><span class="kw">impl</span> <span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="bu">Ord</span> <span class="kw">for</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="solution-helpers-13"><a href="#solution-helpers-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> cmp(<span class="op">&amp;</span><span class="kw">self</span><span class="op">,</span> other<span class="op">:</span> <span class="op">&amp;</span><span class="dt">Self</span>) <span class="op">-&gt;</span> <span class="pp">cmp::</span>Ordering <span class="op">{</span></span>
<span id="solution-helpers-14"><a href="#solution-helpers-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">self</span><span class="op">.</span>partial_cmp(other)<span class="op">.</span>unwrap()</span>
<span id="solution-helpers-15"><a href="#solution-helpers-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="solution-helpers-16"><a href="#solution-helpers-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="solution-helpers-17"><a href="#solution-helpers-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="solution-helpers-18"><a href="#solution-helpers-18" aria-hidden="true" tabindex="-1"></a><span class="kw">impl</span> <span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="solution-helpers-19"><a href="#solution-helpers-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> with(<span class="kw">mut</span> <span class="kw">self</span><span class="op">,</span> i<span class="op">:</span> <span class="dt">usize</span>) <span class="op">-&gt;</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="solution-helpers-20"><a href="#solution-helpers-20" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> (w<span class="op">,</span> c) <span class="op">=</span> <span class="kw">self</span><span class="op">.</span>inst<span class="op">.</span>items[i]<span class="op">;</span></span>
<span id="solution-helpers-21"><a href="#solution-helpers-21" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="op">!</span><span class="kw">self</span><span class="op">.</span>cfg[i] <span class="op">{</span></span>
<span id="solution-helpers-22"><a href="#solution-helpers-22" aria-hidden="true" tabindex="-1"></a>            <span class="kw">self</span><span class="op">.</span>cfg<span class="op">.</span>set(i<span class="op">,</span> <span class="cn">true</span>)<span class="op">;</span></span>
<span id="solution-helpers-23"><a href="#solution-helpers-23" aria-hidden="true" tabindex="-1"></a>            <span class="kw">self</span><span class="op">.</span>weight <span class="op">+=</span> w<span class="op">;</span></span>
<span id="solution-helpers-24"><a href="#solution-helpers-24" aria-hidden="true" tabindex="-1"></a>            <span class="kw">self</span><span class="op">.</span>cost <span class="op">+=</span> c<span class="op">;</span></span>
<span id="solution-helpers-25"><a href="#solution-helpers-25" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="solution-helpers-26"><a href="#solution-helpers-26" aria-hidden="true" tabindex="-1"></a>        <span class="kw">self</span></span>
<span id="solution-helpers-27"><a href="#solution-helpers-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="solution-helpers-28"><a href="#solution-helpers-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="solution-helpers-29"><a href="#solution-helpers-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> default(inst<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> Instance) <span class="op">-&gt;</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="solution-helpers-30"><a href="#solution-helpers-30" aria-hidden="true" tabindex="-1"></a>        Solution <span class="op">{</span> weight<span class="op">:</span> <span class="dv">0</span><span class="op">,</span> cost<span class="op">:</span> <span class="dv">0</span><span class="op">,</span> cfg<span class="op">:</span> <span class="pp">Config::</span><span class="kw">default</span>()<span class="op">,</span> inst <span class="op">}</span></span>
<span id="solution-helpers-31"><a href="#solution-helpers-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="solution-helpers-32"><a href="#solution-helpers-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="solution-helpers-33"><a href="#solution-helpers-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> overweight(inst<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> Instance) <span class="op">-&gt;</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="solution-helpers-34"><a href="#solution-helpers-34" aria-hidden="true" tabindex="-1"></a>        Solution <span class="op">{</span> weight<span class="op">:</span> <span class="dt">u32</span><span class="pp">::</span><span class="cn">MAX</span><span class="op">,</span> cost<span class="op">:</span> <span class="dv">0</span><span class="op">,</span> cfg<span class="op">:</span> <span class="pp">Config::</span><span class="kw">default</span>()<span class="op">,</span> inst <span class="op">}</span></span>
<span id="solution-helpers-35"><a href="#solution-helpers-35" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="solution-helpers-36"><a href="#solution-helpers-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
</div>
<h3 id="algoritmy">Algoritmy</h3>
<p>Aby bylo k jednotlivým implementacím jednoduché přistupovat, všechny implementované algoritmy jsou uloženy pod svými názvy v <code>BTreeMap</code>ě. Tu používáme při vybírání algoritmu pomocí argumentu předaného na příkazové řádce, v testovacím kódu na testy všech implementací atp.</p>
<div class="annotated-code">
<p><span><em>«algorithm-map»=</em></span></p>
<div class="sourceCode" id="algorithm-map"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="algorithm-map-1"><a href="#algorithm-map-1" aria-hidden="true" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">fn</span> get_algorithms() <span class="op">-&gt;</span> BTreeMap<span class="op">&lt;&amp;</span><span class="ot">&#39;static</span> <span class="dt">str</span><span class="op">,</span> <span class="kw">fn</span>(<span class="op">&amp;</span>Instance) <span class="op">-&gt;</span> Solution<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="algorithm-map-2"><a href="#algorithm-map-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> cast <span class="op">=</span> <span class="op">|</span>x<span class="op">:</span> <span class="kw">fn</span>(<span class="op">&amp;</span>Instance) <span class="op">-&gt;</span> Solution<span class="op">|</span> x<span class="op">;</span></span>
<span id="algorithm-map-3"><a href="#algorithm-map-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// the BTreeMap works as a trie, maintaining alphabetic order</span></span>
<span id="algorithm-map-4"><a href="#algorithm-map-4" aria-hidden="true" tabindex="-1"></a>    <span class="pp">BTreeMap::</span>from([</span>
<span id="algorithm-map-5"><a href="#algorithm-map-5" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;bf&quot;</span><span class="op">,</span>     cast(<span class="pp">Instance::</span>brute_force))<span class="op">,</span></span>
<span id="algorithm-map-6"><a href="#algorithm-map-6" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;bb&quot;</span><span class="op">,</span>     cast(<span class="pp">Instance::</span>branch_and_bound))<span class="op">,</span></span>
<span id="algorithm-map-7"><a href="#algorithm-map-7" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;dpc&quot;</span><span class="op">,</span>    cast(<span class="pp">Instance::</span>dynamic_programming_c))<span class="op">,</span></span>
<span id="algorithm-map-8"><a href="#algorithm-map-8" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;dpw&quot;</span><span class="op">,</span>    cast(<span class="pp">Instance::</span>dynamic_programming_w))<span class="op">,</span></span>
<span id="algorithm-map-9"><a href="#algorithm-map-9" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;fptas1&quot;</span><span class="op">,</span> cast(<span class="op">|</span>inst<span class="op">|</span> inst<span class="op">.</span>fptas(<span class="dv">10f64</span><span class="op">.</span>powi(<span class="op">-</span><span class="dv">1</span>))))<span class="op">,</span></span>
<span id="algorithm-map-10"><a href="#algorithm-map-10" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;fptas2&quot;</span><span class="op">,</span> cast(<span class="op">|</span>inst<span class="op">|</span> inst<span class="op">.</span>fptas(<span class="dv">10f64</span><span class="op">.</span>powi(<span class="op">-</span><span class="dv">2</span>))))<span class="op">,</span></span>
<span id="algorithm-map-11"><a href="#algorithm-map-11" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;greedy&quot;</span><span class="op">,</span> cast(<span class="pp">Instance::</span>greedy))<span class="op">,</span></span>
<span id="algorithm-map-12"><a href="#algorithm-map-12" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;redux&quot;</span><span class="op">,</span>  cast(<span class="pp">Instance::</span>greedy_redux))<span class="op">,</span></span>
<span id="algorithm-map-13"><a href="#algorithm-map-13" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="algorithm-map-14"><a href="#algorithm-map-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<h4 id="hladový-přístup">Hladový přístup</h4>
<p>Implementace hladové strategie využívá knihovny <a href="https://crates.io/crates/permutation"><code>permutation</code></a>. Problém ve skutečnosti řešíme na isomorfní instanci, která má předměty uspořádané. Jediné, co se změní, je pořadí, ve kterém předměty navštěvujeme. Proto stačí aplikovat řadicí permutaci předmětů na posloupnost indexů, které procházíme. Přesně to dělá výraz <code>(0..items.len()).map(ord)</code>.</p>
<div class="annotated-code">
<p><span><em>«solver-greedy»=</em></span></p>
<div class="sourceCode" id="solver-greedy"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="solver-greedy-1"><a href="#solver-greedy-1" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> greedy(<span class="op">&amp;</span><span class="kw">self</span>) <span class="op">-&gt;</span> Solution <span class="op">{</span></span>
<span id="solver-greedy-2"><a href="#solver-greedy-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">use</span> <span class="pp">::permutation::</span><span class="op">*;</span></span>
<span id="solver-greedy-3"><a href="#solver-greedy-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> Instance <span class="op">{</span>m<span class="op">,</span> items<span class="op">,</span> <span class="op">..}</span> <span class="op">=</span> <span class="kw">self</span><span class="op">;</span></span>
<span id="solver-greedy-4"><a href="#solver-greedy-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> ratio((w<span class="op">,</span> c)<span class="op">:</span> (<span class="dt">u32</span><span class="op">,</span> <span class="dt">u32</span>)) <span class="op">-&gt;</span> <span class="dt">f64</span> <span class="op">{</span></span>
<span id="solver-greedy-5"><a href="#solver-greedy-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> r <span class="op">=</span> c <span class="kw">as</span> <span class="dt">f64</span> <span class="op">/</span> w <span class="kw">as</span> <span class="dt">f64</span><span class="op">;</span></span>
<span id="solver-greedy-6"><a href="#solver-greedy-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> r<span class="op">.</span>is_nan() <span class="op">{</span> <span class="dt">f64</span><span class="pp">::</span><span class="cn">NEG_INFINITY</span> <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span> r <span class="op">}</span></span>
<span id="solver-greedy-7"><a href="#solver-greedy-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="solver-greedy-8"><a href="#solver-greedy-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> permutation <span class="op">=</span> sort_by(</span>
<span id="solver-greedy-9"><a href="#solver-greedy-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">&amp;</span>(items)[<span class="op">..</span>]<span class="op">,</span></span>
<span id="solver-greedy-10"><a href="#solver-greedy-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">|</span>a<span class="op">,</span> b<span class="op">|</span></span>
<span id="solver-greedy-11"><a href="#solver-greedy-11" aria-hidden="true" tabindex="-1"></a>            ratio(<span class="op">*</span>a)</span>
<span id="solver-greedy-12"><a href="#solver-greedy-12" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>partial_cmp(<span class="op">&amp;</span>ratio(<span class="op">*</span>b))</span>
<span id="solver-greedy-13"><a href="#solver-greedy-13" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>unwrap()</span>
<span id="solver-greedy-14"><a href="#solver-greedy-14" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>reverse() <span class="co">// max item first</span></span>
<span id="solver-greedy-15"><a href="#solver-greedy-15" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="solver-greedy-16"><a href="#solver-greedy-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> ord <span class="op">=</span> <span class="op">{</span> <span class="at">#[</span>inline<span class="at">]</span> <span class="op">|</span>i<span class="op">|</span> permutation<span class="op">.</span>apply_idx(i) <span class="op">};</span></span>
<span id="solver-greedy-17"><a href="#solver-greedy-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-greedy-18"><a href="#solver-greedy-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> sol <span class="op">=</span> <span class="pp">Solution::</span><span class="kw">default</span>(<span class="kw">self</span>)<span class="op">;</span></span>
<span id="solver-greedy-19"><a href="#solver-greedy-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> i <span class="kw">in</span> (<span class="dv">0</span><span class="op">..</span>items<span class="op">.</span>len())<span class="op">.</span>map(ord) <span class="op">{</span></span>
<span id="solver-greedy-20"><a href="#solver-greedy-20" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> (w<span class="op">,</span> _c) <span class="op">=</span> items[i]<span class="op">;</span></span>
<span id="solver-greedy-21"><a href="#solver-greedy-21" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> sol<span class="op">.</span>weight <span class="op">+</span> w <span class="op">&lt;=</span> <span class="op">*</span>m <span class="op">{</span></span>
<span id="solver-greedy-22"><a href="#solver-greedy-22" aria-hidden="true" tabindex="-1"></a>            sol <span class="op">=</span> sol<span class="op">.</span>with(i)<span class="op">;</span></span>
<span id="solver-greedy-23"><a href="#solver-greedy-23" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span> <span class="kw">break</span> <span class="op">}</span></span>
<span id="solver-greedy-24"><a href="#solver-greedy-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="solver-greedy-25"><a href="#solver-greedy-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-greedy-26"><a href="#solver-greedy-26" aria-hidden="true" tabindex="-1"></a>    sol</span>
<span id="solver-greedy-27"><a href="#solver-greedy-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<h4 id="hladový-přístup-redux">Hladový přístup – redux</h4>
<p>Redux verze hladové strategie je více méně deklarativní. Výsledek redux algoritmu je maximum z hladového řešení a řešení sestávajícího pouze z nejdražšího předmětu. K indexu nejdražšího předmětu dojdeme tak, že sepneme posloupnosti indexů a předmětů, vyřadíme prvky, jejichž váha přesahuje kapacitu batohu a vybereme maximální prvek podle ceny.</p>
<div class="annotated-code">
<p><span><em>«solver-greedy-redux»=</em></span></p>
<div class="sourceCode" id="solver-greedy-redux"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="solver-greedy-redux-1"><a href="#solver-greedy-redux-1" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> greedy_redux(<span class="op">&amp;</span><span class="kw">self</span>) <span class="op">-&gt;</span> Solution <span class="op">{</span></span>
<span id="solver-greedy-redux-2"><a href="#solver-greedy-redux-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> greedy <span class="op">=</span> <span class="kw">self</span><span class="op">.</span>greedy()<span class="op">;</span></span>
<span id="solver-greedy-redux-3"><a href="#solver-greedy-redux-3" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">0_usize</span><span class="op">..</span>)</span>
<span id="solver-greedy-redux-4"><a href="#solver-greedy-redux-4" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span>zip(<span class="kw">self</span><span class="op">.</span>items<span class="op">.</span>iter())</span>
<span id="solver-greedy-redux-5"><a href="#solver-greedy-redux-5" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span>filter(<span class="op">|</span>(_<span class="op">,</span> (w<span class="op">,</span> _))<span class="op">|</span> <span class="op">*</span>w <span class="op">&lt;=</span> <span class="kw">self</span><span class="op">.</span>m)</span>
<span id="solver-greedy-redux-6"><a href="#solver-greedy-redux-6" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span>max_by_key(<span class="op">|</span>(_<span class="op">,</span> (_<span class="op">,</span> c))<span class="op">|</span> c)</span>
<span id="solver-greedy-redux-7"><a href="#solver-greedy-redux-7" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span>map(<span class="op">|</span>(highest_price_index<span class="op">,</span> _)<span class="op">|</span></span>
<span id="solver-greedy-redux-8"><a href="#solver-greedy-redux-8" aria-hidden="true" tabindex="-1"></a>            max(greedy<span class="op">,</span> <span class="pp">Solution::</span><span class="kw">default</span>(<span class="kw">self</span>)<span class="op">.</span>with(highest_price_index))</span>
<span id="solver-greedy-redux-9"><a href="#solver-greedy-redux-9" aria-hidden="true" tabindex="-1"></a>        )<span class="op">.</span>unwrap_or(greedy)</span>
<span id="solver-greedy-redux-10"><a href="#solver-greedy-redux-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<h4 id="hrubá-síla">Hrubá síla</h4>
<div class="fold-block">
<button class="btn btn-outline-primary btn-sm fold-toggle" type="button" data-toggle="collapse" data-target="#solver-bf-container" aria-controls="solver-bf-container">&lt;&lt;solver-bf&gt;&gt;=</button>
<div id="solver-bf-container" class="collapse">
<div class="sourceCode" id="solver-bf" style="max-height: 50vh"><pre class="sourceCode rust bootstrap-fold overflow-auto"><code class="sourceCode rust"><span id="solver-bf-1"><a href="#solver-bf-1" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> brute_force(<span class="op">&amp;</span><span class="kw">self</span>) <span class="op">-&gt;</span> Solution <span class="op">{</span></span>
<span id="solver-bf-2"><a href="#solver-bf-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> go<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span>(items<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> [(<span class="dt">u32</span><span class="op">,</span> <span class="dt">u32</span>)]<span class="op">,</span> current<span class="op">:</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;,</span> i<span class="op">:</span> <span class="dt">usize</span><span class="op">,</span> m<span class="op">:</span> <span class="dt">u32</span>) <span class="op">-&gt;</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="solver-bf-3"><a href="#solver-bf-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> i <span class="op">&gt;=</span> items<span class="op">.</span>len() <span class="op">{</span> <span class="kw">return</span> current <span class="op">}</span></span>
<span id="solver-bf-4"><a href="#solver-bf-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-bf-5"><a href="#solver-bf-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> (w<span class="op">,</span> _c) <span class="op">=</span> items[i]<span class="op">;</span></span>
<span id="solver-bf-6"><a href="#solver-bf-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> next <span class="op">=</span> <span class="op">|</span>current<span class="op">,</span> m<span class="op">|</span> go(items<span class="op">,</span> current<span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> m)<span class="op">;</span></span>
<span id="solver-bf-7"><a href="#solver-bf-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> include <span class="op">=</span> <span class="op">||</span> <span class="op">{</span></span>
<span id="solver-bf-8"><a href="#solver-bf-8" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> current <span class="op">=</span> current<span class="op">.</span>with(i)<span class="op">;</span></span>
<span id="solver-bf-9"><a href="#solver-bf-9" aria-hidden="true" tabindex="-1"></a>            next(current<span class="op">,</span> m <span class="op">-</span> w)</span>
<span id="solver-bf-10"><a href="#solver-bf-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">};</span></span>
<span id="solver-bf-11"><a href="#solver-bf-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> exclude <span class="op">=</span> <span class="op">||</span> next(current<span class="op">,</span> m)<span class="op">;</span></span>
<span id="solver-bf-12"><a href="#solver-bf-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-bf-13"><a href="#solver-bf-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> w <span class="op">&lt;=</span> m <span class="op">{</span></span>
<span id="solver-bf-14"><a href="#solver-bf-14" aria-hidden="true" tabindex="-1"></a>            max(include()<span class="op">,</span> exclude())</span>
<span id="solver-bf-15"><a href="#solver-bf-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="solver-bf-16"><a href="#solver-bf-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">else</span> <span class="op">{</span> exclude() <span class="op">}</span></span>
<span id="solver-bf-17"><a href="#solver-bf-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="solver-bf-18"><a href="#solver-bf-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-bf-19"><a href="#solver-bf-19" aria-hidden="true" tabindex="-1"></a>    go(<span class="op">&amp;</span><span class="kw">self</span><span class="op">.</span>items<span class="op">,</span> <span class="pp">Solution::</span><span class="kw">default</span>(<span class="kw">self</span>)<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">self</span><span class="op">.</span>m)</span>
<span id="solver-bf-20"><a href="#solver-bf-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
</div>
<h4 id="branch-bound">Branch &amp; bound</h4>
<div class="annotated-code">
<p><span><em>«solver-bb»=</em></span></p>
<div class="sourceCode" id="solver-bb"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="solver-bb-1"><a href="#solver-bb-1" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> branch_and_bound(<span class="op">&amp;</span><span class="kw">self</span>) <span class="op">-&gt;</span> Solution <span class="op">{</span></span>
<span id="solver-bb-2"><a href="#solver-bb-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> State<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span>(<span class="op">&amp;</span><span class="ot">&#39;a</span> <span class="dt">Vec</span><span class="op">&lt;</span>(<span class="dt">u32</span><span class="op">,</span> <span class="dt">u32</span>)<span class="op">&gt;,</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">u32</span><span class="op">&gt;</span>)<span class="op">;</span></span>
<span id="solver-bb-3"><a href="#solver-bb-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> prices<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">u32</span><span class="op">&gt;</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="solver-bb-4"><a href="#solver-bb-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">self</span><span class="op">.</span>items<span class="op">.</span>iter()<span class="op">.</span>rev()</span>
<span id="solver-bb-5"><a href="#solver-bb-5" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span>scan(<span class="dv">0</span><span class="op">,</span> <span class="op">|</span>sum<span class="op">,</span> (_w<span class="op">,</span> c)<span class="op">|</span> <span class="op">{</span></span>
<span id="solver-bb-6"><a href="#solver-bb-6" aria-hidden="true" tabindex="-1"></a>            <span class="op">*</span>sum <span class="op">+=</span> c<span class="op">;</span></span>
<span id="solver-bb-7"><a href="#solver-bb-7" aria-hidden="true" tabindex="-1"></a>            <span class="cn">Some</span>(<span class="op">*</span>sum)</span>
<span id="solver-bb-8"><a href="#solver-bb-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span>)</span>
<span id="solver-bb-9"><a href="#solver-bb-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="pp">collect::</span><span class="op">&lt;</span><span class="dt">Vec</span><span class="op">&lt;</span>_<span class="op">&gt;&gt;</span>()<span class="op">.</span>into_iter()<span class="op">.</span>rev()<span class="op">.</span>collect()</span>
<span id="solver-bb-10"><a href="#solver-bb-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="solver-bb-11"><a href="#solver-bb-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-bb-12"><a href="#solver-bb-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> go<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span>(state<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> State<span class="op">,</span> current<span class="op">:</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;,</span> best<span class="op">:</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;,</span> i<span class="op">:</span> <span class="dt">usize</span><span class="op">,</span> m<span class="op">:</span> <span class="dt">u32</span>) <span class="op">-&gt;</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="solver-bb-13"><a href="#solver-bb-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> State(items<span class="op">,</span> prices) <span class="op">=</span> state<span class="op">;</span></span>
<span id="solver-bb-14"><a href="#solver-bb-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> i <span class="op">&gt;=</span> items<span class="op">.</span>len() <span class="op">||</span> current<span class="op">.</span>cost <span class="op">+</span> prices[i] <span class="op">&lt;=</span> best<span class="op">.</span>cost <span class="op">{</span></span>
<span id="solver-bb-15"><a href="#solver-bb-15" aria-hidden="true" tabindex="-1"></a>            <span class="kw">return</span> current</span>
<span id="solver-bb-16"><a href="#solver-bb-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="solver-bb-17"><a href="#solver-bb-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-bb-18"><a href="#solver-bb-18" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> (w<span class="op">,</span> _c) <span class="op">=</span> items[i]<span class="op">;</span></span>
<span id="solver-bb-19"><a href="#solver-bb-19" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> next <span class="op">=</span> <span class="op">|</span>current<span class="op">,</span> best<span class="op">,</span> m<span class="op">|</span> go(state<span class="op">,</span> current<span class="op">,</span> best<span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> m)<span class="op">;</span></span>
<span id="solver-bb-20"><a href="#solver-bb-20" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> include <span class="op">=</span> <span class="op">||</span> <span class="op">{</span></span>
<span id="solver-bb-21"><a href="#solver-bb-21" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> current <span class="op">=</span> current<span class="op">.</span>with(i)<span class="op">;</span></span>
<span id="solver-bb-22"><a href="#solver-bb-22" aria-hidden="true" tabindex="-1"></a>            next(current<span class="op">,</span> max(current<span class="op">,</span> best)<span class="op">,</span> m <span class="op">-</span> w)</span>
<span id="solver-bb-23"><a href="#solver-bb-23" aria-hidden="true" tabindex="-1"></a>        <span class="op">};</span></span>
<span id="solver-bb-24"><a href="#solver-bb-24" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> exclude <span class="op">=</span> <span class="op">|</span>best<span class="op">:</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;|</span> next(current<span class="op">,</span> best<span class="op">,</span> m)<span class="op">;</span></span>
<span id="solver-bb-25"><a href="#solver-bb-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-bb-26"><a href="#solver-bb-26" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> w <span class="op">&lt;=</span> m <span class="op">{</span></span>
<span id="solver-bb-27"><a href="#solver-bb-27" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> x <span class="op">=</span> include()<span class="op">;</span></span>
<span id="solver-bb-28"><a href="#solver-bb-28" aria-hidden="true" tabindex="-1"></a>            max(x<span class="op">,</span> exclude(x))</span>
<span id="solver-bb-29"><a href="#solver-bb-29" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="solver-bb-30"><a href="#solver-bb-30" aria-hidden="true" tabindex="-1"></a>        <span class="kw">else</span> <span class="op">{</span> exclude(best) <span class="op">}</span></span>
<span id="solver-bb-31"><a href="#solver-bb-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="solver-bb-32"><a href="#solver-bb-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-bb-33"><a href="#solver-bb-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">// </span><span class="al">FIXME</span><span class="co"> borrowck issues</span></span>
<span id="solver-bb-34"><a href="#solver-bb-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> state <span class="op">=</span> State(<span class="op">&amp;</span><span class="kw">self</span><span class="op">.</span>items<span class="op">,</span> prices)<span class="op">;</span></span>
<span id="solver-bb-35"><a href="#solver-bb-35" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> empty <span class="op">=</span> <span class="pp">Solution::</span><span class="kw">default</span>(<span class="kw">self</span>)<span class="op">;</span></span>
<span id="solver-bb-36"><a href="#solver-bb-36" aria-hidden="true" tabindex="-1"></a>    Solution <span class="op">{</span> inst<span class="op">:</span> <span class="kw">self</span><span class="op">,</span> <span class="op">..</span>go(<span class="op">&amp;</span>state<span class="op">,</span> empty<span class="op">,</span> empty<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">self</span><span class="op">.</span>m) <span class="op">}</span></span>
<span id="solver-bb-37"><a href="#solver-bb-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<h4 id="dynamické-programování">Dynamické programování</h4>
<p>Jako první jsem naimplementoval dynamické programování s rozkladem podle váhy, jehož časová složitost je <span class="math inline">\(\Theta(nM)\)</span>, kde <span class="math inline">\(M\)</span> je kapacita batohu. Popsal jsem ho už v minulém úkolu.</p>
<div class="annotated-code">
<p><span><em>«solver-dpw»=</em></span></p>
<div class="sourceCode" id="solver-dpw"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="solver-dpw-1"><a href="#solver-dpw-1" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> dynamic_programming_w(<span class="op">&amp;</span><span class="kw">self</span>) <span class="op">-&gt;</span> Solution <span class="op">{</span></span>
<span id="solver-dpw-2"><a href="#solver-dpw-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> Instance <span class="op">{</span>m<span class="op">,</span> items<span class="op">,</span> <span class="op">..}</span> <span class="op">=</span> <span class="kw">self</span><span class="op">;</span></span>
<span id="solver-dpw-3"><a href="#solver-dpw-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> next <span class="op">=</span> <span class="pp">vec!</span>[<span class="pp">Solution::</span><span class="kw">default</span>(<span class="kw">self</span>)<span class="op">;</span> <span class="op">*</span>m <span class="kw">as</span> <span class="dt">usize</span> <span class="op">+</span> <span class="dv">1</span>]<span class="op">;</span></span>
<span id="solver-dpw-4"><a href="#solver-dpw-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> last <span class="op">=</span> <span class="pp">vec!</span>[]<span class="op">;</span></span>
<span id="solver-dpw-5"><a href="#solver-dpw-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-dpw-6"><a href="#solver-dpw-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> i <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span>items<span class="op">.</span>len() <span class="op">{</span></span>
<span id="solver-dpw-7"><a href="#solver-dpw-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> (weight<span class="op">,</span> _cost) <span class="op">=</span> items[i]<span class="op">;</span></span>
<span id="solver-dpw-8"><a href="#solver-dpw-8" aria-hidden="true" tabindex="-1"></a>        last<span class="op">.</span>clone_from(<span class="op">&amp;</span>next)<span class="op">;</span></span>
<span id="solver-dpw-9"><a href="#solver-dpw-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-dpw-10"><a href="#solver-dpw-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">for</span> cap <span class="kw">in</span> <span class="dv">0</span> <span class="op">..=</span> <span class="op">*</span>m <span class="kw">as</span> <span class="dt">usize</span> <span class="op">{</span></span>
<span id="solver-dpw-11"><a href="#solver-dpw-11" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> s <span class="op">=</span> <span class="kw">if</span> (cap <span class="kw">as</span> <span class="dt">u32</span>) <span class="op">&lt;</span> weight <span class="op">{</span></span>
<span id="solver-dpw-12"><a href="#solver-dpw-12" aria-hidden="true" tabindex="-1"></a>                    last[cap]</span>
<span id="solver-dpw-13"><a href="#solver-dpw-13" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span id="solver-dpw-14"><a href="#solver-dpw-14" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">let</span> rem_weight <span class="op">=</span> max(<span class="dv">0</span><span class="op">,</span> cap <span class="kw">as</span> <span class="dt">isize</span> <span class="op">-</span> weight <span class="kw">as</span> <span class="dt">isize</span>) <span class="kw">as</span> <span class="dt">usize</span><span class="op">;</span></span>
<span id="solver-dpw-15"><a href="#solver-dpw-15" aria-hidden="true" tabindex="-1"></a>                    max(last[cap]<span class="op">,</span> last[rem_weight]<span class="op">.</span>with(i))</span>
<span id="solver-dpw-16"><a href="#solver-dpw-16" aria-hidden="true" tabindex="-1"></a>                <span class="op">};</span></span>
<span id="solver-dpw-17"><a href="#solver-dpw-17" aria-hidden="true" tabindex="-1"></a>            next[cap] <span class="op">=</span> s<span class="op">;</span></span>
<span id="solver-dpw-18"><a href="#solver-dpw-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="solver-dpw-19"><a href="#solver-dpw-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="solver-dpw-20"><a href="#solver-dpw-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-dpw-21"><a href="#solver-dpw-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>next<span class="op">.</span>last()<span class="op">.</span>unwrap()</span>
<span id="solver-dpw-22"><a href="#solver-dpw-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<p>Následně jsem (pro FPTAS) implementoval dynamické programování s rozkladem podle ceny, které je adaptací algoritmu výše. Narozdíl od předchozího algoritmu je tady výchozí hodnotou v tabulce efektivně nekonečná váha, kterou se snažíme minimalizovat. K reprezentaci řešení s nekonečnou vahou používám přidruženou funkci <code>Solution::overweight</code>, která vrátí neplatné řešení s váhou <span class="math inline">\(2^{32} - 1\)</span>. Pokud na něj v průběhu výpočtu algoritmus narazí, předá jej dál jako <code>Solution::default</code> (vždy v nejlevějším sloupci DP tabulky, tedy <code>last[0]</code>), aby při přičtení váhy uvažovaného předmětu nedošlo k přetečení.</p>
<p>O výběr řešení minimální váhy se stará funkce <code>max</code>, neboť implementace uspořádání pro typ <code>Solution</code> řadí nejprve vzestupně podle ceny a následně sestupně podle váhy. V tomto případě porovnáváme vždy dvě řešení stejných cen (a nebo je <code>last[cap]</code> neplatné řešení s nadváhou, které má cenu <span class="math inline">\(0\)</span>).</p>
<div class="annotated-code">
<p><span><em>«solver-dpc»=</em></span></p>
<div class="sourceCode" id="solver-dpc"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="solver-dpc-1"><a href="#solver-dpc-1" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> dynamic_programming_c(<span class="op">&amp;</span><span class="kw">self</span>) <span class="op">-&gt;</span> Solution <span class="op">{</span></span>
<span id="solver-dpc-2"><a href="#solver-dpc-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> Instance <span class="op">{</span>items<span class="op">,</span> <span class="op">..}</span> <span class="op">=</span> <span class="kw">self</span><span class="op">;</span></span>
<span id="solver-dpc-3"><a href="#solver-dpc-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> max_profit <span class="op">=</span> items<span class="op">.</span>iter()<span class="op">.</span>map(<span class="op">|</span>(_<span class="op">,</span> c)<span class="op">|</span> <span class="op">*</span>c)<span class="op">.</span>max()<span class="op">.</span>unwrap() <span class="kw">as</span> <span class="dt">usize</span><span class="op">;</span></span>
<span id="solver-dpc-4"><a href="#solver-dpc-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> next <span class="op">=</span> <span class="pp">vec!</span>[<span class="pp">Solution::</span>overweight(<span class="kw">self</span>)<span class="op">;</span> max_profit <span class="op">*</span> items<span class="op">.</span>len() <span class="op">+</span> <span class="dv">1</span>]<span class="op">;</span></span>
<span id="solver-dpc-5"><a href="#solver-dpc-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> last <span class="op">=</span> <span class="pp">vec!</span>[]<span class="op">;</span></span>
<span id="solver-dpc-6"><a href="#solver-dpc-6" aria-hidden="true" tabindex="-1"></a>    next[<span class="dv">0</span>] <span class="op">=</span> <span class="pp">Solution::</span><span class="kw">default</span>(<span class="kw">self</span>)<span class="op">;</span></span>
<span id="solver-dpc-7"><a href="#solver-dpc-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-dpc-8"><a href="#solver-dpc-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> i <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span>items<span class="op">.</span>len() <span class="op">{</span></span>
<span id="solver-dpc-9"><a href="#solver-dpc-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> (_weight<span class="op">,</span> cost) <span class="op">=</span> items[i]<span class="op">;</span></span>
<span id="solver-dpc-10"><a href="#solver-dpc-10" aria-hidden="true" tabindex="-1"></a>        last<span class="op">.</span>clone_from(<span class="op">&amp;</span>next)<span class="op">;</span></span>
<span id="solver-dpc-11"><a href="#solver-dpc-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-dpc-12"><a href="#solver-dpc-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">for</span> cap <span class="kw">in</span> <span class="dv">1</span> <span class="op">..=</span> max_profit <span class="op">*</span> items<span class="op">.</span>len() <span class="op">{</span></span>
<span id="solver-dpc-13"><a href="#solver-dpc-13" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> s <span class="op">=</span> <span class="kw">if</span> (cap <span class="kw">as</span> <span class="dt">u32</span>) <span class="op">&lt;</span> cost <span class="op">{</span></span>
<span id="solver-dpc-14"><a href="#solver-dpc-14" aria-hidden="true" tabindex="-1"></a>                    last[cap]</span>
<span id="solver-dpc-15"><a href="#solver-dpc-15" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span id="solver-dpc-16"><a href="#solver-dpc-16" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">let</span> rem_cost <span class="op">=</span> (cap <span class="kw">as</span> <span class="dt">isize</span> <span class="op">-</span> cost <span class="kw">as</span> <span class="dt">isize</span>) <span class="kw">as</span> <span class="dt">usize</span><span class="op">;</span></span>
<span id="solver-dpc-17"><a href="#solver-dpc-17" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">let</span> lightest_for_cost <span class="op">=</span> <span class="kw">if</span> last[rem_cost]<span class="op">.</span>weight <span class="op">==</span> <span class="dt">u32</span><span class="pp">::</span><span class="cn">MAX</span> <span class="op">{</span></span>
<span id="solver-dpc-18"><a href="#solver-dpc-18" aria-hidden="true" tabindex="-1"></a>                        last[<span class="dv">0</span>] <span class="co">// replace the overweight solution with the empty one</span></span>
<span id="solver-dpc-19"><a href="#solver-dpc-19" aria-hidden="true" tabindex="-1"></a>                    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span> last[rem_cost] <span class="op">};</span></span>
<span id="solver-dpc-20"><a href="#solver-dpc-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-dpc-21"><a href="#solver-dpc-21" aria-hidden="true" tabindex="-1"></a>                    max(last[cap]<span class="op">,</span> lightest_for_cost<span class="op">.</span>with(i))</span>
<span id="solver-dpc-22"><a href="#solver-dpc-22" aria-hidden="true" tabindex="-1"></a>                <span class="op">};</span></span>
<span id="solver-dpc-23"><a href="#solver-dpc-23" aria-hidden="true" tabindex="-1"></a>            next[cap] <span class="op">=</span> s<span class="op">;</span></span>
<span id="solver-dpc-24"><a href="#solver-dpc-24" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="solver-dpc-25"><a href="#solver-dpc-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="solver-dpc-26"><a href="#solver-dpc-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-dpc-27"><a href="#solver-dpc-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>next<span class="op">.</span>iter()<span class="op">.</span>filter(<span class="op">|</span>sln<span class="op">|</span> sln<span class="op">.</span>weight <span class="op">&lt;=</span> <span class="kw">self</span><span class="op">.</span>m)<span class="op">.</span>last()<span class="op">.</span>unwrap()</span>
<span id="solver-dpc-28"><a href="#solver-dpc-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<h4 id="fptas">FPTAS</h4>
<p>FPTAS algoritmus přeškáluje ceny předmětů a následně spustí dynamické programování s rozkladem podle ceny na upravenou instanci problému. V řešení stačí opravit referenci výchozí instance (<code>inst: self</code>) a přepočíst cenu podle vypočítané konfigurace, samotné indexy předmětů se škálováním nemění.</p>
<div class="annotated-code">
<p><span><em>«solver-fptas»=</em></span></p>
<div class="sourceCode" id="solver-fptas"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="solver-fptas-1"><a href="#solver-fptas-1" aria-hidden="true" tabindex="-1"></a><span class="co">// </span><span class="al">TODO</span><span class="co">: are items heavier than the knapsack capacity a problem? if so, we</span></span>
<span id="solver-fptas-2"><a href="#solver-fptas-2" aria-hidden="true" tabindex="-1"></a><span class="co">// can just zero them out</span></span>
<span id="solver-fptas-3"><a href="#solver-fptas-3" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> fptas(<span class="op">&amp;</span><span class="kw">self</span><span class="op">,</span> eps<span class="op">:</span> <span class="dt">f64</span>) <span class="op">-&gt;</span> Solution <span class="op">{</span></span>
<span id="solver-fptas-4"><a href="#solver-fptas-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> Instance <span class="op">{</span>m<span class="op">:</span> _<span class="op">,</span> items<span class="op">,</span> <span class="op">..}</span> <span class="op">=</span> <span class="kw">self</span><span class="op">;</span></span>
<span id="solver-fptas-5"><a href="#solver-fptas-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> max_profit <span class="op">=</span> items<span class="op">.</span>iter()<span class="op">.</span>map(<span class="op">|</span>(_<span class="op">,</span> c)<span class="op">|</span> <span class="op">*</span>c)<span class="op">.</span>max()<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="solver-fptas-6"><a href="#solver-fptas-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> scaling_factor <span class="op">=</span> eps <span class="op">*</span> max_profit <span class="kw">as</span> <span class="dt">f64</span> <span class="op">/</span> items<span class="op">.</span>len() <span class="kw">as</span> <span class="dt">f64</span><span class="op">;</span></span>
<span id="solver-fptas-7"><a href="#solver-fptas-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> items<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span>(<span class="dt">u32</span><span class="op">,</span> <span class="dt">u32</span>)<span class="op">&gt;</span> <span class="op">=</span> items<span class="op">.</span>iter()<span class="op">.</span>map(<span class="op">|</span>(w<span class="op">,</span> c)<span class="op">|</span></span>
<span id="solver-fptas-8"><a href="#solver-fptas-8" aria-hidden="true" tabindex="-1"></a>        (<span class="op">*</span>w<span class="op">,</span> (<span class="op">*</span>c <span class="kw">as</span> <span class="dt">f64</span> <span class="op">/</span> scaling_factor)<span class="op">.</span>floor() <span class="kw">as</span> <span class="dt">u32</span></span>
<span id="solver-fptas-9"><a href="#solver-fptas-9" aria-hidden="true" tabindex="-1"></a>    ))<span class="op">.</span>collect()<span class="op">;</span></span>
<span id="solver-fptas-10"><a href="#solver-fptas-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="solver-fptas-11"><a href="#solver-fptas-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> iso <span class="op">=</span> Instance <span class="op">{</span> items<span class="op">,</span> <span class="op">..*</span><span class="kw">self</span> <span class="op">};</span></span>
<span id="solver-fptas-12"><a href="#solver-fptas-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> sln <span class="op">=</span> iso<span class="op">.</span>dynamic_programming_c()<span class="op">;</span></span>
<span id="solver-fptas-13"><a href="#solver-fptas-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> cost <span class="op">=</span> (<span class="dv">0usize</span><span class="op">..</span>)<span class="op">.</span>zip(<span class="kw">self</span><span class="op">.</span>items<span class="op">.</span>iter())<span class="op">.</span>fold(<span class="dv">0</span><span class="op">,</span> <span class="op">|</span>acc<span class="op">,</span> (i<span class="op">,</span> (_w<span class="op">,</span> c))<span class="op">|</span></span>
<span id="solver-fptas-14"><a href="#solver-fptas-14" aria-hidden="true" tabindex="-1"></a>        acc <span class="op">+</span> sln<span class="op">.</span>cfg[i] <span class="kw">as</span> <span class="dt">u32</span> <span class="op">*</span> c</span>
<span id="solver-fptas-15"><a href="#solver-fptas-15" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="solver-fptas-16"><a href="#solver-fptas-16" aria-hidden="true" tabindex="-1"></a>    Solution <span class="op">{</span> inst<span class="op">:</span> <span class="kw">self</span><span class="op">,</span> cost<span class="op">,</span> <span class="op">..</span>sln <span class="op">}</span></span>
<span id="solver-fptas-17"><a href="#solver-fptas-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<h2 id="závěr">Závěr</h2>
<p>Zadání jsem se znovu pokusil splnit v celém rozsahu. Implementoval jsem všechny zadané algoritmy, k nim navíc dynamické programování s rozkladem podle kapacity. Díky nové implementaci měření jsem zachytil podrobné statistiky ze všech experimentů, včetně středních odchylek, průměrů, mediánů a dalších statistických veličin doby běhu jednotlivých algoritmů na různých datových sadách, ale také průměrné a maximální chyby všech výsledků.</p>
<p>Podrobné reporty kombinace algoritmů, datových sad a velikostí instancí, jakožto i přehledy výkonu algoritmů na datových sadách napříč všemi velikostmi instancí jsou zachycené zvlášť. Archív odevzdaný na Moodle je obsahuje v podsložce <code>criterion</code>, jsou také dostupné online (např. <a href="https://viluon.me/ni-kop/criterion/ZKC-redux/report/">přehled výkonu <code>redux</code> na ZKC</a>).</p>
<h2 id="appendix">Appendix</h2>
<p>Dodatek obsahuje nezajímavé části implementace, jako je import symbolů z knihoven.</p>
<div class="fold-block">
<button class="btn btn-outline-primary btn-sm fold-toggle" type="button" data-toggle="collapse" data-target="#imports-container" aria-controls="imports-container">&lt;&lt;imports&gt;&gt;=</button>
<div id="imports-container" class="collapse">
<div class="sourceCode" id="imports" style="max-height: 50vh"><pre class="sourceCode rust bootstrap-fold overflow-auto"><code class="sourceCode rust"><span id="imports-1"><a href="#imports-1" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="pp">std::</span><span class="op">{</span>cmp<span class="op">,</span> <span class="pp">cmp::</span>max<span class="op">,</span></span>
<span id="imports-2"><a href="#imports-2" aria-hidden="true" tabindex="-1"></a>    <span class="pp">ops::</span>Range<span class="op">,</span></span>
<span id="imports-3"><a href="#imports-3" aria-hidden="true" tabindex="-1"></a>    <span class="pp">iter::</span>Filter<span class="op">,</span></span>
<span id="imports-4"><a href="#imports-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">str</span><span class="pp">::</span><span class="bu">FromStr</span><span class="op">,</span></span>
<span id="imports-5"><a href="#imports-5" aria-hidden="true" tabindex="-1"></a>    <span class="pp">io::</span><span class="op">{</span><span class="bu">BufRead</span><span class="op">,</span> BufReader<span class="op">},</span></span>
<span id="imports-6"><a href="#imports-6" aria-hidden="true" tabindex="-1"></a>    <span class="pp">collections::</span><span class="op">{</span>BTreeMap<span class="op">,</span> HashMap<span class="op">},</span></span>
<span id="imports-7"><a href="#imports-7" aria-hidden="true" tabindex="-1"></a>    <span class="pp">fs::</span><span class="op">{</span>read_dir<span class="op">,</span> File<span class="op">,</span> ReadDir<span class="op">,</span> DirEntry<span class="op">},</span></span>
<span id="imports-8"><a href="#imports-8" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="imports-9"><a href="#imports-9" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="pp">anyhow::</span><span class="op">{</span>Context<span class="op">,</span> <span class="dt">Result</span><span class="op">,</span> anyhow<span class="op">};</span></span>
<span id="imports-10"><a href="#imports-10" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="pp">bitvec::prelude::</span>BitArr<span class="op">;</span></span>
<span id="imports-11"><a href="#imports-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="imports-12"><a href="#imports-12" aria-hidden="true" tabindex="-1"></a><span class="at">#[</span>cfg<span class="at">(</span>test<span class="at">)]</span></span>
<span id="imports-13"><a href="#imports-13" aria-hidden="true" tabindex="-1"></a><span class="at">#[</span>macro_use<span class="at">(</span>quickcheck<span class="at">)]</span></span>
<span id="imports-14"><a href="#imports-14" aria-hidden="true" tabindex="-1"></a><span class="kw">extern</span> <span class="kw">crate</span> quickcheck_macros<span class="op">;</span></span></code></pre></div>
</div>
</div>
<p>Zpracování vstupu zajišťuje jednoduchý parser pracující řádek po řádku. Pro testy je tu parser formátu souborů s optimálními řešeními.</p>
<div class="fold-block">
<button class="btn btn-outline-primary btn-sm fold-toggle" type="button" data-toggle="collapse" data-target="#parser-container" aria-controls="parser-container">&lt;&lt;parser&gt;&gt;=</button>
<div id="parser-container" class="collapse">
<div class="sourceCode" id="parser" style="max-height: 50vh"><pre class="sourceCode rust bootstrap-fold overflow-auto"><code class="sourceCode rust"><span id="parser-1"><a href="#parser-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;&lt;</span>boilerplate<span class="op">&gt;&gt;</span></span>
<span id="parser-2"><a href="#parser-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="parser-3"><a href="#parser-3" aria-hidden="true" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">fn</span> parse_line<span class="op">&lt;</span>T<span class="op">&gt;</span>(stream<span class="op">:</span> <span class="op">&amp;</span><span class="kw">mut</span> T) <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span><span class="dt">Option</span><span class="op">&lt;</span>Instance<span class="op">&gt;&gt;</span> <span class="kw">where</span> T<span class="op">:</span> <span class="bu">BufRead</span> <span class="op">{</span></span>
<span id="parser-4"><a href="#parser-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> input <span class="op">=</span> <span class="dt">String</span><span class="pp">::</span>new()<span class="op">;</span></span>
<span id="parser-5"><a href="#parser-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> stream<span class="op">.</span>read_line(<span class="op">&amp;</span><span class="kw">mut</span> input)<span class="op">?</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">{</span></span>
<span id="parser-6"><a href="#parser-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="cn">Ok</span>(<span class="cn">None</span>)</span>
<span id="parser-7"><a href="#parser-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="parser-8"><a href="#parser-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="parser-9"><a href="#parser-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span>  numbers <span class="op">=</span> input<span class="op">.</span>split_whitespace()<span class="op">;</span></span>
<span id="parser-10"><a href="#parser-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> id <span class="op">=</span> numbers<span class="op">.</span>parse_next()<span class="op">?;</span></span>
<span id="parser-11"><a href="#parser-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span>  n <span class="op">=</span> numbers<span class="op">.</span>parse_next()<span class="op">?;</span></span>
<span id="parser-12"><a href="#parser-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span>  m <span class="op">=</span> numbers<span class="op">.</span>parse_next()<span class="op">?;</span></span>
<span id="parser-13"><a href="#parser-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="parser-14"><a href="#parser-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> items<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span>(<span class="dt">u32</span><span class="op">,</span> <span class="dt">u32</span>)<span class="op">&gt;</span> <span class="op">=</span> <span class="dt">Vec</span><span class="pp">::</span>with_capacity(n)<span class="op">;</span></span>
<span id="parser-15"><a href="#parser-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> _ <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span>n <span class="op">{</span></span>
<span id="parser-16"><a href="#parser-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> w <span class="op">=</span> numbers<span class="op">.</span>parse_next()<span class="op">?;</span></span>
<span id="parser-17"><a href="#parser-17" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> c <span class="op">=</span> numbers<span class="op">.</span>parse_next()<span class="op">?;</span></span>
<span id="parser-18"><a href="#parser-18" aria-hidden="true" tabindex="-1"></a>        items<span class="op">.</span>push((w<span class="op">,</span> c))<span class="op">;</span></span>
<span id="parser-19"><a href="#parser-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="parser-20"><a href="#parser-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="parser-21"><a href="#parser-21" aria-hidden="true" tabindex="-1"></a>    <span class="cn">Ok</span>(<span class="cn">Some</span>(Instance <span class="op">{</span>id<span class="op">,</span> m<span class="op">,</span> items<span class="op">}</span>))</span>
<span id="parser-22"><a href="#parser-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="parser-23"><a href="#parser-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="parser-24"><a href="#parser-24" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> parse_solution_line<span class="op">&lt;</span>T<span class="op">&gt;</span>(<span class="kw">mut</span> stream<span class="op">:</span> T) <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span><span class="dt">Option</span><span class="op">&lt;</span>OptimalSolution<span class="op">&gt;&gt;</span> <span class="kw">where</span> T<span class="op">:</span> <span class="bu">BufRead</span> <span class="op">{</span></span>
<span id="parser-25"><a href="#parser-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> input <span class="op">=</span> <span class="dt">String</span><span class="pp">::</span>new()<span class="op">;</span></span>
<span id="parser-26"><a href="#parser-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> stream<span class="op">.</span>read_line(<span class="op">&amp;</span><span class="kw">mut</span> input)<span class="op">?</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">{</span></span>
<span id="parser-27"><a href="#parser-27" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="cn">Ok</span>(<span class="cn">None</span>)</span>
<span id="parser-28"><a href="#parser-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="parser-29"><a href="#parser-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="parser-30"><a href="#parser-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span>    numbers <span class="op">=</span> input<span class="op">.</span>split_whitespace()<span class="op">;</span></span>
<span id="parser-31"><a href="#parser-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span>   id <span class="op">=</span> numbers<span class="op">.</span>parse_next()<span class="op">?;</span></span>
<span id="parser-32"><a href="#parser-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span>    n <span class="op">=</span> numbers<span class="op">.</span>parse_next()<span class="op">?;</span></span>
<span id="parser-33"><a href="#parser-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> cost <span class="op">=</span> numbers<span class="op">.</span>parse_next()<span class="op">?;</span></span>
<span id="parser-34"><a href="#parser-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="parser-35"><a href="#parser-35" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> items <span class="op">=</span> <span class="pp">Config::</span><span class="kw">default</span>()<span class="op">;</span></span>
<span id="parser-36"><a href="#parser-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> i <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span>n <span class="op">{</span></span>
<span id="parser-37"><a href="#parser-37" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> a<span class="op">:</span> <span class="dt">u8</span> <span class="op">=</span> numbers<span class="op">.</span>parse_next()<span class="op">?;</span></span>
<span id="parser-38"><a href="#parser-38" aria-hidden="true" tabindex="-1"></a>        items<span class="op">.</span>set(i<span class="op">,</span> a <span class="op">==</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="parser-39"><a href="#parser-39" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="parser-40"><a href="#parser-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="parser-41"><a href="#parser-41" aria-hidden="true" tabindex="-1"></a>    <span class="cn">Ok</span>(<span class="cn">Some</span>(OptimalSolution <span class="op">{</span>id<span class="op">,</span> cost<span class="op">,</span> cfg<span class="op">:</span> items<span class="op">}</span>))</span>
<span id="parser-42"><a href="#parser-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="parser-43"><a href="#parser-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="parser-44"><a href="#parser-44" aria-hidden="true" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">fn</span> load_solutions(set<span class="op">:</span> <span class="op">&amp;</span><span class="dt">str</span>) <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span>HashMap<span class="op">&lt;</span>(<span class="dt">u32</span><span class="op">,</span> <span class="dt">i32</span>)<span class="op">,</span> OptimalSolution<span class="op">&gt;&gt;</span> <span class="op">{</span></span>
<span id="parser-45"><a href="#parser-45" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> solutions <span class="op">=</span> <span class="pp">HashMap::</span>new()<span class="op">;</span></span>
<span id="parser-46"><a href="#parser-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="parser-47"><a href="#parser-47" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> files <span class="op">=</span> read_dir(<span class="st">&quot;../data/constructive/&quot;</span>)<span class="op">?</span></span>
<span id="parser-48"><a href="#parser-48" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span>filter(<span class="op">|</span>res<span class="op">|</span> res<span class="op">.</span>as_ref()<span class="op">.</span>ok()<span class="op">.</span>filter(<span class="op">|</span>f<span class="op">|</span> <span class="op">{</span></span>
<span id="parser-49"><a href="#parser-49" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> name <span class="op">=</span> f<span class="op">.</span>file_name()<span class="op">.</span>into_string()<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="parser-50"><a href="#parser-50" aria-hidden="true" tabindex="-1"></a>            f<span class="op">.</span>file_type()<span class="op">.</span>unwrap()<span class="op">.</span>is_file() <span class="op">&amp;&amp;</span></span>
<span id="parser-51"><a href="#parser-51" aria-hidden="true" tabindex="-1"></a>            name<span class="op">.</span>starts_with(set) <span class="op">&amp;&amp;</span></span>
<span id="parser-52"><a href="#parser-52" aria-hidden="true" tabindex="-1"></a>            name<span class="op">.</span>ends_with(<span class="st">&quot;_sol.dat&quot;</span>)</span>
<span id="parser-53"><a href="#parser-53" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span>)<span class="op">.</span>is_some())<span class="op">;</span></span>
<span id="parser-54"><a href="#parser-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="parser-55"><a href="#parser-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> file <span class="kw">in</span> files <span class="op">{</span></span>
<span id="parser-56"><a href="#parser-56" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> file <span class="op">=</span> file<span class="op">?;</span></span>
<span id="parser-57"><a href="#parser-57" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> n <span class="op">=</span> file<span class="op">.</span>file_name()<span class="op">.</span>into_string()<span class="op">.</span>unwrap()[set<span class="op">.</span>len()<span class="op">..</span>]<span class="op">.</span>split(<span class="ch">&#39;_&#39;</span>)<span class="op">.</span>nth(<span class="dv">0</span>)<span class="op">.</span>unwrap()<span class="op">.</span>parse()<span class="op">?;</span></span>
<span id="parser-58"><a href="#parser-58" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="kw">mut</span> stream <span class="op">=</span> <span class="pp">BufReader::</span>new(<span class="pp">File::</span>open(file<span class="op">.</span>path())<span class="op">?</span>)<span class="op">;</span></span>
<span id="parser-59"><a href="#parser-59" aria-hidden="true" tabindex="-1"></a>        <span class="kw">while</span> <span class="kw">let</span> <span class="cn">Some</span>(opt) <span class="op">=</span> parse_solution_line(<span class="op">&amp;</span><span class="kw">mut</span> stream)<span class="op">?</span> <span class="op">{</span></span>
<span id="parser-60"><a href="#parser-60" aria-hidden="true" tabindex="-1"></a>            solutions<span class="op">.</span>insert((n<span class="op">,</span> opt<span class="op">.</span>id)<span class="op">,</span> opt)<span class="op">;</span></span>
<span id="parser-61"><a href="#parser-61" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="parser-62"><a href="#parser-62" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="parser-63"><a href="#parser-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="parser-64"><a href="#parser-64" aria-hidden="true" tabindex="-1"></a>    <span class="cn">Ok</span>(solutions)</span>
<span id="parser-65"><a href="#parser-65" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
</div>
<p>Trait <code>Boilerplate</code> definuje funkci <code>parse_next</code> pro zkrácení zápisu zpracování vstupu.</p>
<div class="fold-block">
<button class="btn btn-outline-primary btn-sm fold-toggle" type="button" data-toggle="collapse" data-target="#boilerplate-container" aria-controls="boilerplate-container">&lt;&lt;boilerplate&gt;&gt;=</button>
<div id="boilerplate-container" class="collapse">
<div class="sourceCode" id="boilerplate" style="max-height: 50vh"><pre class="sourceCode rust bootstrap-fold overflow-auto"><code class="sourceCode rust"><span id="boilerplate-1"><a href="#boilerplate-1" aria-hidden="true" tabindex="-1"></a><span class="kw">trait</span> Boilerplate <span class="op">{</span></span>
<span id="boilerplate-2"><a href="#boilerplate-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> parse_next<span class="op">&lt;</span>T<span class="op">:</span> <span class="bu">FromStr</span><span class="op">&gt;</span>(<span class="op">&amp;</span><span class="kw">mut</span> <span class="kw">self</span>) <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span>T<span class="op">&gt;</span></span>
<span id="boilerplate-3"><a href="#boilerplate-3" aria-hidden="true" tabindex="-1"></a>      <span class="kw">where</span> <span class="op">&lt;</span>T <span class="kw">as</span> <span class="bu">FromStr</span><span class="op">&gt;</span><span class="pp">::</span><span class="cn">Err</span><span class="op">:</span> <span class="pp">std::error::</span><span class="bu">Error</span> <span class="op">+</span> <span class="bu">Send</span> <span class="op">+</span> <span class="bu">Sync</span> <span class="op">+</span> <span class="ot">&#39;static</span><span class="op">;</span></span>
<span id="boilerplate-4"><a href="#boilerplate-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="boilerplate-5"><a href="#boilerplate-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="boilerplate-6"><a href="#boilerplate-6" aria-hidden="true" tabindex="-1"></a><span class="kw">impl</span> Boilerplate <span class="kw">for</span> <span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>SplitWhitespace<span class="op">&lt;</span><span class="ot">&#39;_</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="boilerplate-7"><a href="#boilerplate-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> parse_next<span class="op">&lt;</span>T<span class="op">:</span> <span class="bu">FromStr</span><span class="op">&gt;</span>(<span class="op">&amp;</span><span class="kw">mut</span> <span class="kw">self</span>) <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span>T<span class="op">&gt;</span></span>
<span id="boilerplate-8"><a href="#boilerplate-8" aria-hidden="true" tabindex="-1"></a>      <span class="kw">where</span> <span class="op">&lt;</span>T <span class="kw">as</span> <span class="bu">FromStr</span><span class="op">&gt;</span><span class="pp">::</span><span class="cn">Err</span><span class="op">:</span> <span class="pp">std::error::</span><span class="bu">Error</span> <span class="op">+</span> <span class="bu">Send</span> <span class="op">+</span> <span class="bu">Sync</span> <span class="op">+</span> <span class="ot">&#39;static</span> <span class="op">{</span></span>
<span id="boilerplate-9"><a href="#boilerplate-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="dt">str</span> <span class="op">=</span> <span class="kw">self</span><span class="op">.</span>next()<span class="op">.</span>ok_or_else(<span class="op">||</span> <span class="pp">anyhow!</span>(<span class="st">&quot;unexpected end of input&quot;</span>))<span class="op">?;</span></span>
<span id="boilerplate-10"><a href="#boilerplate-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">str</span><span class="op">.</span><span class="pp">parse::</span><span class="op">&lt;</span>T<span class="op">&gt;</span>()</span>
<span id="boilerplate-11"><a href="#boilerplate-11" aria-hidden="true" tabindex="-1"></a>           <span class="op">.</span>with_context(<span class="op">||</span> <span class="pp">format!</span>(<span class="st">&quot;cannot parse {}&quot;</span><span class="op">,</span> <span class="dt">str</span>))</span>
<span id="boilerplate-12"><a href="#boilerplate-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="boilerplate-13"><a href="#boilerplate-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
</div>
<h3 id="měření-výkonu">Měření výkonu</h3>
<p>Benchmark postavený na knihovně <a href="https://crates.io/crates/criterion"><code>Criterion.rs</code></a> se nachází v souboru níže.</p>
<div class="fold-block">
<button class="btn btn-outline-primary btn-sm fold-toggle" type="button" data-toggle="collapse" data-target="#solver-slash-benches-slash-bench-dot-rs-container" aria-controls="solver-slash-benches-slash-bench-dot-rs-container">&lt;&lt;solver/benches/bench.rs&gt;&gt;=</button>
<div id="solver-slash-benches-slash-bench-dot-rs-container" class="collapse">
<div class="sourceCode" id="cb3" data-file="solver/benches/bench.rs" style="max-height: 50vh"><pre class="sourceCode rust bootstrap-fold overflow-auto"><code class="sourceCode rust"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">extern</span> <span class="kw">crate</span> solver<span class="op">;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="pp">solver::</span><span class="op">*;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="pp">anyhow::</span><span class="op">{</span><span class="dt">Result</span><span class="op">,</span> anyhow<span class="op">};</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="pp">std::</span><span class="op">{</span><span class="pp">collections::</span>HashMap<span class="op">,</span> <span class="pp">fs::</span>File<span class="op">,</span> <span class="pp">io::</span><span class="op">{</span>BufReader<span class="op">,</span> <span class="bu">Write</span><span class="op">},</span> <span class="pp">ops::</span>Range<span class="op">,</span> <span class="pp">time::</span>Duration<span class="op">};</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="pp">criterion::</span><span class="op">{</span>criterion_group<span class="op">,</span> criterion_main<span class="op">,</span> Criterion<span class="op">,</span> BenchmarkId<span class="op">};</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> full(c<span class="op">:</span> <span class="op">&amp;</span><span class="kw">mut</span> Criterion) <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span>()<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> algs <span class="op">=</span> get_algorithms()<span class="op">;</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> solutions <span class="op">=</span> <span class="pp">HashMap::</span>new()<span class="op">;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> ranges <span class="op">=</span> <span class="pp">HashMap::</span>from([</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;bb&quot;</span><span class="op">,</span>     <span class="dv">0</span><span class="op">..=</span><span class="dv">25</span>)<span class="op">,</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;dpw&quot;</span><span class="op">,</span>    <span class="dv">0</span><span class="op">..=</span><span class="dv">32</span>)<span class="op">,</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;dpc&quot;</span><span class="op">,</span>    <span class="dv">0</span><span class="op">..=</span><span class="dv">20</span>)<span class="op">,</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;fptas1&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">..=</span><span class="dv">32</span>)<span class="op">,</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;fptas2&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">..=</span><span class="dv">22</span>)<span class="op">,</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;greedy&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">..=</span><span class="dv">32</span>)<span class="op">,</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;redux&quot;</span><span class="op">,</span>  <span class="dv">0</span><span class="op">..=</span><span class="dv">32</span>)<span class="op">,</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    ])<span class="op">;</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> input<span class="op">:</span> HashMap<span class="op">&lt;</span>(<span class="op">&amp;</span><span class="dt">str</span><span class="op">,</span> <span class="dt">u32</span>)<span class="op">,</span> <span class="dt">Vec</span><span class="op">&lt;</span>Instance<span class="op">&gt;&gt;</span> <span class="op">=</span> <span class="pp">HashMap::</span>new()<span class="op">;</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> ns <span class="op">=</span> [<span class="dv">4</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">27</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">32</span>]<span class="op">;</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> sets <span class="op">=</span> [<span class="st">&quot;NK&quot;</span><span class="op">,</span> <span class="st">&quot;ZKC&quot;</span><span class="op">,</span> <span class="st">&quot;ZKW&quot;</span>]<span class="op">;</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> set <span class="kw">in</span> sets <span class="op">{</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>        solutions<span class="op">.</span>insert(set<span class="op">,</span> load_solutions(set)<span class="op">?</span>)<span class="op">;</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>        <span class="kw">for</span> n <span class="kw">in</span> ns <span class="op">{</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>            input<span class="op">.</span>insert((set<span class="op">,</span> n)<span class="op">,</span> load_input(set<span class="op">,</span> n <span class="op">..</span> n <span class="op">+</span> <span class="dv">1</span>)<span class="op">?</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span>into_iter()</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span>rev()</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span>take(<span class="dv">100</span>)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span>collect()</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>            )<span class="op">;</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    benchmark(algs<span class="op">,</span> c<span class="op">,</span> <span class="op">&amp;</span>ns<span class="op">,</span> <span class="op">&amp;</span>sets<span class="op">,</span> ranges<span class="op">,</span> solutions<span class="op">,</span> input)<span class="op">?;</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>    <span class="cn">Ok</span>(())</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> benchmark(</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>    algs<span class="op">:</span> <span class="pp">std::collections::</span>BTreeMap<span class="op">&lt;&amp;</span><span class="dt">str</span><span class="op">,</span> <span class="kw">fn</span>(<span class="op">&amp;</span>Instance) <span class="op">-&gt;</span> Solution<span class="op">&gt;,</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>    c<span class="op">:</span> <span class="op">&amp;</span><span class="kw">mut</span> Criterion<span class="op">,</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>    ns<span class="op">:</span> <span class="op">&amp;</span>[<span class="dt">u32</span>]<span class="op">,</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>    sets<span class="op">:</span> <span class="op">&amp;</span>[<span class="op">&amp;</span><span class="ot">&#39;static</span> <span class="dt">str</span>]<span class="op">,</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>    ranges<span class="op">:</span> HashMap<span class="op">&lt;&amp;</span><span class="dt">str</span><span class="op">,</span> <span class="pp">std::ops::</span>RangeInclusive<span class="op">&lt;</span><span class="dt">u32</span><span class="op">&gt;&gt;,</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>    solutions<span class="op">:</span> HashMap<span class="op">&lt;&amp;</span><span class="dt">str</span><span class="op">,</span> HashMap<span class="op">&lt;</span>(<span class="dt">u32</span><span class="op">,</span> <span class="dt">i32</span>)<span class="op">,</span> OptimalSolution<span class="op">&gt;&gt;,</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>    input<span class="op">:</span> HashMap<span class="op">&lt;</span>(<span class="op">&amp;</span><span class="dt">str</span><span class="op">,</span> <span class="dt">u32</span>)<span class="op">,</span> <span class="dt">Vec</span><span class="op">&lt;</span>Instance<span class="op">&gt;&gt;</span></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span>()<span class="op">,</span> <span class="pp">anyhow::</span><span class="bu">Error</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>    <span class="cn">Ok</span>(<span class="kw">for</span> set <span class="kw">in</span> sets <span class="op">{</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>        <span class="kw">for</span> (name<span class="op">,</span> alg) <span class="kw">in</span> algs<span class="op">.</span>iter() <span class="op">{</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> <span class="kw">mut</span> group <span class="op">=</span> c<span class="op">.</span>benchmark_group(<span class="pp">format!</span>(<span class="st">&quot;{}-{}&quot;</span><span class="op">,</span> set<span class="op">,</span> name))<span class="op">;</span></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>            group<span class="op">.</span>sample_size(<span class="dv">10</span>)<span class="op">.</span>warm_up_time(<span class="pp">Duration::</span>from_millis(<span class="dv">200</span>))<span class="op">;</span></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>            <span class="kw">for</span> n <span class="kw">in</span> ns <span class="op">{</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>                <span class="kw">if</span> <span class="op">!</span>ranges<span class="op">.</span>get(<span class="op">*</span>name)<span class="op">.</span>filter(<span class="op">|</span>r<span class="op">|</span> r<span class="op">.</span>contains(<span class="op">&amp;</span>n))<span class="op">.</span>is_some()</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>                <span class="op">||</span> (<span class="op">*</span>name <span class="op">==</span> <span class="st">&quot;bb&quot;</span> <span class="op">&amp;&amp;</span> <span class="op">*</span>n <span class="op">&gt;</span> <span class="dv">22</span> <span class="op">&amp;&amp;</span> <span class="op">*</span>set <span class="op">==</span> <span class="st">&quot;ZKW&quot;</span>) <span class="op">{</span></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">continue</span><span class="op">;</span></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>                <span class="kw">let</span> (max<span class="op">,</span> avg<span class="op">,</span> nonzero_n) <span class="op">=</span></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>                    measure(<span class="op">&amp;</span><span class="kw">mut</span> group<span class="op">,</span> <span class="op">*</span>alg<span class="op">,</span> <span class="op">&amp;</span>solutions[set]<span class="op">,</span> <span class="op">*</span>n<span class="op">,</span> <span class="op">&amp;</span>input[<span class="op">&amp;</span>(<span class="op">*</span>set<span class="op">,</span> <span class="op">*</span>n)])<span class="op">;</span></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>                <span class="pp">eprintln!</span>(<span class="st">&quot;max: {}, avg: {}, n: {} vs real n: {}&quot;</span><span class="op">,</span> max<span class="op">,</span> avg<span class="op">,</span> nonzero_n<span class="op">,</span> n)<span class="op">;</span></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>                <span class="kw">let</span> avg <span class="op">=</span> avg <span class="op">/</span> nonzero_n <span class="kw">as</span> <span class="dt">f64</span><span class="op">;</span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>                <span class="kw">let</span> <span class="kw">mut</span> file <span class="op">=</span> <span class="pp">File::</span>create(<span class="pp">format!</span>(<span class="st">&quot;../docs/measurements/{}_{}_{}.txt&quot;</span><span class="op">,</span> set<span class="op">,</span> name<span class="op">,</span> n))<span class="op">?;</span></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>                file<span class="op">.</span>write_all(<span class="pp">format!</span>(<span class="st">&quot;max,avg</span><span class="sc">\n</span><span class="st">{},{}&quot;</span><span class="op">,</span> max<span class="op">,</span> avg)<span class="op">.</span>as_bytes())<span class="op">?;</span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>            group<span class="op">.</span>finish()<span class="op">;</span></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span>)</span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> measure(</span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>    group<span class="op">:</span> <span class="op">&amp;</span><span class="kw">mut</span> <span class="pp">criterion::</span>BenchmarkGroup<span class="op">&lt;</span><span class="pp">criterion::measurement::</span>WallTime<span class="op">&gt;,</span></span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>    alg<span class="op">:</span> <span class="kw">for</span><span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="kw">fn</span>(<span class="op">&amp;</span><span class="ot">&#39;a</span> Instance) <span class="op">-&gt;</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;,</span></span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>    solutions<span class="op">:</span> <span class="op">&amp;</span>HashMap<span class="op">&lt;</span>(<span class="dt">u32</span><span class="op">,</span> <span class="dt">i32</span>)<span class="op">,</span> OptimalSolution<span class="op">&gt;,</span></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>    n<span class="op">:</span> <span class="dt">u32</span><span class="op">,</span></span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>    instances<span class="op">:</span> <span class="op">&amp;</span><span class="dt">Vec</span><span class="op">&lt;</span>Instance<span class="op">&gt;</span></span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> (<span class="dt">f64</span><span class="op">,</span> <span class="dt">f64</span><span class="op">,</span> <span class="dt">u32</span>) <span class="op">{</span></span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> stats <span class="op">=</span> (<span class="dv">0.0</span><span class="op">,</span> <span class="dv">0.0</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>    group<span class="op">.</span>bench_with_input(</span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>        <span class="pp">BenchmarkId::</span>from_parameter(n)<span class="op">,</span></span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>        instances<span class="op">,</span></span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>        <span class="op">|</span>b<span class="op">,</span> ins<span class="op">|</span> b<span class="op">.</span>iter(</span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>            <span class="op">||</span> ins<span class="op">.</span>iter()<span class="op">.</span>for_each(<span class="op">|</span>inst<span class="op">|</span> <span class="op">{</span></span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>                <span class="kw">let</span> sln <span class="op">=</span> alg(inst)<span class="op">;</span></span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>                <span class="kw">let</span> optimal <span class="op">=</span> <span class="op">&amp;</span>solutions[<span class="op">&amp;</span>(n<span class="op">,</span> inst<span class="op">.</span>id)]<span class="op">;</span></span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>                <span class="kw">if</span> optimal<span class="op">.</span>cost <span class="op">!=</span> <span class="dv">0</span> <span class="op">{</span></span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">let</span> error <span class="op">=</span> <span class="dv">1.0</span> <span class="op">-</span> sln<span class="op">.</span>cost <span class="kw">as</span> <span class="dt">f64</span> <span class="op">/</span> optimal<span class="op">.</span>cost <span class="kw">as</span> <span class="dt">f64</span><span class="op">;</span></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">let</span> (max<span class="op">,</span> avg<span class="op">,</span> n) <span class="op">=</span> stats<span class="op">;</span></span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>                    stats <span class="op">=</span> (<span class="kw">if</span> error <span class="op">&gt;</span> max <span class="op">{</span> error <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span> max <span class="op">},</span> avg <span class="op">+</span> error<span class="op">,</span> n <span class="op">+</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span>)</span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a>    stats</span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> load_input(set<span class="op">:</span> <span class="op">&amp;</span><span class="dt">str</span><span class="op">,</span> r<span class="op">:</span> Range<span class="op">&lt;</span><span class="dt">u32</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span><span class="dt">Vec</span><span class="op">&lt;</span>Instance<span class="op">&gt;&gt;</span> <span class="op">{</span></span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> instances <span class="op">=</span> <span class="dt">Vec</span><span class="pp">::</span>new()<span class="op">;</span></span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> file <span class="kw">in</span> list_input_files(set<span class="op">,</span> r)<span class="op">?</span> <span class="op">{</span></span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> file <span class="op">=</span> file<span class="op">?;</span></span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="kw">mut</span> r <span class="op">=</span> <span class="pp">BufReader::</span>new(<span class="pp">File::</span>open(file<span class="op">.</span>path())<span class="op">?</span>)<span class="op">;</span></span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a>        <span class="kw">while</span> <span class="kw">let</span> <span class="cn">Some</span>(inst) <span class="op">=</span> parse_line(<span class="op">&amp;</span><span class="kw">mut</span> r)<span class="op">?</span> <span class="op">{</span></span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a>            instances<span class="op">.</span>push(inst)<span class="op">;</span></span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>    <span class="cn">Ok</span>(instances)</span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> proxy(c<span class="op">:</span> <span class="op">&amp;</span><span class="kw">mut</span> Criterion) <span class="op">{</span></span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a>    full(c)<span class="op">.</span>unwrap()</span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a><span class="pp">criterion_group!</span>(benches<span class="op">,</span> proxy)<span class="op">;</span></span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a><span class="pp">criterion_main!</span>(benches)<span class="op">;</span></span></code></pre></div>
</div>
</div>
<h3 id="spouštění-jednotlivých-řešičů">Spouštění jednotlivých řešičů</h3>
<p>Projekt podporuje sestavení spustitelného souboru schopného zpracovat libovolný vstup ze zadání za pomoci algoritmu zvoleného na příkazové řádce. Zdrojový kód tohoto rozhraní se nachází v souboru <code>solver/src/bin/main.rs</code>. Na standardní výstup vypisuje cenu a chybu řešení, spoléhá ovšem na to, že mezi optimálními řešeními najde i to pro kombinaci velikosti a ID zadané instance.</p>
<div class="annotated-code">
<p><span><em>«solver/src/bin/main.rs»=</em></span></p>
<div class="sourceCode" id="cb4" data-file="solver/src/bin/main.rs"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">extern</span> <span class="kw">crate</span> solver<span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="pp">std::io::</span>stdin<span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="pp">solver::</span><span class="op">*;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="pp">anyhow::</span><span class="op">{</span><span class="dt">Result</span><span class="op">,</span> anyhow<span class="op">};</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> main() <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span>()<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> algorithms <span class="op">=</span> get_algorithms()<span class="op">;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> solutions <span class="op">=</span> load_solutions(<span class="st">&quot;NK&quot;</span>)<span class="op">?;</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> alg <span class="op">=</span> <span class="op">*{</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;&lt;</span>select<span class="op">-</span>algorithm<span class="op">&gt;&gt;</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}?;</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> (cost<span class="op">,</span> error) <span class="kw">in</span> solve_stream(alg<span class="op">,</span> solutions<span class="op">,</span> <span class="op">&amp;</span><span class="kw">mut</span> stdin()<span class="op">.</span>lock())<span class="op">?</span> <span class="op">{</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>        <span class="pp">println!</span>(<span class="st">&quot;{} {}&quot;</span><span class="op">,</span> cost<span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="cn">Ok</span>(())</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<p>Funkci příslušnou vybranému algoritmu vrátíme jako hodnotu tohoto bloku:</p>
<div class="fold-block">
<button class="btn btn-outline-primary btn-sm fold-toggle" type="button" data-toggle="collapse" data-target="#select-algorithm-container" aria-controls="select-algorithm-container">&lt;&lt;select-algorithm&gt;&gt;=</button>
<div id="select-algorithm-container" class="collapse">
<div class="sourceCode" id="select-algorithm" style="max-height: 50vh"><pre class="sourceCode rust bootstrap-fold overflow-auto"><code class="sourceCode rust"><span id="select-algorithm-1"><a href="#select-algorithm-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> args<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">String</span><span class="op">&gt;</span> <span class="op">=</span> <span class="pp">std::env::</span>args()<span class="op">.</span>collect()<span class="op">;</span></span>
<span id="select-algorithm-2"><a href="#select-algorithm-2" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> args<span class="op">.</span>len() <span class="op">==</span> <span class="dv">2</span> <span class="op">{</span></span>
<span id="select-algorithm-3"><a href="#select-algorithm-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> alg <span class="op">=</span> <span class="op">&amp;</span>args[<span class="dv">1</span>][<span class="op">..</span>]<span class="op">;</span></span>
<span id="select-algorithm-4"><a href="#select-algorithm-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="kw">let</span> <span class="cn">Some</span>(f) <span class="op">=</span> algorithms<span class="op">.</span>get(alg) <span class="op">{</span></span>
<span id="select-algorithm-5"><a href="#select-algorithm-5" aria-hidden="true" tabindex="-1"></a>        <span class="cn">Ok</span>(f)</span>
<span id="select-algorithm-6"><a href="#select-algorithm-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span id="select-algorithm-7"><a href="#select-algorithm-7" aria-hidden="true" tabindex="-1"></a>        <span class="cn">Err</span>(<span class="pp">anyhow!</span>(<span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">{}</span><span class="sc">\&quot;</span><span class="st"> is not a known algorithm&quot;</span><span class="op">,</span> alg))</span>
<span id="select-algorithm-8"><a href="#select-algorithm-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="select-algorithm-9"><a href="#select-algorithm-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span id="select-algorithm-10"><a href="#select-algorithm-10" aria-hidden="true" tabindex="-1"></a>    <span class="pp">println!</span>(</span>
<span id="select-algorithm-11"><a href="#select-algorithm-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Usage: {} &lt;algorithm&gt;</span><span class="sc">\n\t</span><span class="st">where &lt;algorithm&gt; is one of {}&quot;</span><span class="op">,</span></span>
<span id="select-algorithm-12"><a href="#select-algorithm-12" aria-hidden="true" tabindex="-1"></a>        args[<span class="dv">0</span>]<span class="op">,</span></span>
<span id="select-algorithm-13"><a href="#select-algorithm-13" aria-hidden="true" tabindex="-1"></a>        algorithms<span class="op">.</span>keys()<span class="op">.</span>map(<span class="bu">ToString</span><span class="pp">::</span>to_string)<span class="op">.</span><span class="pp">collect::</span><span class="op">&lt;</span><span class="dt">Vec</span><span class="op">&lt;</span>_<span class="op">&gt;&gt;</span>()<span class="op">.</span>join(<span class="st">&quot;, &quot;</span>)</span>
<span id="select-algorithm-14"><a href="#select-algorithm-14" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="select-algorithm-15"><a href="#select-algorithm-15" aria-hidden="true" tabindex="-1"></a>    <span class="cn">Err</span>(<span class="pp">anyhow!</span>(<span class="st">&quot;Expected 1 argument, got {}&quot;</span><span class="op">,</span> args<span class="op">.</span>len() <span class="op">-</span> <span class="dv">1</span>))</span>
<span id="select-algorithm-16"><a href="#select-algorithm-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
</div>
<h3 id="automatické-testy">Automatické testy</h3>
<p>Implementaci doplňují automatické testy k ověření správnosti, včetně property-based testu s knihovnou <a href="https://github.com/BurntSushi/quickcheck">quickcheck</a>.</p>
<div class="fold-block">
<button class="btn btn-outline-primary btn-sm fold-toggle" type="button" data-toggle="collapse" data-target="#tests-container" aria-controls="tests-container">&lt;&lt;tests&gt;&gt;=</button>
<div id="tests-container" class="collapse">
<div class="sourceCode" id="tests" style="max-height: 50vh"><pre class="sourceCode rust bootstrap-fold overflow-auto"><code class="sourceCode rust"><span id="tests-1"><a href="#tests-1" aria-hidden="true" tabindex="-1"></a><span class="at">#[</span>cfg<span class="at">(</span>test<span class="at">)]</span></span>
<span id="tests-2"><a href="#tests-2" aria-hidden="true" tabindex="-1"></a><span class="kw">mod</span> tests <span class="op">{</span></span>
<span id="tests-3"><a href="#tests-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">use</span> <span class="kw">super</span><span class="pp">::</span><span class="op">*;</span></span>
<span id="tests-4"><a href="#tests-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">use</span> <span class="pp">quickcheck::</span><span class="op">{</span>Arbitrary<span class="op">,</span> Gen<span class="op">};</span></span>
<span id="tests-5"><a href="#tests-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">use</span> <span class="pp">std::</span><span class="op">{</span><span class="pp">fs::</span>File<span class="op">,</span> <span class="pp">io::</span>BufReader<span class="op">};</span></span>
<span id="tests-6"><a href="#tests-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-7"><a href="#tests-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">impl</span> Arbitrary <span class="kw">for</span> Instance <span class="op">{</span></span>
<span id="tests-8"><a href="#tests-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">fn</span> arbitrary(g<span class="op">:</span> <span class="op">&amp;</span><span class="kw">mut</span> Gen) <span class="op">-&gt;</span> Instance <span class="op">{</span></span>
<span id="tests-9"><a href="#tests-9" aria-hidden="true" tabindex="-1"></a>            Instance <span class="op">{</span></span>
<span id="tests-10"><a href="#tests-10" aria-hidden="true" tabindex="-1"></a>                id<span class="op">:</span>    <span class="dt">i32</span><span class="pp">::</span>arbitrary(g)<span class="op">,</span></span>
<span id="tests-11"><a href="#tests-11" aria-hidden="true" tabindex="-1"></a>                m<span class="op">:</span>     <span class="dt">u32</span><span class="pp">::</span>arbitrary(g)<span class="op">.</span>min(<span class="dv">10_000</span>)<span class="op">,</span></span>
<span id="tests-12"><a href="#tests-12" aria-hidden="true" tabindex="-1"></a>                items<span class="op">:</span> <span class="pp">vec!</span>[<span class="op">&lt;</span>(<span class="dt">u32</span><span class="op">,</span> <span class="dt">u32</span>)<span class="op">&gt;</span><span class="pp">::</span>arbitrary(g)]</span>
<span id="tests-13"><a href="#tests-13" aria-hidden="true" tabindex="-1"></a>                           <span class="op">.</span>into_iter()</span>
<span id="tests-14"><a href="#tests-14" aria-hidden="true" tabindex="-1"></a>                           <span class="op">.</span>chain(<span class="dt">Vec</span><span class="pp">::</span>arbitrary(g)<span class="op">.</span>into_iter())</span>
<span id="tests-15"><a href="#tests-15" aria-hidden="true" tabindex="-1"></a>                           <span class="op">.</span>take(<span class="dv">10</span>)</span>
<span id="tests-16"><a href="#tests-16" aria-hidden="true" tabindex="-1"></a>                           <span class="op">.</span>map(<span class="op">|</span>(w<span class="op">,</span> c)<span class="op">:</span> (<span class="dt">u32</span><span class="op">,</span> <span class="dt">u32</span>)<span class="op">|</span> (w<span class="op">.</span>min(<span class="dv">10_000</span>)<span class="op">,</span> c <span class="op">%</span> <span class="dv">10_000</span>))</span>
<span id="tests-17"><a href="#tests-17" aria-hidden="true" tabindex="-1"></a>                           <span class="op">.</span>collect()<span class="op">,</span></span>
<span id="tests-18"><a href="#tests-18" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="tests-19"><a href="#tests-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="tests-20"><a href="#tests-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-21"><a href="#tests-21" aria-hidden="true" tabindex="-1"></a>        <span class="kw">fn</span> shrink(<span class="op">&amp;</span><span class="kw">self</span>) <span class="op">-&gt;</span> <span class="dt">Box</span><span class="op">&lt;</span><span class="kw">dyn</span> <span class="bu">Iterator</span><span class="op">&lt;</span>Item <span class="op">=</span> <span class="dt">Self</span><span class="op">&gt;&gt;</span> <span class="op">{</span></span>
<span id="tests-22"><a href="#tests-22" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> data <span class="op">=</span> <span class="kw">self</span><span class="op">.</span>clone()<span class="op">;</span></span>
<span id="tests-23"><a href="#tests-23" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> chain<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span>Instance<span class="op">&gt;</span> <span class="op">=</span> <span class="pp">quickcheck::</span>empty_shrinker()</span>
<span id="tests-24"><a href="#tests-24" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span>chain(<span class="kw">self</span><span class="op">.</span>id   <span class="op">.</span>shrink()<span class="op">.</span>map(<span class="op">|</span>id   <span class="op">|</span> Instance <span class="op">{</span>id<span class="op">,</span>    <span class="op">..</span>(<span class="op">&amp;</span>data)<span class="op">.</span>clone()<span class="op">}</span>))</span>
<span id="tests-25"><a href="#tests-25" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span>chain(<span class="kw">self</span><span class="op">.</span>m    <span class="op">.</span>shrink()<span class="op">.</span>map(<span class="op">|</span>m    <span class="op">|</span> Instance <span class="op">{</span>m<span class="op">,</span>     <span class="op">..</span>(<span class="op">&amp;</span>data)<span class="op">.</span>clone()<span class="op">}</span>))</span>
<span id="tests-26"><a href="#tests-26" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span>chain(<span class="kw">self</span><span class="op">.</span>items<span class="op">.</span>shrink()<span class="op">.</span>map(<span class="op">|</span>items<span class="op">|</span> Instance <span class="op">{</span> items<span class="op">,</span> <span class="op">..</span>(<span class="op">&amp;</span>data)<span class="op">.</span>clone() <span class="op">}</span>)</span>
<span id="tests-27"><a href="#tests-27" aria-hidden="true" tabindex="-1"></a>                        <span class="op">.</span>filter(<span class="op">|</span>i<span class="op">|</span> <span class="op">!</span>i<span class="op">.</span>items<span class="op">.</span>is_empty()))</span>
<span id="tests-28"><a href="#tests-28" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span>collect()<span class="op">;</span></span>
<span id="tests-29"><a href="#tests-29" aria-hidden="true" tabindex="-1"></a>            <span class="dt">Box</span><span class="pp">::</span>new(chain<span class="op">.</span>into_iter())</span>
<span id="tests-30"><a href="#tests-30" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="tests-31"><a href="#tests-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="tests-32"><a href="#tests-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-33"><a href="#tests-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">impl</span> <span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="tests-34"><a href="#tests-34" aria-hidden="true" tabindex="-1"></a>        <span class="kw">fn</span> assert_valid(<span class="op">&amp;</span><span class="kw">self</span>) <span class="op">{</span></span>
<span id="tests-35"><a href="#tests-35" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> Solution <span class="op">{</span> weight<span class="op">,</span> cost<span class="op">,</span> cfg<span class="op">,</span> inst <span class="op">}</span> <span class="op">=</span> <span class="kw">self</span><span class="op">;</span></span>
<span id="tests-36"><a href="#tests-36" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> Instance <span class="op">{</span> m<span class="op">,</span> items<span class="op">,</span> <span class="op">..</span> <span class="op">}</span> <span class="op">=</span> inst<span class="op">;</span></span>
<span id="tests-37"><a href="#tests-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-38"><a href="#tests-38" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> (computed_weight<span class="op">,</span> computed_cost) <span class="op">=</span> items</span>
<span id="tests-39"><a href="#tests-39" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span>into_iter()</span>
<span id="tests-40"><a href="#tests-40" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span>zip(cfg)</span>
<span id="tests-41"><a href="#tests-41" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span>map(<span class="op">|</span>((w<span class="op">,</span> c)<span class="op">,</span> b)<span class="op">|</span> <span class="op">{</span></span>
<span id="tests-42"><a href="#tests-42" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">if</span> <span class="op">*</span>b <span class="op">{</span> (<span class="op">*</span>w<span class="op">,</span> <span class="op">*</span>c) <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span> (<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">}</span></span>
<span id="tests-43"><a href="#tests-43" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span>)</span>
<span id="tests-44"><a href="#tests-44" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span>reduce(<span class="op">|</span>(a0<span class="op">,</span> b0)<span class="op">,</span> (a1<span class="op">,</span> b1)<span class="op">|</span> (a0 <span class="op">+</span> a1<span class="op">,</span> b0 <span class="op">+</span> b1))</span>
<span id="tests-45"><a href="#tests-45" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span>unwrap_or_default()<span class="op">;</span></span>
<span id="tests-46"><a href="#tests-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-47"><a href="#tests-47" aria-hidden="true" tabindex="-1"></a>            <span class="pp">assert!</span>(computed_weight <span class="op">&lt;=</span> <span class="op">*</span>m)<span class="op">;</span></span>
<span id="tests-48"><a href="#tests-48" aria-hidden="true" tabindex="-1"></a>            <span class="pp">assert_eq!</span>(computed_cost<span class="op">,</span> <span class="op">*</span>cost)<span class="op">;</span></span>
<span id="tests-49"><a href="#tests-49" aria-hidden="true" tabindex="-1"></a>            <span class="pp">assert_eq!</span>(computed_weight<span class="op">,</span> <span class="op">*</span>weight)<span class="op">;</span></span>
<span id="tests-50"><a href="#tests-50" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="tests-51"><a href="#tests-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="tests-52"><a href="#tests-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-53"><a href="#tests-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">#[</span>test<span class="at">]</span></span>
<span id="tests-54"><a href="#tests-54" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> stupid() <span class="op">{</span></span>
<span id="tests-55"><a href="#tests-55" aria-hidden="true" tabindex="-1"></a>        <span class="co">// let i = Instance { id: 0, m: 1, b: 0, items: vec![(1, 0), (1, 0)] };</span></span>
<span id="tests-56"><a href="#tests-56" aria-hidden="true" tabindex="-1"></a>        <span class="co">// i.branch_and_bound2().assert_valid(&amp;i);</span></span>
<span id="tests-57"><a href="#tests-57" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> i <span class="op">=</span> Instance <span class="op">{</span> id<span class="op">:</span> <span class="dv">0</span><span class="op">,</span> m<span class="op">:</span> <span class="dv">1</span><span class="op">,</span> items<span class="op">:</span> <span class="pp">vec!</span>[(<span class="dv">1</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">,</span> (<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> (<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>)] <span class="op">};</span></span>
<span id="tests-58"><a href="#tests-58" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> bb <span class="op">=</span> i<span class="op">.</span>branch_and_bound()<span class="op">;</span></span>
<span id="tests-59"><a href="#tests-59" aria-hidden="true" tabindex="-1"></a>        <span class="pp">assert_eq!</span>(bb<span class="op">.</span>cost<span class="op">,</span> i<span class="op">.</span>dynamic_programming_w()<span class="op">.</span>cost)<span class="op">;</span></span>
<span id="tests-60"><a href="#tests-60" aria-hidden="true" tabindex="-1"></a>        <span class="pp">assert_eq!</span>(bb<span class="op">.</span>cost<span class="op">,</span> i<span class="op">.</span>dynamic_programming_c()<span class="op">.</span>cost)<span class="op">;</span></span>
<span id="tests-61"><a href="#tests-61" aria-hidden="true" tabindex="-1"></a>        <span class="pp">assert_eq!</span>(bb<span class="op">.</span>cost<span class="op">,</span> i<span class="op">.</span>greedy_redux()<span class="op">.</span>cost)<span class="op">;</span></span>
<span id="tests-62"><a href="#tests-62" aria-hidden="true" tabindex="-1"></a>        <span class="pp">assert_eq!</span>(bb<span class="op">.</span>cost<span class="op">,</span> i<span class="op">.</span>brute_force()<span class="op">.</span>cost)<span class="op">;</span></span>
<span id="tests-63"><a href="#tests-63" aria-hidden="true" tabindex="-1"></a>        <span class="pp">assert_eq!</span>(bb<span class="op">.</span>cost<span class="op">,</span> i<span class="op">.</span>greedy()<span class="op">.</span>cost)<span class="op">;</span></span>
<span id="tests-64"><a href="#tests-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="tests-65"><a href="#tests-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-66"><a href="#tests-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">#[</span>test<span class="at">]</span></span>
<span id="tests-67"><a href="#tests-67" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> proper() <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span>()<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="tests-68"><a href="#tests-68" aria-hidden="true" tabindex="-1"></a>        <span class="kw">type</span> Solver <span class="op">=</span> (<span class="op">&amp;</span><span class="ot">&#39;static</span> <span class="dt">str</span><span class="op">,</span> <span class="kw">for</span><span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="kw">fn</span>(<span class="op">&amp;</span><span class="ot">&#39;a</span> Instance) <span class="op">-&gt;</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span>)<span class="op">;</span></span>
<span id="tests-69"><a href="#tests-69" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> algs <span class="op">=</span> get_algorithms()<span class="op">;</span></span>
<span id="tests-70"><a href="#tests-70" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> algs<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span>Solver<span class="op">&gt;</span> <span class="op">=</span> algs<span class="op">.</span>iter()<span class="op">.</span>map(<span class="op">|</span>(s<span class="op">,</span> f)<span class="op">|</span> (<span class="op">*</span>s<span class="op">,</span> <span class="op">*</span>f))<span class="op">.</span>collect()<span class="op">;</span></span>
<span id="tests-71"><a href="#tests-71" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> opts <span class="op">=</span> load_solutions(<span class="st">&quot;NK&quot;</span>)<span class="op">?;</span></span>
<span id="tests-72"><a href="#tests-72" aria-hidden="true" tabindex="-1"></a>        <span class="pp">println!</span>(<span class="st">&quot;loaded {} optimal solutions&quot;</span><span class="op">,</span> opts<span class="op">.</span>len())<span class="op">;</span></span>
<span id="tests-73"><a href="#tests-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-74"><a href="#tests-74" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> solve<span class="op">:</span> <span class="kw">for</span><span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="kw">fn</span>(<span class="op">&amp;</span><span class="dt">Vec</span><span class="op">&lt;</span>_<span class="op">&gt;,</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> _) <span class="op">-&gt;</span> <span class="dt">Vec</span><span class="op">&lt;</span>(<span class="op">&amp;</span><span class="ot">&#39;static</span> <span class="dt">str</span><span class="op">,</span> Solution<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span>)<span class="op">&gt;</span> <span class="op">=</span></span>
<span id="tests-75"><a href="#tests-75" aria-hidden="true" tabindex="-1"></a>            <span class="op">|</span>algs<span class="op">,</span> inst<span class="op">|</span></span>
<span id="tests-76"><a href="#tests-76" aria-hidden="true" tabindex="-1"></a>            algs<span class="op">.</span>iter()<span class="op">.</span>map(<span class="op">|</span>(name<span class="op">,</span> alg)<span class="op">:</span> <span class="op">&amp;</span>Solver<span class="op">|</span> (<span class="op">*</span>name<span class="op">,</span> alg(inst)))<span class="op">.</span>collect()<span class="op">;</span></span>
<span id="tests-77"><a href="#tests-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-78"><a href="#tests-78" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="kw">mut</span> files <span class="op">=</span> list_input_files(<span class="st">&quot;NK&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">..</span><span class="dv">5</span>)<span class="op">?.</span>into_iter()<span class="op">;</span></span>
<span id="tests-79"><a href="#tests-79" aria-hidden="true" tabindex="-1"></a>        <span class="co">// make sure `files` is not empty</span></span>
<span id="tests-80"><a href="#tests-80" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> first <span class="op">=</span> files<span class="op">.</span>next()<span class="op">.</span>ok_or(<span class="pp">anyhow!</span>(<span class="st">&quot;no instance files loaded&quot;</span>))<span class="op">?;</span></span>
<span id="tests-81"><a href="#tests-81" aria-hidden="true" tabindex="-1"></a>        <span class="kw">for</span> file <span class="kw">in</span> <span class="pp">vec!</span>[first]<span class="op">.</span>into_iter()<span class="op">.</span>chain(files) <span class="op">{</span></span>
<span id="tests-82"><a href="#tests-82" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> file <span class="op">=</span> file<span class="op">?;</span></span>
<span id="tests-83"><a href="#tests-83" aria-hidden="true" tabindex="-1"></a>            <span class="pp">println!</span>(<span class="st">&quot;Testing {}&quot;</span><span class="op">,</span> file<span class="op">.</span>file_name()<span class="op">.</span>to_str()<span class="op">.</span>unwrap())<span class="op">;</span></span>
<span id="tests-84"><a href="#tests-84" aria-hidden="true" tabindex="-1"></a>            <span class="co">// open the file</span></span>
<span id="tests-85"><a href="#tests-85" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> <span class="kw">mut</span> r <span class="op">=</span> <span class="pp">BufReader::</span>new(<span class="pp">File::</span>open(file<span class="op">.</span>path())<span class="op">?</span>)<span class="op">;</span></span>
<span id="tests-86"><a href="#tests-86" aria-hidden="true" tabindex="-1"></a>            <span class="co">// solve each instance with all algorithms</span></span>
<span id="tests-87"><a href="#tests-87" aria-hidden="true" tabindex="-1"></a>            <span class="kw">while</span> <span class="kw">let</span> <span class="cn">Some</span>(slns) <span class="op">=</span> parse_line(<span class="op">&amp;</span><span class="kw">mut</span> r)<span class="op">?.</span>as_ref()<span class="op">.</span>map(<span class="op">|</span>x<span class="op">|</span> solve(<span class="op">&amp;</span>algs<span class="op">,</span> x)) <span class="op">{</span></span>
<span id="tests-88"><a href="#tests-88" aria-hidden="true" tabindex="-1"></a>                <span class="co">// verify correctness</span></span>
<span id="tests-89"><a href="#tests-89" aria-hidden="true" tabindex="-1"></a>                slns<span class="op">.</span>iter()<span class="op">.</span>for_each(<span class="op">|</span>(alg<span class="op">,</span> s)<span class="op">|</span> <span class="op">{</span></span>
<span id="tests-90"><a href="#tests-90" aria-hidden="true" tabindex="-1"></a>                    <span class="pp">eprint!</span>(<span class="st">&quot;</span><span class="sc">\r</span><span class="st">id: {} alg: {}</span><span class="sc">\t</span><span class="st">&quot;</span><span class="op">,</span> s<span class="op">.</span>inst<span class="op">.</span>id<span class="op">,</span> alg)<span class="op">;</span></span>
<span id="tests-91"><a href="#tests-91" aria-hidden="true" tabindex="-1"></a>                    s<span class="op">.</span>assert_valid()<span class="op">;</span></span>
<span id="tests-92"><a href="#tests-92" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">let</span> key <span class="op">=</span> (s<span class="op">.</span>inst<span class="op">.</span>items<span class="op">.</span>len() <span class="kw">as</span> <span class="dt">u32</span><span class="op">,</span> s<span class="op">.</span>inst<span class="op">.</span>id)<span class="op">;</span></span>
<span id="tests-93"><a href="#tests-93" aria-hidden="true" tabindex="-1"></a>                    <span class="pp">assert!</span>(s<span class="op">.</span>cost <span class="op">&lt;=</span> opts[<span class="op">&amp;</span>key]<span class="op">.</span>cost)<span class="op">;</span></span>
<span id="tests-94"><a href="#tests-94" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span>)<span class="op">;</span></span>
<span id="tests-95"><a href="#tests-95" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="tests-96"><a href="#tests-96" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="tests-97"><a href="#tests-97" aria-hidden="true" tabindex="-1"></a>        <span class="cn">Ok</span>(())</span>
<span id="tests-98"><a href="#tests-98" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="tests-99"><a href="#tests-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-100"><a href="#tests-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">#[</span>test<span class="at">]</span></span>
<span id="tests-101"><a href="#tests-101" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> dpc_simple() <span class="op">{</span></span>
<span id="tests-102"><a href="#tests-102" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> i <span class="op">=</span> Instance <span class="op">{</span> id<span class="op">:</span> <span class="dv">0</span><span class="op">,</span> m<span class="op">:</span> <span class="dv">0</span><span class="op">,</span> items<span class="op">:</span> <span class="pp">vec!</span>[(<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">,</span> (<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>)] <span class="op">};</span></span>
<span id="tests-103"><a href="#tests-103" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> s <span class="op">=</span> i<span class="op">.</span>dynamic_programming_c()<span class="op">;</span></span>
<span id="tests-104"><a href="#tests-104" aria-hidden="true" tabindex="-1"></a>        <span class="pp">assert_eq!</span>(s<span class="op">.</span>cost<span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="tests-105"><a href="#tests-105" aria-hidden="true" tabindex="-1"></a>        <span class="pp">assert_eq!</span>(s<span class="op">.</span>weight<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="tests-106"><a href="#tests-106" aria-hidden="true" tabindex="-1"></a>        s<span class="op">.</span>assert_valid()<span class="op">;</span></span>
<span id="tests-107"><a href="#tests-107" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="tests-108"><a href="#tests-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-109"><a href="#tests-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">#[</span>test<span class="at">]</span></span>
<span id="tests-110"><a href="#tests-110" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> fptas_is_within_bounds() <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span>()<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="tests-111"><a href="#tests-111" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> opts <span class="op">=</span> load_solutions(<span class="st">&quot;NK&quot;</span>)<span class="op">?;</span></span>
<span id="tests-112"><a href="#tests-112" aria-hidden="true" tabindex="-1"></a>        <span class="kw">for</span> eps <span class="kw">in</span> [<span class="dv">0.1</span><span class="op">,</span> <span class="dv">0.01</span>] <span class="op">{</span></span>
<span id="tests-113"><a href="#tests-113" aria-hidden="true" tabindex="-1"></a>            <span class="kw">for</span> file <span class="kw">in</span> list_input_files(<span class="st">&quot;NK&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">..</span><span class="dv">5</span>)<span class="op">?</span> <span class="op">{</span></span>
<span id="tests-114"><a href="#tests-114" aria-hidden="true" tabindex="-1"></a>                <span class="kw">let</span> file <span class="op">=</span> file<span class="op">?;</span></span>
<span id="tests-115"><a href="#tests-115" aria-hidden="true" tabindex="-1"></a>                <span class="kw">let</span> <span class="kw">mut</span> r <span class="op">=</span> <span class="pp">BufReader::</span>new(<span class="pp">File::</span>open(file<span class="op">.</span>path())<span class="op">?</span>)<span class="op">;</span></span>
<span id="tests-116"><a href="#tests-116" aria-hidden="true" tabindex="-1"></a>                <span class="kw">while</span> <span class="kw">let</span> <span class="cn">Some</span>(sln) <span class="op">=</span> parse_line(<span class="op">&amp;</span><span class="kw">mut</span> r)<span class="op">?.</span>as_ref()<span class="op">.</span>map(<span class="op">|</span>x<span class="op">|</span> x<span class="op">.</span>fptas(eps)) <span class="op">{</span></span>
<span id="tests-117"><a href="#tests-117" aria-hidden="true" tabindex="-1"></a>                    <span class="co">// make sure the solution from fptas is at least (1 - eps) * optimal cost</span></span>
<span id="tests-118"><a href="#tests-118" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">let</span> key <span class="op">=</span> (sln<span class="op">.</span>inst<span class="op">.</span>items<span class="op">.</span>len() <span class="kw">as</span> <span class="dt">u32</span><span class="op">,</span> sln<span class="op">.</span>inst<span class="op">.</span>id)<span class="op">;</span></span>
<span id="tests-119"><a href="#tests-119" aria-hidden="true" tabindex="-1"></a>                    <span class="pp">println!</span>(<span class="st">&quot;{} {} {}&quot;</span><span class="op">,</span> sln<span class="op">.</span>cost<span class="op">,</span> opts[<span class="op">&amp;</span>key]<span class="op">.</span>cost<span class="op">,</span> (<span class="dv">1.0</span> <span class="op">-</span> eps) <span class="op">*</span> opts[<span class="op">&amp;</span>key]<span class="op">.</span>cost <span class="kw">as</span> <span class="dt">f64</span>)<span class="op">;</span></span>
<span id="tests-120"><a href="#tests-120" aria-hidden="true" tabindex="-1"></a>                    <span class="pp">assert!</span>(sln<span class="op">.</span>cost <span class="kw">as</span> <span class="dt">f64</span> <span class="op">&gt;=</span> opts[<span class="op">&amp;</span>key]<span class="op">.</span>cost <span class="kw">as</span> <span class="dt">f64</span> <span class="op">*</span> (<span class="dv">1.0</span> <span class="op">-</span> eps))<span class="op">;</span></span>
<span id="tests-121"><a href="#tests-121" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="tests-122"><a href="#tests-122" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="tests-123"><a href="#tests-123" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="tests-124"><a href="#tests-124" aria-hidden="true" tabindex="-1"></a>        <span class="cn">Ok</span>(())</span>
<span id="tests-125"><a href="#tests-125" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="tests-126"><a href="#tests-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-127"><a href="#tests-127" aria-hidden="true" tabindex="-1"></a>    <span class="at">#[</span>test<span class="at">]</span></span>
<span id="tests-128"><a href="#tests-128" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> small_bb_is_correct() <span class="op">{</span></span>
<span id="tests-129"><a href="#tests-129" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> a <span class="op">=</span> Instance <span class="op">{</span></span>
<span id="tests-130"><a href="#tests-130" aria-hidden="true" tabindex="-1"></a>            id<span class="op">:</span> <span class="op">-</span><span class="dv">10</span><span class="op">,</span></span>
<span id="tests-131"><a href="#tests-131" aria-hidden="true" tabindex="-1"></a>            m<span class="op">:</span> <span class="dv">165</span><span class="op">,</span></span>
<span id="tests-132"><a href="#tests-132" aria-hidden="true" tabindex="-1"></a>            items<span class="op">:</span> <span class="pp">vec!</span>[ (<span class="dv">86</span><span class="op">,</span>  <span class="dv">744</span>)</span>
<span id="tests-133"><a href="#tests-133" aria-hidden="true" tabindex="-1"></a>                       <span class="op">,</span> (<span class="dv">214</span><span class="op">,</span> <span class="dv">1373</span>)</span>
<span id="tests-134"><a href="#tests-134" aria-hidden="true" tabindex="-1"></a>                       <span class="op">,</span> (<span class="dv">236</span><span class="op">,</span> <span class="dv">1571</span>)</span>
<span id="tests-135"><a href="#tests-135" aria-hidden="true" tabindex="-1"></a>                       <span class="op">,</span> (<span class="dv">239</span><span class="op">,</span> <span class="dv">2388</span>)</span>
<span id="tests-136"><a href="#tests-136" aria-hidden="true" tabindex="-1"></a>                       ]<span class="op">,</span></span>
<span id="tests-137"><a href="#tests-137" aria-hidden="true" tabindex="-1"></a>        <span class="op">};</span></span>
<span id="tests-138"><a href="#tests-138" aria-hidden="true" tabindex="-1"></a>        a<span class="op">.</span>branch_and_bound()<span class="op">.</span>assert_valid()<span class="op">;</span></span>
<span id="tests-139"><a href="#tests-139" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="tests-140"><a href="#tests-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-141"><a href="#tests-141" aria-hidden="true" tabindex="-1"></a>    <span class="at">#[</span>test<span class="at">]</span></span>
<span id="tests-142"><a href="#tests-142" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> bb_is_correct() <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span>()<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="tests-143"><a href="#tests-143" aria-hidden="true" tabindex="-1"></a>        <span class="kw">use</span> <span class="pp">std::fs::</span>File<span class="op">;</span></span>
<span id="tests-144"><a href="#tests-144" aria-hidden="true" tabindex="-1"></a>        <span class="kw">use</span> <span class="pp">std::io::</span>BufReader<span class="op">;</span></span>
<span id="tests-145"><a href="#tests-145" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> inst <span class="op">=</span> parse_line(</span>
<span id="tests-146"><a href="#tests-146" aria-hidden="true" tabindex="-1"></a>            <span class="op">&amp;</span><span class="kw">mut</span> <span class="pp">BufReader::</span>new(<span class="pp">File::</span>open(<span class="st">&quot;ds/NK15_inst.dat&quot;</span>)<span class="op">?</span>)</span>
<span id="tests-147"><a href="#tests-147" aria-hidden="true" tabindex="-1"></a>        )<span class="op">?.</span>unwrap()<span class="op">;</span></span>
<span id="tests-148"><a href="#tests-148" aria-hidden="true" tabindex="-1"></a>        <span class="pp">println!</span>(<span class="st">&quot;testing {:?}&quot;</span><span class="op">,</span> inst)<span class="op">;</span></span>
<span id="tests-149"><a href="#tests-149" aria-hidden="true" tabindex="-1"></a>        inst<span class="op">.</span>branch_and_bound()<span class="op">.</span>assert_valid()<span class="op">;</span></span>
<span id="tests-150"><a href="#tests-150" aria-hidden="true" tabindex="-1"></a>        <span class="cn">Ok</span>(())</span>
<span id="tests-151"><a href="#tests-151" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="tests-152"><a href="#tests-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-153"><a href="#tests-153" aria-hidden="true" tabindex="-1"></a>    <span class="at">#[</span>quickcheck<span class="at">]</span></span>
<span id="tests-154"><a href="#tests-154" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> qc_bb_is_really_correct(inst<span class="op">:</span> Instance) <span class="op">{</span></span>
<span id="tests-155"><a href="#tests-155" aria-hidden="true" tabindex="-1"></a>        <span class="pp">assert_eq!</span>(inst<span class="op">.</span>branch_and_bound()<span class="op">.</span>cost<span class="op">,</span> inst<span class="op">.</span>brute_force()<span class="op">.</span>cost)<span class="op">;</span></span>
<span id="tests-156"><a href="#tests-156" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="tests-157"><a href="#tests-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-158"><a href="#tests-158" aria-hidden="true" tabindex="-1"></a>    <span class="at">#[</span>quickcheck<span class="at">]</span></span>
<span id="tests-159"><a href="#tests-159" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> qc_dp_matches_bb(inst<span class="op">:</span> Instance) <span class="op">{</span></span>
<span id="tests-160"><a href="#tests-160" aria-hidden="true" tabindex="-1"></a>        <span class="pp">assert!</span>(inst<span class="op">.</span>branch_and_bound()<span class="op">.</span>cost <span class="op">&lt;=</span> inst<span class="op">.</span>dynamic_programming_w()<span class="op">.</span>cost)<span class="op">;</span></span>
<span id="tests-161"><a href="#tests-161" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="tests-162"><a href="#tests-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-163"><a href="#tests-163" aria-hidden="true" tabindex="-1"></a>    <span class="at">#[</span>quickcheck<span class="at">]</span></span>
<span id="tests-164"><a href="#tests-164" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> qc_dps_match(inst<span class="op">:</span> Instance) <span class="op">{</span></span>
<span id="tests-165"><a href="#tests-165" aria-hidden="true" tabindex="-1"></a>        <span class="pp">assert_eq!</span>(inst<span class="op">.</span>dynamic_programming_w()<span class="op">.</span>cost<span class="op">,</span> inst<span class="op">.</span>dynamic_programming_c()<span class="op">.</span>cost)<span class="op">;</span></span>
<span id="tests-166"><a href="#tests-166" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="tests-167"><a href="#tests-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="tests-168"><a href="#tests-168" aria-hidden="true" tabindex="-1"></a>    <span class="at">#[</span>quickcheck<span class="at">]</span></span>
<span id="tests-169"><a href="#tests-169" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> qc_greedy_is_valid(inst<span class="op">:</span> Instance) <span class="op">{</span></span>
<span id="tests-170"><a href="#tests-170" aria-hidden="true" tabindex="-1"></a>        inst<span class="op">.</span>greedy()<span class="op">.</span>assert_valid()<span class="op">;</span></span>
<span id="tests-171"><a href="#tests-171" aria-hidden="true" tabindex="-1"></a>        inst<span class="op">.</span>greedy_redux()<span class="op">.</span>assert_valid()<span class="op">;</span></span>
<span id="tests-172"><a href="#tests-172" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="tests-173"><a href="#tests-173" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
</div>
</div></main>



<script type="text/javascript">
  function init() {
    var hiddenElements = document.getElementsByClassName('doctestResult');
    for (var i = 0; i < hiddenElements.length; i++) {
      var element = hiddenElements[i];
      var details = document.createElement('details');
      var summary = document.createElement('summary');
      summary.innerHTML = 'Program output';
      details.id = element.id;
      details.innerHTML = element.innerHTML;
      details.className = element.className;
      details.style.display = 'block';
      details.appendChild(summary);
      element.parentNode.replaceChild(details, element);
    }
  }

  // when the page is loaded, run init
  document.addEventListener('DOMContentLoaded', init);
</script>

<!-- Bootstrap 4.5.0 -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

<!-- Mathjax -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html>
